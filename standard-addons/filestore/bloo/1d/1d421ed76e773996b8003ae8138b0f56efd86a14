
/* /base/static/tests/test_ir_model_fields_translation.js */
odoo.define('@base/../tests/test_ir_model_fields_translation',async function(require){'use strict';let __exports={};"use strict";const tour=require("web_tour.tour");function checkLoginColumn(translation){return[tour.stepUtils.showAppsMenuItem(),{content:"Settings",trigger:'a[data-menu-xmlid="base.menu_administration"]',run:'click',},{content:"Open Users & Companies",trigger:'[data-menu-xmlid="base.menu_users"]',run:"click",},{content:"Open Users",trigger:'[data-menu-xmlid="base.menu_action_res_users"]',run:"click",},{content:`Login column should be ${translation}`,trigger:`[data-name="login"] span:contains("${translation}")`,}]}
tour.register('ir_model_fields_translation_en_tour',{test:true,url:'/web',},checkLoginColumn('Login'));tour.register('ir_model_fields_translation_en_tour2',{test:true,url:'/web',},checkLoginColumn('Login2'));tour.register('ir_model_fields_translation_fr_tour',{test:true,url:'/web',},checkLoginColumn('Identifiant'));tour.register('ir_model_fields_translation_fr_tour2',{test:true,url:'/web',},checkLoginColumn('Identifiant2'));return __exports;});;

/* /web/static/tests/legacy/helpers/test_utils_file.js */
odoo.define('web.test_utils_file',function(){"use strict";function _createFakeDataTransfer(files){return{dropEffect:'all',effectAllowed:'all',files,getData:function(){return files;},items:[],types:['Files'],};}
function createFile(data){return new Promise(function(resolve,reject){var requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;if(!requestFileSystem){throw new Error('FileSystem API is not supported');}
requestFileSystem(window.TEMPORARY,1024*1024,function(fileSystem){fileSystem.root.getFile(data.name,{create:true},function(fileEntry){fileEntry.createWriter(function(fileWriter){fileWriter.onwriteend=function(e){fileSystem.root.getFile(data.name,{},function(fileEntry){fileEntry.file(function(file){resolve(file);});});};fileWriter.write(new Blob([data.content],{type:data.contentType}));});});});});}
function dragoverFile($el,file){var ev=new Event('dragover',{bubbles:true});Object.defineProperty(ev,'dataTransfer',{value:_createFakeDataTransfer(file),});$el[0].dispatchEvent(ev);}
function dropFile($el,file){var ev=new Event('drop',{bubbles:true,});Object.defineProperty(ev,'dataTransfer',{value:_createFakeDataTransfer([file]),});$el[0].dispatchEvent(ev);}
function dropFiles($el,files){var ev=new Event('drop',{bubbles:true,});Object.defineProperty(ev,'dataTransfer',{value:_createFakeDataTransfer(files),});$el[0].dispatchEvent(ev);}
function inputFiles(el,files){const dataTransfer=new window.DataTransfer();for(const file of files){dataTransfer.items.add(file);}
el.files=dataTransfer.files;const versionRaw=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);const chromeVersion=versionRaw?parseInt(versionRaw[2],10):false;if(!chromeVersion||chromeVersion>=73){el.dispatchEvent(new Event('change'));}}
return{createFile:createFile,dragoverFile:dragoverFile,dropFile:dropFile,dropFiles,inputFiles,};});;

/* /web/static/tests/helpers/cleanup.js */
odoo.define('@web/../tests/helpers/cleanup',async function(require){'use strict';let __exports={};const cleanups=[];__exports.registerCleanup=registerCleanup;function registerCleanup(callback){cleanups.push(callback);}
if(window.QUnit){QUnit.on("OdooAfterTestHook",(info)=>{if(QUnit.config.debug){return;}
let cleanup;while((cleanup=cleanups.pop())){try{cleanup(info);}catch(error){console.error(error);}}});const validElements=[{tagName:"DIV",attr:"id",value:"qunit",keep:true},{tagName:"DIV",attr:"id",value:"qunit-fixture",keep:true},{tagName:"SCRIPT",attr:"id",value:""},{tagName:"DIV",attr:"class",value:"o_notification_manager"},{tagName:"DIV",attr:"class",value:"tooltip fade bs-tooltip-auto"},{tagName:"DIV",attr:"class",value:"tooltip fade bs-tooltip-auto show",},{tagName:"DIV",attr:"class",value:"tooltip tooltip-field-info fade bs-tooltip-auto",},{tagName:"DIV",attr:"class",value:"tooltip tooltip-field-info fade bs-tooltip-auto show",},{tagName:"SPAN",attr:"class",value:"select2-hidden-accessible"},{tagName:"DIV",attr:"class",value:"ui-helper-hidden-accessible"},{tagName:"UL",attr:"class",value:"ui-menu ui-widget ui-widget-content ui-autocomplete ui-front",},{tagName:"UL",attr:"class",value:"ui-menu ui-widget ui-widget-content ui-autocomplete dropdown-menu ui-front",},];QUnit.on("OdooAfterTestHook",function(info){if(QUnit.config.debug){return;}
const failed=info.testReport.getStatus()==="failed";const toRemove=[];for(const bodyChild of document.body.children){const tolerated=validElements.find((e)=>e.tagName===bodyChild.tagName&&bodyChild.getAttribute(e.attr)===e.value);if(!failed&&!tolerated){QUnit.pushFailure(`Body still contains undesirable elements:\n${bodyChild.outerHTML}`);}
if(!tolerated||!tolerated.keep){toRemove.push(bodyChild);}}
const qunitFixture=document.getElementById("qunit-fixture");if(qunitFixture.children.length){toRemove.push(...qunitFixture.children);}
for(const el of toRemove){el.remove();}
document.body.classList.remove("modal-open");});}
return __exports;});;

/* /web/static/tests/helpers/utils.js */
odoo.define('@web/../tests/helpers/utils',async function(require){'use strict';let __exports={};const{browser}=require("@web/core/browser/browser");const{isMacOS}=require("@web/core/browser/feature_detection");const{download}=require("@web/core/network/download");const{Deferred}=require("@web/core/utils/concurrency");const{patch,unpatch}=require("@web/core/utils/patch");const{isVisible}=require("@web/core/utils/ui");const{registerCleanup}=require("@web/../tests/helpers/cleanup");const{templates}=require("@web/core/assets");const{App,onMounted,onPatched,useComponent}=require("@odoo/owl");__exports.patchDate=patchDate;function patchDate(year,month,day,hours,minutes,seconds){var RealDate=window.Date;var actualDate=new RealDate();var fakeDate=new RealDate(year,month,day,hours,minutes,seconds);if(!(luxon.Settings.defaultZone instanceof luxon.FixedOffsetZone)){throw new Error("luxon.Settings.defaultZone must be a FixedOffsetZone");}
const browserOffset=-fakeDate.getTimezoneOffset();const patchedOffset=luxon.Settings.defaultZone.offset();const offsetDiff=patchedOffset-browserOffset;const correctedMinutes=fakeDate.getMinutes()-offsetDiff;fakeDate.setMinutes(correctedMinutes);var timeInterval=actualDate.getTime()-fakeDate.getTime();window.Date=(function(NativeDate){function Date(Y,M,D,h,m,s,ms){var length=arguments.length;let date;if(arguments.length>0){date=length==1&&String(Y)===Y?new NativeDate(Date.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,s,ms):length>=6?new NativeDate(Y,M,D,h,m,s):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y):new NativeDate();date.constructor=Date;return date;}else{date=new NativeDate();var time=date.getTime();time-=timeInterval;date.setTime(time);return date;}}
for(var key in NativeDate){Date[key]=NativeDate[key];}
Date.now=function(){var date=new NativeDate();var time=date.getTime();time-=timeInterval;return time;};Date.UTC=NativeDate.UTC;Date.prototype=NativeDate.prototype;Date.prototype.constructor=Date;Date.parse=NativeDate.parse;return Date;})(Date);registerCleanup(()=>{window.Date=RealDate;});}
__exports.patchTimeZone=patchTimeZone;function patchTimeZone(offset){const originalZone=luxon.Settings.defaultZone;luxon.Settings.defaultZone=new luxon.FixedOffsetZone.instance(offset);registerCleanup(()=>{luxon.Settings.defaultZone=originalZone;});}
let nextId=1;__exports.patchWithCleanup=patchWithCleanup;function patchWithCleanup(obj,patchValue,options){const patchName=`__test_patch_${nextId++}__`;patch(obj,patchName,patchValue,options);registerCleanup(()=>{unpatch(obj,patchName);});}
__exports.getFixture=getFixture;function getFixture(){if(!window.QUnit){return document;}
if(QUnit.config.debug){return document.body;}else{return document.querySelector("#qunit-fixture");}}
__exports.nextTick=nextTick;async function nextTick(){await new Promise((resolve)=>window.requestAnimationFrame(resolve));await new Promise((resolve)=>setTimeout(resolve));}
__exports.makeDeferred=makeDeferred;function makeDeferred(){return new Deferred();}
__exports.findElement=findElement;function findElement(el,selector){let target=el;if(selector){const els=el.querySelectorAll(selector);if(els.length===0){throw new Error(`No element found (selector: ${selector})`);}
if(els.length>1){throw new Error(`Found ${els.length} elements, instead of 1 (selector: ${selector})`);}
target=els[0];}
return target;}
function keyboardEventBubble(args){return Object.assign({},args,{bubbles:true,keyCode:args.which,cancelable:true,});}
function mouseEventMapping(args){return{clientX:args?args.pageX:undefined,clientY:args?args.pageY:undefined,...args,bubbles:true,cancelable:true,view:window,};}
function mouseEventNoBubble(args){return{clientX:args?args.pageX:undefined,clientY:args?args.pageY:undefined,...args,bubbles:false,cancelable:false,view:window,};}
function touchEventMapping(args){return{...args,cancelable:true,bubbles:true,composed:true,view:window,rotation:0.0,zoom:1.0,touches:args.touches?[...args.touches.map((e)=>new Touch(e))]:undefined,};}
function touchEventCancelMapping(args){return{...touchEventMapping(args),cancelable:false,};}
function noBubble(args){return Object.assign({},args,{bubbles:false});}
function onlyBubble(args){return Object.assign({},args,{bubbles:true});}
const EVENT_TYPES={auxclick:{constructor:MouseEvent,processParameters:mouseEventMapping},click:{constructor:MouseEvent,processParameters:mouseEventMapping},contextmenu:{constructor:MouseEvent,processParameters:mouseEventMapping,},dblclick:{constructor:MouseEvent,processParameters:mouseEventMapping},mousedown:{constructor:MouseEvent,processParameters:mouseEventMapping},mouseup:{constructor:MouseEvent,processParameters:mouseEventMapping},mousemove:{constructor:MouseEvent,processParameters:mouseEventMapping},mouseenter:{constructor:MouseEvent,processParameters:mouseEventNoBubble,},mouseleave:{constructor:MouseEvent,processParameters:mouseEventNoBubble,},mouseover:{constructor:MouseEvent,processParameters:mouseEventMapping},mouseout:{constructor:MouseEvent,processParameters:mouseEventMapping},focus:{constructor:FocusEvent,processParameters:noBubble},focusin:{constructor:FocusEvent,processParameters:onlyBubble},blur:{constructor:FocusEvent,processParameters:noBubble},cut:{constructor:ClipboardEvent,processParameters:onlyBubble},copy:{constructor:ClipboardEvent,processParameters:onlyBubble},paste:{constructor:ClipboardEvent,processParameters:onlyBubble},keydown:{constructor:KeyboardEvent,processParameters:keyboardEventBubble,},keypress:{constructor:KeyboardEvent,processParameters:keyboardEventBubble,},keyup:{constructor:KeyboardEvent,processParameters:keyboardEventBubble},drag:{constructor:DragEvent,processParameters:onlyBubble},dragend:{constructor:DragEvent,processParameters:onlyBubble},dragenter:{constructor:DragEvent,processParameters:onlyBubble},dragstart:{constructor:DragEvent,processParameters:onlyBubble},dragleave:{constructor:DragEvent,processParameters:onlyBubble},dragover:{constructor:DragEvent,processParameters:onlyBubble},drop:{constructor:DragEvent,processParameters:onlyBubble},input:{constructor:InputEvent,processParameters:onlyBubble},compositionstart:{constructor:CompositionEvent,processParameters:onlyBubble,},compositionend:{constructor:CompositionEvent,processParameters:onlyBubble,},};if(typeof TouchEvent==="function"){Object.assign(EVENT_TYPES,{touchstart:{constructor:TouchEvent,processParameters:touchEventMapping,},touchend:{constructor:TouchEvent,processParameters:touchEventMapping},touchmove:{constructor:TouchEvent,processParameters:touchEventMapping,},touchcancel:{constructor:TouchEvent,processParameters:touchEventCancelMapping,},});}
function _makeEvent(eventType,eventAttrs){let event;if(eventType in EVENT_TYPES){const{constructor,processParameters}=EVENT_TYPES[eventType];event=new constructor(eventType,processParameters(eventAttrs));}else{event=new Event(eventType,Object.assign({},eventAttrs,{bubbles:true}));}
return event;}
__exports.triggerEvent=triggerEvent;function triggerEvent(el,selector,eventType,eventAttrs={},options={}){const event=_makeEvent(eventType,eventAttrs);const target=findElement(el,selector);if(!target){throw new Error(`Can't find a target to trigger ${eventType} event`);}
if(!options.skipVisibilityCheck){if(!isVisible(target)){throw new Error(`Called triggerEvent ${eventType} on invisible target`);}}
target.dispatchEvent(event);if(!options.fast){return nextTick().then(()=>event);}
return event;}
__exports.triggerEvents=triggerEvents;async function triggerEvents(el,querySelector,events,options){for(let e=0;e<events.length;e++){if(Array.isArray(events[e])){triggerEvent(el,querySelector,events[e][0],events[e][1],options);}else{triggerEvent(el,querySelector,events[e],{},options);}}
await nextTick();}
__exports.triggerScroll=triggerScroll;async function triggerScroll(target,coordinates={left:null,top:null},canPropagate=true){const isScrollable=(target.scrollHeight>target.clientHeight&&target.clientHeight>0)||(target.scrollWidth>target.clientWidth&&target.clientWidth>0);if(!isScrollable&&!canPropagate){return;}
if(isScrollable){const canScrollFrom={left:coordinates.left>target.scrollLeft?target.scrollLeft+target.clientWidth<target.scrollWidth:target.scrollLeft>0,top:coordinates.top>target.scrollTop?target.scrollTop+target.clientHeight<target.scrollHeight:target.scrollTop>0,};const scrollCoordinates={};Object.entries(coordinates).forEach(([key,value])=>{if(value!==null&&canScrollFrom[key]){scrollCoordinates[key]=value;delete coordinates[key];}});target.scrollTo(scrollCoordinates);target.dispatchEvent(new UIEvent("scroll"));await nextTick();if(!canPropagate||!Object.entries(coordinates).length){return;}}
target.parentElement?triggerScroll(target.parentElement,coordinates):window.dispatchEvent(new UIEvent("scroll"));await nextTick();}
__exports.click=click;function click(el,selector,skipVisibilityCheck=false){return triggerEvent(el,selector,"click",{bubbles:true,cancelable:true},{skipVisibilityCheck});}
__exports.clickCreate=clickCreate;function clickCreate(htmlElement){if(htmlElement.querySelectorAll(".o_form_button_create").length){return click(htmlElement,".o_form_button_create");}else if(htmlElement.querySelectorAll(".o_list_button_create").length){return click(htmlElement,".o_list_button_create");}else{throw new Error("No edit button found to be clicked.");}}
__exports.clickEdit=clickEdit;function clickEdit(htmlElement){if(htmlElement.querySelectorAll(".o_list_button_edit").length){return click(htmlElement,".o_list_button_edit");}else{throw new Error("No edit button found to be clicked.");}}
__exports.clickSave=clickSave;async function clickSave(htmlElement){if(htmlElement.querySelectorAll(".o_form_status_indicator").length){await mouseEnter(htmlElement,".o_form_status_indicator");}
if(htmlElement.querySelectorAll(".o_form_button_save").length){return click(htmlElement,".o_form_button_save");}else if(htmlElement.querySelectorAll(".o_list_button_save").length){return click(htmlElement,".o_list_button_save");}else{throw new Error("No save button found to be clicked.");}}
__exports.clickDiscard=clickDiscard;async function clickDiscard(htmlElement){if(htmlElement.querySelectorAll(".o_form_status_indicator").length){await mouseEnter(htmlElement,".o_form_status_indicator");}
if(htmlElement.querySelectorAll(".o_form_button_cancel").length){return click(htmlElement,".o_form_button_cancel");}else if(htmlElement.querySelectorAll(".o_list_button_discard").length){return click(htmlElement,".o_list_button_discard");}else{throw new Error("No discard button found to be clicked.");}}
__exports.mouseEnter=mouseEnter;async function mouseEnter(el,selector,coordinates){const target=el.querySelector(selector)||el;const atPos=coordinates||{clientX:target.getBoundingClientRect().left+target.getBoundingClientRect().width/2,clientY:target.getBoundingClientRect().top+target.getBoundingClientRect().height/2,};return triggerEvent(target,null,"mouseenter",atPos);}
__exports.editInput=editInput;async function editInput(el,selector,value){const input=findElement(el,selector);if(!(input instanceof HTMLInputElement||input instanceof HTMLTextAreaElement)){throw new Error("Only 'input' and 'textarea' elements can be edited with 'editInput'.");}
if(!["text","textarea","email","search","color","number","file","tel"].includes(input.type)){throw new Error(`Type "${input.type}" not supported by 'editInput'.`);}
const eventOpts={};if(input.type==="file"){const files=Array.isArray(value)?value:[value];const dataTransfer=new DataTransfer();for(const file of files){if(!(file instanceof File)){throw new Error(`File input value should be one or several File objects.`);}
dataTransfer.items.add(file);}
input.files=dataTransfer.files;eventOpts.skipVisibilityCheck=true;}else{input.value=value;}
await triggerEvents(input,null,["input","change"],eventOpts);if(input.type==="file"){await nextTick();await nextTick();}}
__exports.editSelect=editSelect;function editSelect(el,selector,value){const select=findElement(el,selector);if(select.tagName!=="SELECT"){throw new Error("Only select tag can be edited with selectInput.");}
select.value=value;return triggerEvent(select,null,"change");}
__exports.triggerHotkey=triggerHotkey;function triggerHotkey(hotkey,addOverlayModParts=false,eventAttrs={}){eventAttrs.key=hotkey.split("+").pop();if(/shift/i.test(hotkey)){eventAttrs.shiftKey=true;}
if(/control/i.test(hotkey)){if(isMacOS()){eventAttrs.metaKey=true;}else{eventAttrs.ctrlKey=true;}}
if(/alt/i.test(hotkey)||addOverlayModParts){if(isMacOS()){eventAttrs.ctrlKey=true;}else{eventAttrs.altKey=true;}}
if(!("bubbles"in eventAttrs)){eventAttrs.bubbles=true;}
const keydownEvent=new KeyboardEvent("keydown",eventAttrs);const keyupEvent=new KeyboardEvent("keyup",eventAttrs);document.activeElement.dispatchEvent(keydownEvent);document.activeElement.dispatchEvent(keyupEvent);return{keydownEvent,keyupEvent};}
__exports.legacyExtraNextTick=legacyExtraNextTick;async function legacyExtraNextTick(){return nextTick();}
__exports.mockDownload=mockDownload;function mockDownload(cb){patchWithCleanup(download,{_download:cb});}
const hushConsole=__exports.hushConsole=Object.create(null);for(const propName of Object.keys(window.console)){hushConsole[propName]=()=>{};}
__exports.mockSendBeacon=mockSendBeacon;function mockSendBeacon(mock){patchWithCleanup(navigator,{sendBeacon:(url,blob)=>{return mock(url,blob)!==false;},});}
__exports.mockTimeout=mockTimeout;function mockTimeout(){const timeouts=new Map();let currentTime=0;let id=1;patchWithCleanup(browser,{setTimeout(fn,delay=0){timeouts.set(id,{fn,scheduledFor:delay+currentTime,id});return id++;},clearTimeout(id){timeouts.delete(id);},});return{execRegisteredTimeouts(){for(const{fn}of timeouts.values()){fn();}
timeouts.clear();},async advanceTime(duration){await nextTick();currentTime+=duration;for(const{fn,scheduledFor,id}of timeouts.values()){if(scheduledFor<=currentTime){fn();timeouts.delete(id);}}
await nextTick();},};}
__exports.mockAnimationFrame=mockAnimationFrame;function mockAnimationFrame(){const callbacks=new Map();let id=1;patchWithCleanup(browser,{requestAnimationFrame(fn){callbacks.set(id,fn);return id++;},cancelAnimationFrame(id){callbacks.delete(id);},});return function execRegisteredCallbacks(){for(const fn of callbacks.values()){fn();}
callbacks.clear();};}
__exports.mount=mount;async function mount(Comp,target,config={}){let{props,env}=config;env=env||{};const configuration={env,templates,test:true,props,};if(env.services&&"localization"in env.services){configuration.translateFn=env._t;}
const app=new App(Comp,configuration);registerCleanup(()=>app.destroy());return app.mount(target);}
__exports.destroy=destroy;function destroy(comp){comp.__owl__.app.destroy();}
__exports.findChildren=findChildren;function findChildren(comp,predicate=(e)=>e){const queue=[];[].unshift.apply(queue,Object.values(comp.__owl__.children));while(queue.length>0){const curNode=queue.pop();if(predicate(curNode)){return curNode;}
[].unshift.apply(queue,Object.values(curNode.component.__owl__.children));}}
__exports.useChild=useChild;function useChild(){const node=useComponent().__owl__;const setChild=()=>{const componentNode=Object.values(node.children)[0];node.component.child=componentNode.component;};onMounted(setChild);onPatched(setChild);}
const lifeCycleHooks=["onError","onMounted","onPatched","onRendered","onWillDestroy","onWillPatch","onWillRender","onWillStart","onWillUnmount","onWillUpdateProps",];__exports.useLogLifeCycle=useLogLifeCycle;function useLogLifeCycle(logFn,name=""){const component=owl.useComponent();let loggedName=`${component.constructor.name}`;if(name){loggedName=`${component.constructor.name} ${name}`;}
for(const hook of lifeCycleHooks){owl[hook](()=>{logFn(`${hook} ${loggedName}`);});}}
function getDifferentParents(n1,n2){const parents=[n2];while(parents[0].parentNode){const parent=parents[0].parentNode;if(parent.contains(n1)){break;}
parents.unshift(parent);}
return parents;}
__exports.dragAndDrop=dragAndDrop;async function dragAndDrop(from,to,position){const dropFunction=drag(from,to,position);await dropFunction();}
__exports.drag=drag;function drag(from,to,position){const fixture=getFixture();from=from instanceof Element?from:fixture.querySelector(from);to=to instanceof Element?to:fixture.querySelector(to);const fromRect=from.getBoundingClientRect();const toRect=to.getBoundingClientRect();triggerEvent(from,null,"mousedown",{clientX:fromRect.x+fromRect.width/2,clientY:fromRect.y+fromRect.height/2,});const toPos={clientX:toRect.x+toRect.width/2,clientY:toRect.y+toRect.height/2,};if(position&&typeof position==="object"){toPos.clientX+=position.x||0;toPos.clientY+=position.y||0;}else{switch(position){case"top":{toPos.clientY=toRect.y-1;break;}
case"bottom":{toPos.clientY=toRect.y+toRect.height+1;break;}
case"left":{toPos.clientX=toRect.x-1;break;}
case"right":{toPos.clientX=toRect.x+toRect.width+1;break;}}}
triggerEvent(window,null,"mousemove",toPos);for(const target of getDifferentParents(from,to)){triggerEvent(target,null,"mouseenter",toPos);}
return function(){return drop(from,toPos);};}
function drop(from,toPos){return triggerEvent(from,null,"mouseup",toPos);}
__exports.clickDropdown=clickDropdown;async function clickDropdown(target,fieldName){const dropdownInput=target.querySelector(`[name='${fieldName}'] .dropdown input`);dropdownInput.focus();await nextTick();await click(dropdownInput);}
__exports.clickOpenedDropdownItem=clickOpenedDropdownItem;async function clickOpenedDropdownItem(target,fieldName,itemContent){const dropdowns=target.querySelectorAll(`[name='${fieldName}'] .dropdown .dropdown-menu`);if(dropdowns.length===0){throw new Error(`No dropdown found for field ${fieldName}`);}else if(dropdowns.length>1){throw new Error(`Found ${dropdowns.length} dropdowns for field ${fieldName}`);}
const dropdownItems=dropdowns[0].querySelectorAll("li");const indexToClick=Array.from(dropdownItems).map((html)=>html.textContent).indexOf(itemContent);if(indexToClick===-1){throw new Error(`The element '${itemContent}' does not exist in the dropdown`);}
await click(dropdownItems[indexToClick],null,"click");}
__exports.selectDropdownItem=selectDropdownItem;async function selectDropdownItem(target,fieldName,itemContent){await clickDropdown(target,fieldName);await clickOpenedDropdownItem(target,fieldName,itemContent);}
__exports.getNodesTextContent=getNodesTextContent;function getNodesTextContent(nodes){return Array.from(nodes).map((n)=>n.textContent);}
__exports.clickOpenM2ODropdown=clickOpenM2ODropdown;async function clickOpenM2ODropdown(el,fieldName,selector){const m2oSelector=`${selector || ""} .o_field_many2one[name=${fieldName}] input`;const matches=el.querySelectorAll(m2oSelector);if(matches.length!==1){throw new Error(`cannot open m2o: selector ${selector} has been found ${matches.length} instead of 1`);}
await click(matches[0]);return matches[0];}
__exports.clickM2OHighlightedItem=clickM2OHighlightedItem;async function clickM2OHighlightedItem(el,fieldName,selector){const m2oSelector=`${selector || ""} .o_field_many2one[name=${fieldName}] input`;const matches=el.querySelectorAll(m2oSelector);if(matches.length!==1){throw new Error(`cannot open m2o: selector ${selector} has been found ${matches.length} instead of 1`);}
return click(matches[0].parentElement.querySelector("li"));}
__exports.addRow=addRow;async function addRow(target,selector){await click(target.querySelector(`${selector ? selector : ""} .o_field_x2many_list_row_add a`));}
__exports.removeRow=removeRow;async function removeRow(target,index){await click(target.querySelectorAll(".o_list_record_remove")[index]);}
return __exports;});;

/* /web/static/tests/utils.js */
odoo.define('@web/../tests/utils',async function(require){'use strict';let __exports={};const{isVisible}=require("@web/core/utils/ui");const{registerCleanup}=require("@web/../tests/helpers/cleanup");const{click:webClick,getFixture,makeDeferred,triggerEvents:webTriggerEvents,}=require("@web/../tests/helpers/utils");__exports.createFile=createFile;function createFile(data){return new Promise(function(resolve,reject){var requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;if(!requestFileSystem){throw new Error("FileSystem API is not supported");}
requestFileSystem(window.TEMPORARY,1024*1024,function(fileSystem){fileSystem.root.getFile(data.name,{create:true},function(fileEntry){fileEntry.createWriter(function(fileWriter){fileWriter.onwriteend=function(e){fileSystem.root.getFile(data.name,{},function(fileEntry){fileEntry.file(function(file){resolve(file);});});};fileWriter.write(new Blob([data.content],{type:data.contentType}));});});});});}
function createFakeDataTransfer(files){return{dropEffect:"all",effectAllowed:"all",files,items:[],types:["Files"],};}
__exports.click=click;async function click(selector,options={}){const{shiftKey}=options;delete options.shiftKey;await contains(selector,{click:{shiftKey},...options});}
__exports.dragenterFiles=dragenterFiles;async function dragenterFiles(selector,files,options){await contains(selector,{dragenterFiles:files,...options});}
__exports.dragoverFiles=dragoverFiles;async function dragoverFiles(selector,files,options){await contains(selector,{dragoverFiles:files,...options});}
__exports.dropFiles=dropFiles;async function dropFiles(selector,files,options){await contains(selector,{dropFiles:files,...options});}
__exports.inputFiles=inputFiles;async function inputFiles(selector,files,options){await contains(selector,{inputFiles:files,...options});}
__exports.pasteFiles=pasteFiles;async function pasteFiles(selector,files,options){await contains(selector,{pasteFiles:files,...options});}
__exports.focus=focus;async function focus(selector,options){await contains(selector,{setFocus:true,...options});}
__exports.insertText=insertText;async function insertText(selector,content,options={}){const{replace=false}=options;delete options.replace;await contains(selector,{...options,insertText:{content,replace}});}
__exports.scroll=scroll;async function scroll(selector,scrollTop,options){await contains(selector,{setScroll:scrollTop,...options});}
__exports.triggerEvents=triggerEvents;async function triggerEvents(selector,events,options){await contains(selector,{triggerEvents:events,...options});}
function log(ok,message){if(window.QUnit){QUnit.assert.ok(ok,message);}else{if(ok){console.log(message);}else{console.error(message);}}}
let hasUsedContainsPositively=false;if(window.QUnit){QUnit.testStart(()=>(hasUsedContainsPositively=false));}
class Contains{constructor(selector,options={}){this.selector=selector;this.options=options;this.options.count=this.options.count===undefined?1:this.options.count;this.options.targetParam=this.options.target;this.options.target=this.options.target===undefined?getFixture():this.options.target;let selectorMessage=`${this.options.count} of "${this.selector}"`;if(this.options.visible!==undefined){selectorMessage=`${selectorMessage} ${
                this.options.visible ? "visible" : "invisible"
            }`;}
if(this.options.targetParam){selectorMessage=`${selectorMessage} inside a specific target`;}
if(this.options.parent){selectorMessage=`${selectorMessage} inside a specific parent`;}
if(this.options.contains){selectorMessage=`${selectorMessage} with a specified sub-contains`;}
if(this.options.text!==undefined){selectorMessage=`${selectorMessage} with text "${this.options.text}"`;}
if(this.options.textContent!==undefined){selectorMessage=`${selectorMessage} with textContent "${this.options.textContent}"`;}
if(this.options.value!==undefined){selectorMessage=`${selectorMessage} with value "${this.options.value}"`;}
if(this.options.scroll!==undefined){selectorMessage=`${selectorMessage} with scroll "${this.options.scroll}"`;}
if(this.options.after!==undefined){selectorMessage=`${selectorMessage} after a specified element`;}
if(this.options.before!==undefined){selectorMessage=`${selectorMessage} before a specified element`;}
this.selectorMessage=selectorMessage;if(this.options.contains&&!Array.isArray(this.options.contains[0])){this.options.contains=[this.options.contains];}
if(this.options.count){hasUsedContainsPositively=true;}else if(!hasUsedContainsPositively){throw new Error(`Starting a test with "contains" of count 0 for selector "${this.selector}" is useless because it might immediately resolve. Start the test by checking that an expected element actually exists.`);}
this.successMessage=undefined;this.executeError=undefined;}
run(){this.done=false;this.def=makeDeferred();this.scrollListeners=new Set();this.onScroll=()=>this.runOnce("after scroll");if(!this.runOnce("immediately")){this.timer=setTimeout(()=>this.runOnce("Timeout of 5 seconds",{crashOnFail:true}),5000);this.observer=new MutationObserver((mutations)=>{try{this.runOnce("after mutations");}catch(e){this.def.reject(e);}});this.observer.observe(document.body,{attributes:true,childList:true,subtree:true,});registerCleanup(()=>{if(!this.done){this.runOnce("Test ended",{crashOnFail:true});}});}
return this.def;}
runOnce(whenMessage,{crashOnFail=false,executeOnSuccess=true}={}){const res=this.select();if((res&&res.length===this.options.count)||crashOnFail){if(this.observer){this.observer.disconnect();}
clearTimeout(this.timer);for(const el of this.scrollListeners||[]){el.removeEventListener("scroll",this.onScroll);}
this.done=true;}
if(res&&res.length===this.options.count){this.successMessage=`Found ${this.selectorMessage} (${whenMessage})`;if(executeOnSuccess){this.executeAction(res[0]);}
return res;}else{this.executeError=()=>{let message=`Failed to find ${this.selectorMessage} (${whenMessage}).`;message=res?`${message} Found ${res.length} instead.`:`${message} Parent not found.`;if(this.parentContains){if(this.parentContains.successMessage){log(true,this.parentContains.successMessage);}else{this.parentContains.executeError();}}
log(false,message);if(this.def){this.def.reject(new Error(message));}
for(const childContains of this.childrenContains||[]){if(childContains.successMessage){log(true,childContains.successMessage);}else{childContains.executeError();}}};if(crashOnFail){this.executeError();}}}
executeAction(el){let message=this.successMessage;if(this.options.click){message=`${message} and clicked it`;webClick(el,undefined,{mouseEventInit:this.options.click,skipDisabledCheck:true,skipVisibilityCheck:true,});}
if(this.options.dragenterFiles){message=`${message} and dragentered ${this.options.dragenterFiles.length} file(s)`;const ev=new Event("dragenter",{bubbles:true});Object.defineProperty(ev,"dataTransfer",{value:createFakeDataTransfer(this.options.dragenterFiles),});el.dispatchEvent(ev);}
if(this.options.dragoverFiles){message=`${message} and dragovered ${this.options.dragoverFiles.length} file(s)`;const ev=new Event("dragover",{bubbles:true});Object.defineProperty(ev,"dataTransfer",{value:createFakeDataTransfer(this.options.dragoverFiles),});el.dispatchEvent(ev);}
if(this.options.dropFiles){message=`${message} and dropped ${this.options.dropFiles.length} file(s)`;const ev=new Event("drop",{bubbles:true});Object.defineProperty(ev,"dataTransfer",{value:createFakeDataTransfer(this.options.dropFiles),});el.dispatchEvent(ev);}
if(this.options.inputFiles){message=`${message} and inputted ${this.options.inputFiles.length} file(s)`;const dataTransfer=new window.DataTransfer();for(const file of this.options.inputFiles){dataTransfer.items.add(file);}
el.files=dataTransfer.files;const versionRaw=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);const chromeVersion=versionRaw?parseInt(versionRaw[2],10):false;if(!chromeVersion||chromeVersion>=73){el.dispatchEvent(new Event("change"));}}
if(this.options.insertText!==undefined){message=`${message} and inserted text "${this.options.insertText.content}" (replace: ${this.options.insertText.replace})`;el.focus();if(this.options.insertText.replace){el.value="";el.dispatchEvent(new window.KeyboardEvent("keydown",{key:"Backspace"}));el.dispatchEvent(new window.KeyboardEvent("keyup",{key:"Backspace"}));el.dispatchEvent(new window.InputEvent("input"));}
for(const char of this.options.insertText.content){el.value+=char;el.dispatchEvent(new window.KeyboardEvent("keydown",{key:char}));el.dispatchEvent(new window.KeyboardEvent("keyup",{key:char}));el.dispatchEvent(new window.InputEvent("input"));}}
if(this.options.pasteFiles){message=`${message} and pasted ${this.options.pasteFiles.length} file(s)`;const ev=new Event("paste",{bubbles:true});Object.defineProperty(ev,"clipboardData",{value:createFakeDataTransfer(this.options.pasteFiles),});el.dispatchEvent(ev);}
if(this.options.setFocus){message=`${message} and focused it`;el.focus();}
if(this.options.setScroll!==undefined){message=`${message} and set scroll to "${this.options.setScroll}"`;el.scrollTop=this.options.setScroll==="bottom"?el.scrollHeight:this.options.setScroll;}
if(this.options.triggerEvents){message=`${message} and triggered "${this.options.triggerEvents.join(", ")}" events`;webTriggerEvents(el,null,this.options.triggerEvents,{skipVisibilityCheck:true,});}
if(this.parentContains){log(true,this.parentContains.successMessage);}
log(true,message);for(const childContains of this.childrenContains){log(true,childContains.successMessage);}
if(this.def){this.def.resolve();}}
select(){const target=this.selectParent();if(!target){return;}
const baseRes=[...target.querySelectorAll(this.selector)];this.childrenContains=[];const res=baseRes.filter((el,currentIndex)=>{let condition=(this.options.textContent===undefined||el.textContent.trim()===this.options.textContent)&&(this.options.value===undefined||el.value===this.options.value)&&(this.options.scroll===undefined||(this.options.scroll==="bottom"?Math.abs(el.scrollHeight-el.clientHeight-el.scrollTop)<=1:Math.abs(el.scrollTop-this.options.scroll)<=1));if(condition&&this.options.text!==undefined){if(el.textContent.trim()!==this.options.text&&[...el.querySelectorAll("*")].every((el)=>el.textContent.trim()!==this.options.text)){condition=false;}}
if(condition&&this.options.contains){for(const param of this.options.contains){const childContains=new Contains(param[0],{...param[1],target:el,});if(!childContains.runOnce(`as child of el ${currentIndex + 1})`,{executeOnSuccess:false,})){condition=false;}
this.childrenContains.push(childContains);}}
if(condition&&this.options.visible!==undefined){if(isVisible(el)!==this.options.visible){condition=false;}}
if(condition&&this.options.after){const afterContains=new Contains(this.options.after[0],{...this.options.after[1],target,});const afterEl=afterContains.runOnce(`as "after"`,{executeOnSuccess:false,});if(!afterEl||!afterEl[0]||!(el.compareDocumentPosition(afterEl[0])&Node.DOCUMENT_POSITION_PRECEDING)){condition=false;}
this.childrenContains.push(afterContains);}
if(condition&&this.options.before){const beforeContains=new Contains(this.options.before[0],{...this.options.before[1],target,});const beforeEl=beforeContains.runOnce(`as "before"`,{executeOnSuccess:false,});if(!beforeEl||!beforeEl[0]||!(el.compareDocumentPosition(beforeEl[0])&Node.DOCUMENT_POSITION_FOLLOWING)){condition=false;}
this.childrenContains.push(beforeContains);}
return condition;});if(this.options.scroll!==undefined&&this.scrollListeners&&baseRes.length===this.options.count&&res.length!==this.options.count){for(const el of baseRes){if(!this.scrollListeners.has(el)){this.scrollListeners.add(el);el.addEventListener("scroll",this.onScroll);}}}
return res;}
selectParent(){if(this.options.parent){this.parentContains=new Contains(this.options.parent[0],{...this.options.parent[1],target:this.options.target,});const res=this.parentContains.runOnce(`as parent`,{executeOnSuccess:false,});return res&&res[0];}
return this.options.target;}}
__exports.contains=contains;async function contains(selector,options){await new Contains(selector,options).run();}
return __exports;});;

/* /mail/static/tests/tours/discuss_public_tour.js */
odoo.define('@mail/../tests/tours/discuss_public_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('mail/static/tests/tours/discuss_public_tour.js',{test:true,},[{trigger:'.o_DiscussPublicView',extraTrigger:'.o_ThreadView',},{content:"Check that we are on channel page",trigger:'.o_ThreadView',run(){if(!window.location.pathname.startsWith('/discuss/channel')){console.error('Did not automatically redirect to channel page');}
odoo.__DEBUG__.didLogInfo.then(()=>{const{missing,failed,unloaded}=odoo.__DEBUG__.jsModules;if([missing,failed,unloaded].some(arr=>arr.length)){console.error("Couldn't load all JS modules.",JSON.stringify({missing,failed,unloaded}));}
document.body.classList.add('o_mail_channel_public_modules_loaded');});},extraTrigger:'.o_mail_channel_public_modules_loaded',},{content:"Wait for all modules loaded check in previous step",trigger:'.o_mail_channel_public_modules_loaded',}]);return __exports;});;

/* /mail/static/tests/tours/mail_channel_as_guest_tour.js */
odoo.define('@mail/../tests/tours/mail_channel_as_guest_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('mail/static/tests/tours/mail_channel_as_guest_tour.js',{test:true,},[{content:"Click join",trigger:'.o_WelcomeView_joinButton',extraTrigger:'.o_ThreadView',},{content:"Check that we are on channel page",trigger:'.o_ThreadView',run(){if(!window.location.pathname.startsWith('/discuss/channel')){console.error('Clicking on join button did not redirect to channel page');}
odoo.__DEBUG__.didLogInfo.then(()=>{const{missing,failed,unloaded}=odoo.__DEBUG__.jsModules;if([missing,failed,unloaded].some(arr=>arr.length)){console.error("Couldn't load all JS modules.",JSON.stringify({missing,failed,unloaded}));}
document.body.classList.add('o_mail_channel_as_guest_tour_modules_loaded');});},extraTrigger:'.o_mail_channel_as_guest_tour_modules_loaded',},{content:"Wait for all modules loaded check in previous step",trigger:'.o_mail_channel_as_guest_tour_modules_loaded',}]);return __exports;});;

/* /mail/static/tests/tours/mail_full_composer_test_tour.js */
odoo.define('@mail/../tests/tours/mail_full_composer_test_tour',async function(require){'use strict';let __exports={};const{createFile,inputFiles,}=require('web.test_utils_file');const{contains}=require('@web/../tests/utils');const tour=require('web_tour.tour');tour.register('mail/static/tests/tours/mail_full_composer_test_tour.js',{test:true,},[{content:"Wait for the chatter to be fully loaded",trigger:".o_Chatter",async run(){await contains(".o_Message",{count:1});document.body.setAttribute("data-found-message",1);},},{content:"Click on Send Message",trigger:'.o_ChatterTopbar_buttonSendMessage',extra_trigger:'body[data-found-message=1]',},{content:"Write something in composer",trigger:'.o_ComposerTextInput_textarea',run:'text blahblah',},{content:"Add one file in composer",trigger:'.o_Composer_buttonAttachment',async run(){const file=await createFile({content:'hello, world',contentType:'text/plain',name:'text.txt',});const messaging=await odoo.__DEBUG__.messaging;const uploader=messaging.models['ComposerView'].all()[0].fileUploader;inputFiles(uploader.fileInput,[file]);},},{content:"Open full composer",trigger:'.o_Composer_buttonFullComposer',extra_trigger:'.o_AttachmentCard:not(.o-isUploading)'},{content:"Check the earlier provided attachment is listed",trigger:'.o_AttachmentCard[title="text.txt"]',run(){},},{content:"Check subject is autofilled",trigger:'[name="subject"] input',run(){const subjectValue=document.querySelector('[name="subject"] input').value;if(subjectValue!=="Re: Jane"){console.error(`Full composer should have "Re: Jane" in subject input (actual: ${subjectValue})`);}},},{content:"Check composer content is kept",trigger:'.o_field_html[name="body"]',run(){const bodyContent=document.querySelector('.o_field_html[name="body"]').textContent;if(!bodyContent.includes("blahblah")){console.error(`Full composer should contain text from small composer ("blahblah") in body input (actual: ${bodyContent})`);}},},{content:"Open templates",trigger:'.o_field_widget[name="template_id"] input',},{content:"Check a template is listed",in_modal:false,trigger:'.ui-autocomplete .ui-menu-item a:contains("Test template")',run(){},},{content:"Send message",trigger:'.o_mail_send',},{content:"Check message is shown",trigger:'.o_Message:contains("blahblah")',},{content:"Check message contains the attachment",trigger:'.o_Message .o_AttachmentCard_filename:contains("text.txt")',}]);return __exports;});;

/* /mail/static/tests/tours/user_modify_own_profile_tour.js */
odoo.define('@mail/../tests/tours/user_modify_own_profile_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('mail/static/tests/tours/user_modify_own_profile_tour.js',{test:true,},[{content:'Open user account menu',trigger:'.o_user_menu button',},{content:"Open preferences / profile screen",trigger:'[data-menu=settings]',},{content:"Update the email address",trigger:'div[name="email"] input',run:'text updatedemail@example.com',},{content:"Save the form",trigger:'button[name="preference_save"]',},{content:"Wait until the modal is closed",trigger:'body:not(.modal-open)',}]);return __exports;});;

/* /portal/static/tests/tours/portal.js */
odoo.define('portal.tour',function(require){'use strict';var tour=require("web_tour.tour");tour.register('portal_load_homepage',{test:true,url:'/my',},[{content:"Check portal is loaded",trigger:'a[href*="/my/account"]:contains("Edit"):first',},{content:"Load my account details",trigger:'input[value="Joel Willis"]'}]);});;

/* /account/static/tests/tours/account_dashboard_setup_bar_tests.js */
odoo.define('account.dashboard.setup.tour',function(require){"use strict";var core=require('web.core');var tour=require('web_tour.tour');var _t=core._t;tour.register('account_render_report',{test:true,url:'/web',},[tour.stepUtils.showAppsMenuItem(),{id:'account_menu_click',trigger:'.o_app[data-menu-xmlid="account.menu_finance"]',position:'bottom',},{trigger:'.o_data_row:first .o_data_cell',extra_trigger:'.breadcrumb',},{trigger:'.o_control_panel button:contains("'+_t('Print')+'")',},{trigger:'.o_control_panel .o-dropdown--menu span:contains("'+_t('Invoices without Payment')+'")',},{trigger:'iframe .o_report_layout_standard h2',content:'Primary color is correct',run:function(){if(this.$anchor.css('color')!=="rgb(18, 52, 86)"){console.error('The primary color should be the one set on the company.');}},},{trigger:'iframe .o_report_layout_standard #informations div strong',content:'Secondary color is correct',run:function(){if(this.$anchor.css('color')!=="rgb(120, 145, 1)"){console.error('The secondary color should be the one set on the company.');}},}]);});;

/* /account/static/tests/tours/tax_group_tests.js */
odoo.define('@account/../tests/tours/tax_group_tests',async function(require){'use strict';let __exports={};"use strict";const tour=require('web_tour.tour');tour.register('account_tax_group',{test:true,url:"/web",},[tour.stepUtils.showAppsMenuItem(),{id:'account_menu_click',content:"Go to Invoicing",trigger:'.o_app[data-menu-xmlid="account.menu_finance"]',},{content:"Go to Vendors",trigger:'span:contains("Vendors")',},{content:"Go to Bills",trigger:'a:contains("Bills")',},{extra_trigger:'.breadcrumb:contains("Bills")',content:"Create new bill",trigger:'.o_list_button_add',},{content:"Add vendor",trigger:'div.o_field_widget.o_field_res_partner_many2one[name="partner_id"] div input',run:'text Account Tax Group Partner',},{content:"Valid vendor",trigger:'.ui-menu-item a:contains("Account Tax Group Partner")',},{content:"Add items",trigger:'div[name="invoice_line_ids"] .o_field_x2many_list_row_add a:contains("Add a line")',},{content:"Select input",trigger:'div[name="invoice_line_ids"] .o_selected_row .o_list_many2one[name="product_id"] input',},{content:"Type item",trigger:'div[name="invoice_line_ids"] .o_selected_row .o_list_many2one[name="product_id"] input',run:"text Account Tax Group Product",},{content:"Valid item",trigger:'.ui-menu-item-wrapper:contains("Account Tax Group Product")',},{content:"Save the account move",trigger:'.o_form_button_save',},...tour.stepUtils.saveForm(),{content:"Edit tax group amount",trigger:'.o_tax_group_edit',},{content:"Modify the input value",trigger:'.o_tax_group_edit_input input',run:function(actions){$('.o_tax_group_edit_input input').val(200);$('.o_tax_group_edit_input input').select();$('.o_tax_group_edit_input input').blur();},},{content:"Valid total amount",trigger:'span[name="amount_total"]:contains("800")',},{content:"Select item quantity",trigger:'div[name="invoice_line_ids"] tbody tr.o_data_row .o_list_number[name="quantity"]',},{content:"Change item quantity",trigger:'div[name="invoice_line_ids"] tbody tr.o_data_row .o_list_number[name="quantity"] input',run:'text 2',},{content:"Valid the new value",trigger:'div[name="invoice_line_ids"] tbody tr.o_data_row .o_list_number[name="quantity"] input',run:function(actions){let keydownEvent=jQuery.Event('keydown');keydownEvent.which=13;this.$anchor.trigger(keydownEvent);},},{content:"Save the account move",trigger:'.o_form_button_save',},...tour.stepUtils.saveForm(),{content:"Check new value of tax group",trigger:'.o_tax_group_amount_value:contains("120")',},{content:"Edit tax value",trigger:'.o_tax_group_edit_input input',run:'text 2'},{content:"Check new value of total",trigger:'.oe_subtotal_footer_separator:contains("1,202")',},{content:"Discard changes",trigger:'.o_form_button_cancel',},{content:"Check tax value is reset",trigger:'.o_tax_group_amount_value:contains("120")',},]);return __exports;});odoo.define(`account.tax.group.tour.tests`,async function(require){return require('@account/../tests/tours/tax_group_tests')[Symbol.for("default")];});;

/* /sale/static/tests/tours/sale_signature.js */
odoo.define('sale.tour_sale_signature',function(require){'use strict';var tour=require('web_tour.tour');tour.register('sale_signature',{test:true,url:'/my/quotes',},[{content:"open the test SO",trigger:'a:containsExact("test SO")',},{content:"click sign",trigger:'a:contains("Sign")',},{content:"check submit is enabled",trigger:'.o_portal_sign_submit:enabled',run:function(){},},{content:"click select style",trigger:'.o_web_sign_auto_select_style a',},{content:"click style 4",trigger:'.o_web_sign_auto_font_selection a:eq(3)',},{content:"click submit",trigger:'.o_portal_sign_submit:enabled',},{content:"check it's confirmed",trigger:'#quote_content:contains("Thank You")',},{trigger:'#quote_content',run:function(){window.location.href=window.location.origin+'/web';},},{trigger:'nav',run:function(){},}]);});;

/* /calendar/static/tests/tours/calendar_tour.js */
odoo.define('@calendar/../tests/tours/calendar_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const todayDate=function(){let now=new Date();let year=now.getFullYear();let month=String(now.getMonth()+1).padStart(2,'0');let day=String(now.getDate()).padStart(2,'0');return`${month}/${day}/${year} 10:00:00`;};tour.register('calendar_appointments_hour_tour',{url:'/web',test:true,},[tour.stepUtils.showAppsMenuItem(),{trigger:'.o_app[data-menu-xmlid="calendar.mail_menu_calendar"]',content:'Open Calendar',run:'click',},{trigger:'.o-calendar-button-new',content:'Create a new event',run:'click',},{trigger:'#name',content:'Give a name to the new event',run:'text TEST EVENT',},{trigger:'#start',content:'Give a date to the new event',run:`text ${todayDate()}`,},{trigger:'.fa-cloud-upload',content:'Save the new event',run:'click',},{trigger:'.dropdown-item:contains("Calendar")',content:'Go back to Calendar view',run:'click',},{trigger:'.dropdown-toggle:contains("Week")',content:'Click to change calendar view',run:'click',},{trigger:'.dropdown-item:contains("Month")',content:'Change the calendar view to Month',run:'click',},{trigger:'.fc-day-header:contains("Monday")',content:'Change the calendar view to week',},{trigger:'.fc-time:contains("10:00")',content:'Check the time is properly displayed',},{trigger:'.o_event_title:contains("TEST EVENT")',content:'Check the event title',},]);tour.register('test_calendar_delete_tour',{test:true,},[{content:'Select filter (everybody)',trigger:'div[data-value="all"] input',},{content:'Click on the event (focus + waiting)',trigger:'a .fc-content:contains("Test Event")',async run(){$('a .fc-content:contains("Test Event")').click();await new Promise((r)=>setTimeout(r,1000));$('a .fc-content:contains("Test Event")').click();}},{content:'Delete the event',trigger:'.o_cw_popover_delete',},{content:'Validate the deletion',trigger:'button:contains("Ok")',async run(){$('button:contains("Ok")').click();await new Promise((r)=>setTimeout(r,1000));}},]);tour.register('test_calendar_decline_tour',{test:true,},[{content:'Click on the event (focus + waiting)',trigger:'a .fc-content:contains("Test Event")',async run(){$('a .fc-content:contains("Test Event")').click();await new Promise((r)=>setTimeout(r,1000));$('a .fc-content:contains("Test Event")').click();}},{content:'Delete the event',trigger:'.o_cw_popover_delete',},{content:'Wait declined status',trigger:'.o_attendee_status_declined',},]);tour.register('test_calendar_decline_with_everybody_filter_tour',{test:true,},[{content:'Select filter (everybody)',trigger:'div[data-value="all"] input',},{content:'Click on the event (focus + waiting)',trigger:'a .fc-content:contains("Test Event")',async run(){$('a .fc-content:contains("Test Event")').click();await new Promise((r)=>setTimeout(r,1000));$('a .fc-content:contains("Test Event")').click();}},{content:'Delete the event',trigger:'.o_cw_popover_delete',},{content:'Select filter (everybody)',trigger:'div[data-value="all"] input',},{content:'Wait declined status',trigger:'.o_attendee_status_declined',},]);return __exports;});;

/* /contacts/static/tests/tours/debug_menu_set_defaults.js */
odoo.define('debug_menu_set_defaults.tour',function(require){"use strict";var tour=require('web_tour.tour');tour.register('debug_menu_set_defaults',{test:true,url:'/web?debug=1',},[...tour.stepUtils.goToAppSteps('contacts.menu_contacts',"Open the contacts menu"),{content:"Create a new contact",trigger:'.o-kanban-button-new',},{content:"Check that Company is checked by default, and not Individual",trigger:'.o_field_widget[name="company_type"] input[data-value="company"]:checked',run:function(){},},{content:"Select the individual radio button",trigger:'.o_field_widget[name="company_type"] input[data-value="person"]',},{content:"Open the debug menu",trigger:'.o_debug_manager button',},{content:"Click the Set Defaults menu",trigger:'.o_debug_manager .dropdown-item:contains(Set Defaults)',},{content:"Choose Company Type = Individual",trigger:'#formview_default_fields',run:function(){const element_field=document.querySelector('select#formview_default_fields');element_field.value='company_type';element_field.dispatchEvent(new Event("change"));},},{content:"Check that there are conditions",trigger:'#formview_default_conditions',},{content:"Save the new default",trigger:'footer button:contains(Save default)',},{content:"Discard the contact creation",trigger:'button.o_form_button_cancel',},{trigger:'.o-kanban-button-new',},{content:"Check that Individual is checked instead of Company",trigger:'.o_field_widget[name="company_type"] input[data-value="person"]:checked',run:function(){},},{content:"Discard the contact creation",trigger:'button.o_form_button_cancel',},{content:"Wait for discard",trigger:'.o_control_panel .o-kanban-button-new',run(){},},]);});;

/* /crm/static/tests/tours/create_crm_team_tour.js */
odoo.define('@crm/../tests/tours/create_crm_team_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('create_crm_team_tour',{url:"/web",test:true,},[...tour.stepUtils.goToAppSteps('crm.crm_menu_root'),{trigger:'button[data-menu-xmlid="crm.crm_menu_config"]',},{trigger:'a[data-menu-xmlid="crm.crm_team_config"]',},{trigger:'button.o_list_button_add',},{trigger:'input[id="name"]',run:'text My CRM Team',},{trigger:'button.o-kanban-button-new',},{trigger:'div.modal-dialog tr:contains("Test Salesman") input.form-check-input',run:'click',},{trigger:'div.modal-dialog tr:contains("Test Sales Manager") input.form-check-input',run:'click',},{trigger:'div.modal-dialog tr:contains("Test Sales Manager") input.form-check-input:checked',run:()=>{},},{trigger:'button.o_select_button',},...tour.stepUtils.saveForm()]);return __exports;});;

/* /crm/static/tests/tours/crm_email_and_phone_propagation.js */
odoo.define('crm.crm_email_and_phone_propagation',function(require){'use strict';const tour=require('web_tour.tour');tour.register('crm_email_and_phone_propagation_edit_save',{test:true,url:'/web',},[tour.stepUtils.showAppsMenuItem(),{trigger:'.o_app[data-menu-xmlid="crm.crm_menu_root"]',content:'open crm app',},{trigger:'.o_kanban_record .o_kanban_record_title span:contains(Test Lead Propagation)',content:'Open the first lead',run:'click',},{trigger:'.o_form_button_save',extra_trigger:'.o_form_editable .o_field_widget[name=email_from] input',content:'Save the lead',run:'click',},]);tour.register('crm_email_and_phone_propagation_remove_email_and_phone',{test:true,url:'/web',},[tour.stepUtils.showAppsMenuItem(),{trigger:'.o_app[data-menu-xmlid="crm.crm_menu_root"]',content:'open crm app',},{trigger:'.o_kanban_record .o_kanban_record_title span:contains(Test Lead Propagation)',content:'Open the first lead',run:'click',},{trigger:'.o_form_editable .o_field_widget[name=email_from] input',extra_trigger:'.o_form_editable .o_field_widget[name=phone] input',content:'Remove the email and the phone',run:function(action){action.remove_text("",".o_form_editable .o_field_widget[name=email_from] input");action.remove_text("",".o_form_editable .o_field_widget[name=phone] input");},},{trigger:'.o_back_button',extra_trigger:'.o_form_sheet_bg .fa-exclamation-triangle:not(.o_invisible_modifier)',content:'Save the lead and exit to kanban',run:'click',},{trigger:'.o_kanban_renderer',}]);});;

/* /crm/static/tests/tours/crm_forecast_tour.js */
odoo.define('@crm/../tests/tours/crm_forecast_tour',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const today=moment();tour.register('crm_forecast',{test:true,url:"/web",},[tour.stepUtils.showAppsMenuItem(),{trigger:".o_app[data-menu-xmlid='crm.crm_menu_root']",content:"open crm app",},{trigger:'.dropdown-toggle[data-menu-xmlid="crm.crm_menu_report"]',content:'Open Reporting menu',run:'click',},{trigger:'.dropdown-item[data-menu-xmlid="crm.crm_menu_forecast"]',content:'Open Forecast menu',run:'click',},{trigger:'.o_column_quick_create:contains(Add next month)',content:'Wait page loading'},{trigger:".o-kanban-button-new",content:"click create",run:'click',},{trigger:".o_field_widget[name=name] input",content:"complete name",run:"text Test Opportunity 1",},{trigger:".o_field_widget[name=expected_revenue] input",content:"complete expected revenue",run:"text 999999",},{trigger:"button.o_kanban_edit",content:"edit lead",},{trigger:"div[name=date_deadline] input",content:"complete expected closing",run:`text ${today.format("MM/DD/YYYY")}`,},{trigger:"div[name=date_deadline] input",content:"click to make the datepicker disappear",run:"click"},{trigger:"body:not(:has(div.bootstrap-datetimepicker-widget))",content:"wait for date_picker to disappear",run:function(){},},{trigger:'.o_back_button',content:'navigate back to the kanban view',position:"bottom",run:"click"},{trigger:".o_kanban_record .o_kanban_record_title:contains('Test Opportunity 1')",content:"move to the next month",run:function(actions){const undefined_groups=$('.o_column_title:contains("None")').length;actions.drag_and_drop_native(`.o_opportunity_kanban .o_kanban_group:eq(${1 + undefined_groups})`,this.$anchor);},},{trigger:".o_kanban_record .o_kanban_record_title:contains('Test Opportunity 1')",content:"edit lead",run:"click"},{trigger:".o_field_widget[name=date_deadline] input",content:"complete expected closing",run:function(actions){actions.text(`text ${moment(today).add(5, 'months').startOf('month').subtract(1, 'days').format("MM/DD/YYYY")}`,this.$anchor);this.$anchor[0].dispatchEvent(new KeyboardEvent("keydown",{bubbles:true,key:"Escape"}));},},{trigger:"body:not(:has(div.bootstrap-datetimepicker-widget))",content:"wait for date_picker to disappear",run:function(){},},{trigger:".o_field_widget[name=probability] input",content:"max out probability",run:"text 100"},{trigger:'.o_back_button',content:'navigate back to the kanban view',position:"bottom",run:"click"},{trigger:'.o_kanban_add_column',content:"add next month",run:"click"},{trigger:".o_kanban_record:contains('Test Opportunity 1'):contains('Won')",content:"assert that the opportunity has the Won banner",run:function(){},}]);return __exports;});;

/* /crm/static/tests/tours/crm_rainbowman.js */
odoo.define('@crm/../tests/tours/crm_rainbowman',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('crm_rainbowman',{test:true,url:"/web",},[tour.stepUtils.showAppsMenuItem(),{trigger:".o_app[data-menu-xmlid='crm.crm_menu_root']",content:"open crm app",},{trigger:".o-kanban-button-new",content:"click create",},{trigger:".o_field_widget[name=name] input",content:"complete name",run:"text Test Lead 1",},{trigger:".o_field_widget[name=expected_revenue] input",content:"complete expected revenue",run:"text 999999997",},{trigger:"button.o_kanban_add",content:"create lead",},{trigger:".o_kanban_record .o_kanban_record_title:contains('Test Lead 1')",content:"move to won stage",run:"drag_and_drop_native .o_opportunity_kanban .o_kanban_group:eq(3) "},{trigger:".o_reward_rainbow",extra_trigger:".o_reward_rainbow",run:function(){}},{trigger:".o_kanban_renderer",},{trigger:".o_kanban_renderer:not(:has(.o_kanban_quick_create))",run(){},},{trigger:".o-kanban-button-new",content:"create second lead",},{trigger:".o_field_widget[name=name] input",content:"complete name",run:"text Test Lead 2",},{trigger:".o_field_widget[name=expected_revenue] input",content:"complete expected revenue",run:"text 999999998",},{trigger:"button.o_kanban_add",content:"create lead",},{trigger:".o_kanban_record .o_kanban_record_title:contains('Test Lead 2')",run:function(){}},{trigger:".o_kanban_record .o_kanban_record_title:contains('Test Lead 1')",content:"move back to new stage",run:"drag_and_drop .o_opportunity_kanban .o_kanban_group:eq(0) "},{trigger:".o_kanban_record .o_kanban_record_title:contains('Test Lead 2')",content:"click on second lead",},{trigger:".o_statusbar_status button[data-value='4']",content:"move lead to won stage",},...tour.stepUtils.saveForm(),{trigger:".o_statusbar_status button[data-value='1']",extra_trigger:".o_reward_rainbow",content:"move lead to previous stage & rainbowman appears",},{trigger:"button[name=action_set_won_rainbowman]",content:"click button mark won",},...tour.stepUtils.saveForm(),{trigger:".o_menu_brand",extra_trigger:".o_reward_rainbow",content:"last rainbowman appears",}]);return __exports;});;

/* /website/static/tests/tour_utils/widget_lifecycle_dep_widget.js */
odoo.define('@website/../tests/tour_utils/widget_lifecycle_dep_widget',async function(require){'use strict';let __exports={};const publicWidget=require("web.public.widget");const localStorageKey='widgetAndWysiwygLifecycle';if(!window.localStorage.getItem(localStorageKey)){window.localStorage.setItem(localStorageKey,'[]');}
__exports.addLifecycleStep=addLifecycleStep;function addLifecycleStep(step){const oldValue=window.localStorage.getItem(localStorageKey);const newValue=JSON.stringify(JSON.parse(oldValue).concat(step));window.localStorage.setItem(localStorageKey,newValue);}
publicWidget.registry.CountdownPatch=publicWidget.Widget.extend({selector:".s_countdown",disabledInEditableMode:false,async start(){addLifecycleStep('widgetStart');await this._super(...arguments);this.el.classList.add("public_widget_started");},destroy(){this.el.classList.remove("public_widget_started");addLifecycleStep('widgetStop');this._super(...arguments);},});return __exports;});;

/* /website/static/tests/tours/automatic_editor.js */
odoo.define('website.tour.automatic_editor',function(require){'use strict';const wTourUtils=require("website.tour_utils");wTourUtils.registerWebsitePreviewTour('automatic_editor_on_new_website',{test:true,url:'/',},[{content:"Select the language dropdown",trigger:'iframe .js_language_selector .dropdown-toggle'},{content:"click on Add a language",trigger:'iframe a.o_add_language',},{content:"type Parseltongue",trigger:'div[name="lang_ids"] .o_input_dropdown input',run:'text Parseltongue',},{content:'select Parseltongue',trigger:'.dropdown-item:contains(Parseltongue)',in_modal:false,},{content:"load parseltongue",extra_trigger:'.modal div[name="lang_ids"] .rounded-pill .o_tag_badge_text:contains(Parseltongue)',trigger:'.modal-footer button[name=lang_install]',},{content:"Select the language dropdown",trigger:'iframe .js_language_selector .dropdown-toggle',},{content:"Select parseltongue",trigger:'iframe a.js_change_lang[data-url_code=pa_GB]',extra_trigger:'iframe a.js_change_lang .o_lang_flag',},{content:"Check that we're on parseltongue and then go to settings",trigger:'iframe html[lang=pa-GB]',run:()=>{window.location.href='/web#action=website.action_website_configuration';}},{content:"create a new website",trigger:'button[name="action_website_create_new"]',},{content:"insert website name",trigger:'div[name="name"] input',run:'text Website EN'},{content:"validate the website creation modal",trigger:'button.btn-primary'},{content:"skip configurator",trigger:'.o_configurator_container .container-fluid .btn.btn-link'},{content:"make hover button appear",trigger:'.o_theme_preview',run:()=>{$('.o_theme_preview .o_button_area').attr('style','visibility: visible; opacity: 1;');},},{content:"Install a theme",trigger:'button[name="button_choose_theme"]'},{content:"Check that the editor is loaded",trigger:'iframe body.editor_enable',timeout:30000,run:()=>null,},{content:"exit edit mode",trigger:'.o_we_website_top_actions button.btn-primary:contains("Save")',},{content:"wait for editor to close",trigger:'iframe body:not(.editor_enable)',run:()=>null,}]);});;

/* /website/static/tests/tours/carousel_content_removal.js */
odoo.define('@website/../tests/tours/carousel_content_removal',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour("carousel_content_removal",{test:true,url:'/',edition:true,},[{trigger:"#snippet_structure .oe_snippet:has(span:contains('Carousel')) .oe_snippet_thumbnail",content:"Drag the Carousel block and drop it in your page.",run:"drag_and_drop iframe #wrap",},{trigger:"iframe .carousel .carousel-item.active .carousel-content",content:"Select the active carousel item.",},{trigger:"iframe .oe_overlay.oe_active .oe_snippet_remove",content:"Remove the active carousel item.",},{trigger:"iframe .carousel .carousel-item.active .container:not(:has(*))",content:"Check for a carousel slide with an empty container tag",run:function(){},}]);return __exports;});;

/* /website/static/tests/tours/client_action_iframe_fallback.js */
odoo.define('@website/../tests/tours/client_action_iframe_fallback',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('client_action_iframe_fallback',{test:true,url:'/',},[{content:"Ensure we are on the expected page",trigger:'body iframe html[data-view-xmlid="website.homepage"]',run:()=>{},},{content:"Ensure the iframe fallback is not loaded in test mode",trigger:'body',run:()=>{if(document.querySelector('iframe[src="/website/iframefallback"]')){console.error("The iframe fallback shouldn't be inside the DOM.");}},},]);return __exports;});;

/* /website/static/tests/tours/client_action_redirect.js */
odoo.define('@website/../tests/tours/client_action_redirect',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const testUrl='/test_client_action_redirect';const goToFrontendSteps=[{content:"Go to the frontend",trigger:'body',run:()=>{window.location.href=testUrl;},},{content:"Check we are in the frontend",trigger:'body:not(:has(.o_website_preview)) #test_contact_FE',run:()=>null,}];const goToBackendSteps=[{content:"Go to the backend",trigger:'body',run:()=>{window.location.href=`/@${testUrl}`;},},{content:"Check we are in the backend",trigger:'.o_website_preview',run:()=>null,}];const checkEditorSteps=[{content:"Check that the editor is loaded",trigger:'iframe body.editor_enable',timeout:30000,run:()=>null,},{content:"exit edit mode",trigger:'.o_we_website_top_actions button.btn-primary:contains("Save")',},{content:"wait for editor to close",trigger:'iframe body:not(.editor_enable)',run:()=>null,}];tour.register('client_action_redirect',{test:true,url:testUrl,},[...goToFrontendSteps,{content:"Click on the link to frontend",trigger:'#test_contact_FE',},...checkEditorSteps,...goToFrontendSteps,{content:"Click on the link to backend",trigger:'#test_contact_BE',},...checkEditorSteps,...goToBackendSteps,{content:"Click on the link to backend (2)",trigger:'iframe #test_contact_BE',},...checkEditorSteps,]);return __exports;});;

/* /website/static/tests/tours/conditional_visibility.js */
odoo.define('@website/../tests/tours/conditional_visibility',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const snippets=[{id:'s_text_image',name:'Text - Image',},{id:"s_banner",name:"Banner",},{id:"s_popup",name:"Popup",},];function checkEyeIcon(snippetName,visible){const eyeIcon=visible?"fa-eye":"fa-eye-slash";const openOrClose=visible?"open":"close";const endExplanation=`should be ${openOrClose} in the "Invisible Elements" panel`;const invisibleElPanel="o_we_invisible_el_panel";return{content:`The eye icon of ${snippetName} ${endExplanation}`,trigger:`.${invisibleElPanel} .o_we_invisible_entry:contains("${snippetName}") i.${eyeIcon}`,run:()=>{},};}
function checkEyesIconAfterSave(footerIsHidden=true){const eyeIconChecks=[checkEyeIcon("Header",false),checkEyeIcon("Text - Image",true),checkEyeIcon("Popup",false),checkEyeIcon("Banner",true),];if(footerIsHidden){eyeIconChecks.push(checkEyeIcon("Footer",false));}
return eyeIconChecks;}
wTourUtils.registerWebsitePreviewTour('conditional_visibility_1',{edition:true,url:'/',test:true,},[wTourUtils.dragNDrop(snippets[0]),wTourUtils.clickOnSnippet(snippets[0]),wTourUtils.changeOption('ConditionalVisibility','we-toggler'),{content:'click on conditional visibility',trigger:'[data-name="visibility_conditional"]',run:'click',},{content:'click on utm medium toggler',trigger:'[data-save-attribute="visibilityValueUtmMedium"] we-toggler',run:'click',},{trigger:'[data-save-attribute="visibilityValueUtmMedium"] we-selection-items .o_we_m2o_search input',content:'Search for Email',run:'text Email',},{trigger:'[data-save-attribute="visibilityValueUtmMedium"] we-selection-items [data-add-record="Email"]',content:'click on Email',run:'click',},...wTourUtils.clickOnSave(),{content:'Check if the rule was applied',extra_trigger:'.o_website_preview:only-child',trigger:'iframe #wrap',run:function(actions){const style=window.getComputedStyle(this.$anchor[0].getElementsByClassName('s_text_image')[0]);if(style.display!=='none'){console.error('error This item should be invisible and only visible if utm_medium === email');}},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:'Check if the element is visible as it should always be visible in edit view',trigger:'iframe #wrap .s_text_image',run:function(actions){const style=window.getComputedStyle((this.$anchor[0]));if(style.display==='none'){console.error('error This item should now be visible because utm_medium === email');}},},]);wTourUtils.registerWebsitePreviewTour("conditional_visibility_3",{edition:true,test:true,url:"/",},[checkEyeIcon("Text - Image",true),wTourUtils.dragNDrop(snippets[1]),wTourUtils.clickOnSnippet(snippets[1]),wTourUtils.changeOption("ConditionalVisibility","we-toggler"),wTourUtils.changeOption("ConditionalVisibility",'[data-name="visibility_conditional"]'),checkEyeIcon("Banner",true),{content:"click on 'Blocks'",trigger:"#snippets_menu button:contains('Blocks')",},wTourUtils.dragNDrop(snippets[2]),{content:"Toggle the visibility of the popup",in_modal:false,trigger:".o_we_invisible_el_panel .o_we_invisible_entry:contains('Popup')",},checkEyeIcon("Popup",false),{content:"Click on footer",trigger:"iframe #wrapwrap footer",},wTourUtils.changeOption("HideFooter","we-checkbox"),checkEyeIcon("Footer",false),{content:"Click on Header",trigger:"iframe #wrapwrap header",},wTourUtils.changeOption("TopMenuVisibility","we-toggler"),wTourUtils.changeOption("TopMenuVisibility",'[data-visibility="hidden"]'),checkEyeIcon("Header",false),{content:"Toggle the visibility of the Banner snippet",trigger:".o_we_invisible_el_panel .o_we_invisible_entry:contains('Banner')",},checkEyeIcon("Banner",false),...wTourUtils.clickOnSave(),...wTourUtils.clickOnEditAndWaitEditMode(),...checkEyesIconAfterSave(),]);wTourUtils.registerWebsitePreviewTour("conditional_visibility_4",{edition:true,test:true,url:"/",},[wTourUtils.clickOnSnippet(snippets[0]),{content:"Click on the 'move down' option",trigger:"iframe we-button.o_we_user_value_widget.fa-angle-down",},...checkEyesIconAfterSave(),{content:"Check the order on the 'Invisible Elements' panel",trigger:".o_we_invisible_el_panel div:nth-child(3):contains('Banner')",run:()=>{},},{content:"Toggle the visibility of the Footer",trigger:".o_we_invisible_el_panel .o_we_invisible_entry:contains('Footer')",},{content:"Check that the footer is visible",trigger:"iframe #wrapwrap footer",run:()=>{},},wTourUtils.clickOnSnippet(snippets[1]),{content:"Drag the 'Banner' snippet to the end of the page",trigger:"iframe .o_overlay_move_options .ui-draggable-handle",run:"drag_and_drop iframe #wrapwrap footer",},...checkEyesIconAfterSave(false),{content:"Check the order on the 'Invisible Elements' panel",trigger:".o_we_invisible_el_panel div:nth-child(3):contains('Text - Image')",run:()=>{},},]);wTourUtils.registerWebsitePreviewTour("conditional_visibility_5",{edition:true,test:true,url:"/",},[wTourUtils.dragNDrop(snippets[0]),{content:"Click on the image of the dragged snippet",trigger:"iframe .s_text_image img",},wTourUtils.changeOption("DeviceVisibility",'we-button[data-toggle-device-visibility="no_desktop"]'),{content:"Check that the Column has been added in the 'Invisible Elements' panel",trigger:".o_we_invisible_el_panel .o_we_invisible_entry:contains('Column')",run:()=>{},},{content:"Click on the 'Text - Image' snippet",trigger:"iframe .s_text_image",},wTourUtils.changeOption("ConditionalVisibility",'we-button[data-toggle-device-visibility="no_desktop"]'),{content:"Check that the 'Text - Image' is the parent of 'Column' in the 'Invisible Elements' panel",trigger:".o_we_invisible_el_panel .o_we_invisible_root_parent.o_we_invisible_entry:contains('Text - Image') + ul .o_we_invisible_entry.o_we_sublevel_1:contains('Column')",run:()=>{},},{content:"Click on the 'Text - Image' entry on the 'Invisible Elements' panel",trigger:".o_we_invisible_el_panel .o_we_invisible_root_parent.o_we_invisible_entry:contains('Text - Image')",},{content:"Check that the snippet is visible on the website",trigger:"iframe .s_text_image.o_snippet_desktop_invisible.o_snippet_override_invisible",run:()=>{},},wTourUtils.changeOption("ConditionalVisibility",'we-button[data-toggle-device-visibility="no_mobile"]'),{content:"Check that the 'Text - Image' has been removed from the 'Invisible Elements' panel",trigger:".o_we_invisible_el_panel:not(.o_we_invisible_entry:contains('Text - Image'))",run:()=>{},},{content:"Click on the 'Column' entry on the 'Invisible Elements' panel",trigger:".o_we_invisible_el_panel .o_we_invisible_entry:contains('Column')",},{content:"Check that the column is visible on the website",trigger:"iframe .s_text_image .row > .o_snippet_desktop_invisible.o_snippet_override_invisible",run:()=>{},},wTourUtils.changeOption("DeviceVisibility",'we-button[data-toggle-device-visibility="no_mobile"]'),{content:"Check that the column has been removed from the 'Invisible Elements' panel",trigger:"#oe_snippets:not(:has(.o_we_invisible_entry:contains('Column')))",run:()=>{},},{content:"Activate mobile preview",trigger:".o_we_website_top_actions button[data-action='mobile']",},{content:"Check that the 'Text - Image' is the parent of 'Column' in the 'Invisible Elements' panel",trigger:".o_we_invisible_el_panel .o_we_invisible_root_parent.o_we_invisible_entry:contains('Text - Image') + ul .o_we_invisible_entry.o_we_sublevel_1:contains('Column')",run:()=>{},},]);return __exports;});;

/* /website/static/tests/tours/conditional_visibility_frontend.js */
odoo.define('@website/../tests/tours/conditional_visibility_frontend',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('conditional_visibility_2',{test:true,url:'/?utm_medium=Email',},[{content:'The content previously hidden should now be visible',trigger:'body #wrap',run:function(actions){const style=window.getComputedStyle(this.$anchor[0].getElementsByClassName('s_text_image')[0]);if(style.display==='none'){console.error('error This item should now be visible because utm_medium === email');}},},]);return __exports;});;

/* /website/static/tests/tours/configurator_translation.js */
odoo.define('@website/../tests/tours/configurator_translation',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('configurator_translation',{test:true,url:'/website/configurator',},[{content:"click next",trigger:'button.o_configurator_show',},{content:"use browser's Back",trigger:'a.o_change_website_type',run:()=>{window.history.back();},},{content:"return to description screen",trigger:'button.o_configurator_show',},{content:"select a website type",trigger:'a.o_change_website_type',},{content:"insert a website industry",trigger:'.o_configurator_industry input',run:'text ab',},{content:"select a website industry from the autocomplete",trigger:'.o_configurator_industry_wrapper ul li a:contains("in fr")',},{content:"select an objective",trigger:'.o_configurator_purpose_dd a',},{content:"choose from the objective list",trigger:'a.o_change_website_purpose',},{content:"chose a palette card",trigger:'.palette_card',},{content:"select confidentialité",trigger:'.card:contains(Parseltongue_privacy)',},{content:"Click on build my website",trigger:'button.btn-primary',},{content:"Loader should be shown",trigger:'.o_website_loader_container',run:function(){},},{content:"Wait untill the configurator is finished",trigger:'#oe_snippets.o_loaded',timeout:30000,},{content:"exit edit mode",trigger:'.o_we_website_top_actions button.btn-primary:contains("Save_Parseltongue")',},{content:"wait for editor to be closed",trigger:'iframe body:not(.editor_enable)',run:function(){},}]);return __exports;});;

/* /website/static/tests/tours/default_shape_gets_palette_colors.js */
odoo.define("website.tour.default_shape_gets_palette_colors",function(require){"use strict";const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour("default_shape_gets_palette_colors",{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_text_image',name:'Text - Image',}),wTourUtils.clickOnSnippet({id:'s_text_image',name:'Text - Image',}),wTourUtils.changeOption('ColoredLevelBackground','Shape'),{content:"Check that shape does not have a background-image in its inline style",trigger:'iframe #wrap .s_text_image .o_we_shape',run:()=>{const shape=$('iframe:not(.o_ignore_in_tour)').contents().find('#wrap .s_text_image .o_we_shape')[0];if(shape.style.backgroundImage){console.error("error The default shape has a background-image in its inline style (should rely on the class)");}},},]);});;

/* /website/static/tests/tours/drag_and_drop_on_non_editable.js */
odoo.define('@website/../tests/tours/drag_and_drop_on_non_editable',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");wTourUtils.registerWebsitePreviewTour("test_drag_and_drop_on_non_editable",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_company_team",name:"Team",}),{content:"Click on an editable media in non editable env.",trigger:"iframe .s_company_team .o_not_editable > .o_editable_media",},wTourUtils.goBackToBlocks(),Object.assign(wTourUtils.dragNDrop({id:"s_text_highlight",name:"Text Highlight",}),{content:"Drag and drop the Text Highlight building block next to the Team block media.",run:"drag_and_drop iframe .s_company_team .o_not_editable > .o_editable_media",}),{content:"Verify that the Text Highlight building block isn't in a non editable element.",trigger:"iframe .s_company_team :not(.o_not_editable) > .s_text_highlight",run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/edit_link_popover.js */
odoo.define("website.tour.edit_link_popover",function(require){"use strict";const{browser}=require('@web/core/browser/browser');const{patch}=require("@web/core/utils/patch");const wTourUtils=require('website.tour_utils');const FIRST_PARAGRAPH='iframe #wrap .s_text_image p:nth-child(2)';const clickFooter=[{content:"Save the link by clicking outside the URL input (not on a link element)",trigger:'iframe footer h5:first',},{content:"Wait delayed click on footer",trigger:'.o_we_customize_panel we-title:contains("Footer")',run:function(){},}];const clickEditLink=[{content:"Click on Edit Link in Popover",trigger:'iframe .o_edit_menu_popover .o_we_edit_link',},{content:"Ensure popover is closed",trigger:'iframe html:not(:has(.o_edit_menu_popover))',run:function(){},in_modal:false,}];wTourUtils.registerWebsitePreviewTour('edit_link_popover',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_text_image',name:'Text - Image',}),{content:"Click on a paragraph",trigger:FIRST_PARAGRAPH,run:'text Paragraph',},{content:"Click on 'Link' to open Link Dialog",trigger:"#toolbar #create-link",},{content:"Type the link URL /contactus",trigger:'#o_link_dialog_url_input',run:'text /contactus'},...clickFooter,{content:"Click on newly created link",trigger:`${FIRST_PARAGRAPH} a`,},{content:"Popover should be shown",trigger:'iframe .o_edit_menu_popover .o_we_url_link:contains("Contact Us")',run:function(){},},...clickEditLink,{content:"Type the link URL /",trigger:'#o_link_dialog_url_input',run:"text /"},...clickFooter,{content:"Click on link",trigger:`${FIRST_PARAGRAPH} a`,},{content:"Popover should be shown with updated preview data",trigger:'iframe .o_edit_menu_popover .o_we_url_link:contains("Home")',run:function(){},},{content:"Click on Remove Link in Popover",trigger:'iframe .o_edit_menu_popover .o_we_remove_link',},{content:"Link should be removed",trigger:`${FIRST_PARAGRAPH}:not(:has(a))`,run:function(){},},{content:"Ensure popover is closed",trigger:'iframe html:not(:has(.o_edit_menu_popover))',run:function(){},},{content:"Click navbar menu Home",trigger:'iframe #top_menu a:contains("Home")',},{content:"Popover should be shown (2)",trigger:'iframe .o_edit_menu_popover .o_we_url_link:contains("Home")',run:function(){},},...clickEditLink,{content:"Change the URL",trigger:'#url_input',run:"text /contactus"},{content:"Save the Edit Menu modal",trigger:'.modal-footer .btn-primary',},{content:"Click on the Home menu again",extra_trigger:'div:not(.o_loading_dummy) > #oe_snippets',trigger:'iframe #top_menu a:contains("Home")[href="/contactus"]',},{content:"Popover should be shown with updated preview data (2)",trigger:'iframe .o_edit_menu_popover .o_we_url_link:contains("Contact Us")',run:function(){},},{content:"Click on Edit Menu in Popover",trigger:'iframe .o_edit_menu_popover .js_edit_menu',},{content:"Edit Menu (tree) should open",trigger:'.o_website_dialog .oe_menu_editor',run:function(){},},{content:"Close modal",trigger:'.modal-footer .btn-secondary',},{content:"Click CTA in navbar",trigger:'iframe #top_menu_container a.btn-primary[href="/contactus"]',},{content:"Popover should be shown (3)",trigger:'iframe .o_edit_menu_popover .o_we_url_link:contains("Contact Us")',run:function(){},},{content:"Toolbar should be shown (3)",trigger:'#toolbar:has(#o_link_dialog_url_input:propValue(/contactus))',run:function(){},},{content:"Click 'Home' link in footer",trigger:'iframe footer a[href="/"]',},{content:"Popover should be shown (4)",trigger:'iframe .o_edit_menu_popover .o_we_url_link:contains("Home")',run:function(){},},{content:"Toolbar should be shown (4)",trigger:'#toolbar:has(#o_link_dialog_url_input:propValue(/))',run:function(){},},...clickFooter,{content:"Double click on link",extra_trigger:'iframe html:not(:has(.o_edit_menu_popover))',trigger:'iframe footer a[href="/"]',run:function(actions){const range=document.createRange();range.selectNodeContents(this.$anchor[0]);const sel=window.getSelection();sel.removeAllRanges();sel.addRange(range);actions.click();actions.dblclick();},},{content:"Ensure popover is opened on double click, and so is right panel edit link",trigger:'html:has(#o_link_dialog_url_input)',extra_trigger:'iframe html:has(.o_edit_menu_popover)',run:function(){},},{content:"Ensure that a click on the link popover link opens a new window in edit mode",trigger:'iframe .o_edit_menu_popover a.o_we_url_link[target="_blank"]',extra_trigger:'iframe .o_edit_menu_popover a.o_we_full_url[target="_blank"]',run:(actions)=>{patch(browser,'window_open_action',{open:(url)=>{if(window.location.hostname===url.hostname&&url.pathname.startsWith('/@/')){document.querySelector('body').classList.add('new_backend_window_opened');}}},{pure:true});actions.click();},},{content:"Ensure that link is opened correctly in edit mode",trigger:'.new_backend_window_opened',run:()=>{},},]);});;

/* /website/static/tests/tours/edit_megamenu.js */
odoo.define("website.tour.edit_megamenu",function(require){"use strict";const wTourUtils=require('website.tour_utils');const toggleMegaMenu=(stepOptions)=>Object.assign({},{content:"Toggles the mega menu.",trigger:'iframe #top_menu .nav-item a.o_mega_menu_toggle',run:function(){if(!this.$anchor[0].closest('.o_extra_menu_items')){this.$anchor[0].dispatchEvent(new Event('click'))}},},stepOptions);wTourUtils.registerWebsitePreviewTour('edit_megamenu',{test:true,url:'/',edition:true,},[{content:"Click on a menu item",trigger:'iframe #top_menu .nav-item a',},{content:"Click on 'Link' to open Link Dialog",trigger:'iframe .o_edit_menu_popover a.js_edit_menu',},{content:"Trigger the link dialog (click 'Add Mega Menu Item')",extra_trigger:'.o_website_dialog:visible',trigger:'.modal-body a:eq(1)',},{content:"Write a label for the new menu item",trigger:'.modal-dialog .o_website_dialog input',run:'text Megaaaaa!'},{content:"Confirm the mega menu label",trigger:'.modal-footer .btn-primary',},{content:"Save the website menu with a new mega menu",trigger:'.modal-footer .btn-primary',extra_trigger:'.oe_menu_editor [data-is-mega-menu="true"] .js_menu_label:contains("Megaaaaa!")',},wTourUtils.clickOnExtraMenuItem({extra_trigger:'#oe_snippets.o_loaded'},true),toggleMegaMenu({extra_trigger:'iframe #top_menu .nav-item a.o_mega_menu_toggle:contains("Megaaaaa!")'}),{content:"Select the last menu link of the first column",trigger:'iframe .s_mega_menu_odoo_menu .row > div:first-child .nav > :nth-child(6)',},{content:"Hit the delete button to remove the menu link",trigger:'iframe .oe_overlay .oe_snippet_remove',},{content:"Check that the last menu link was deleted",trigger:'iframe .s_mega_menu_odoo_menu .row > div:first-child .nav:not(:has(> :nth-child(6)))',run:()=>null,},{content:"Clicks on the first title item.",trigger:'iframe .o_mega_menu h4',},{content:"Press enter.",trigger:'iframe .o_mega_menu h4',run:function(actions){this.$anchor[0].dispatchEvent(new window.InputEvent('input',{bubbles:true,inputType:'insertParagraph'}));},},{content:"The menu should still be visible. Edit a menu item.",trigger:'iframe .o_mega_menu h4',run:'text New Menu Item',},{content:"Press the 'down arrow' key.",trigger:'iframe .o_mega_menu h4',run:function(actions){this.$anchor[0].dispatchEvent(new window.KeyboardEvent("keydown",{key:"ArrowDown"}));},},...wTourUtils.clickOnSave(),wTourUtils.clickOnExtraMenuItem({extra_trigger:'iframe body:not(.editor_enable)'},true),toggleMegaMenu(),{content:"The menu item should have been renamed.",trigger:'iframe .o_mega_menu h4:contains("New Menu Item")',run:function(){},},]);wTourUtils.registerWebsitePreviewTour('edit_megamenu_big_icons_subtitles',{test:true,url:'/',edition:true,},[{content:"Click on a menu item",trigger:'iframe #top_menu .nav-item a',},{content:"Click on 'Link' to open Link Dialog",trigger:'iframe .o_edit_menu_popover a.js_edit_menu',},{content:"Trigger the link dialog (click 'Add Mega Menu Item')",extra_trigger:".o_website_dialog",trigger:'.modal-body a:eq(1)',},{content:"Write a label for the new menu item",trigger:'.modal-dialog .o_website_dialog input',run:'text Megaaaaa2!',},{content:"Confirm the mega menu label",trigger:'.modal-footer .btn-primary',},{content:"Save the website menu with a new mega menu",trigger:'.modal-footer .btn-primary',extra_trigger:'.oe_menu_editor [data-is-mega-menu="true"] .js_menu_label:contains("Megaaaaa2!")',},{content:"Check for the new mega menu",trigger:'iframe #top_menu:has(.nav-item a.o_mega_menu_toggle:contains("Megaaaaa2!"))',run:function(){},},wTourUtils.clickOnExtraMenuItem({extra_trigger:'#oe_snippets.o_loaded'},true),toggleMegaMenu({extra_trigger:'iframe #top_menu .nav-item a.o_mega_menu_toggle:contains("Megaaaaa2!")'}),{content:"Select the first menu link of the first column",trigger:'iframe .s_mega_menu_odoo_menu .row > div:first-child .nav > :first-child',},wTourUtils.changeOption("MegaMenuLayout","we-toggler"),{content:"Select Big Icons Subtitles mega menu",trigger:'[data-select-label="Big Icons Subtitles"]',},{content:"Select the h4 of first menu link of the first column",trigger:'iframe .s_mega_menu_big_icons_subtitles .row > div:first-child .nav > :first-child h4',run:function(actions){actions.click();const iframeDocument=document.querySelector('.o_iframe').contentDocument;const range=iframeDocument.createRange();range.selectNodeContents(this.$anchor[0]);const sel=iframeDocument.getSelection();sel.removeAllRanges();sel.addRange(range);},},{content:"Convert it to Bold",trigger:'#oe_snippets #toolbar #bold',},...wTourUtils.clickOnSave(),wTourUtils.clickOnExtraMenuItem({extra_trigger:'iframe body:not(.editor_enable)'},true),toggleMegaMenu(),{content:"The menu item should only convert selected text to Bold.",trigger:'iframe .s_mega_menu_big_icons_subtitles .row > div:first-child .nav > :first-child font:not(:has(strong))',run:function(){},},]);});;

/* /website/static/tests/tours/edit_menus.js */
odoo.define('@website/../tests/tours/edit_menus',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('edit_menus',{test:true,url:'/',},[{content:"open site menu",extra_trigger:"iframe #wrapwrap",trigger:'button[data-menu-xmlid="website.menu_site"]',},{content:"Click on Edit Menu",trigger:'a[data-menu-xmlid="website.menu_edit_menu"]',},{content:"Trigger the link dialog (click 'Add Mega Menu Item')",extra_trigger:'.o_website_dialog:visible',trigger:'.modal-body a:eq(1)',},{content:"Write a label for the new menu item",trigger:'.modal-dialog .o_website_dialog input',run:'text Megaaaaa!'},{content:"Confirm the mega menu label",trigger:'.modal-footer .btn-primary',},{content:"Save the new menu",trigger:'.modal-footer .btn-primary',extra_trigger:'.oe_menu_editor [data-is-mega-menu="true"] .js_menu_label:contains("Megaaaaa!")',},wTourUtils.clickOnExtraMenuItem({extra_trigger:'body:not(:has(.oe_menu_editor))'},true),{content:"There should be a new megamenu item.",trigger:'iframe #top_menu .nav-item a.o_mega_menu_toggle:contains("Megaaaaa!")',run:()=>{},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Click on a menu item",trigger:'iframe #top_menu .nav-item a',},{content:"Click on Edit Menu",trigger:'iframe .o_edit_menu_popover a.js_edit_menu',},{content:"Trigger the link dialog (click 'Add Menu Item')",extra_trigger:'.o_website_dialog:visible',trigger:'.modal-body a:eq(0)',},{content:"Confirm the new menu entry without a label",extra_trigger:'.modal-dialog .o_website_dialog input:eq(0)',trigger:'.modal-footer .btn-primary',},{content:"It didn't save without a label. Fill label input.",extra_trigger:'.o_website_dialog:eq(1):visible',trigger:'.modal-dialog .o_website_dialog input:eq(0)',run:'text Random!',},{content:"Confirm the new menu entry without a url",trigger:'.modal-footer .btn-primary',},{content:"It didn't save without a url. Fill url input.",trigger:'.modal-dialog .o_website_dialog input:eq(1)',extra_trigger:'.modal-dialog .o_website_dialog input.is-invalid',run:'text #',},{content:"Confirm the new menu entry",trigger:'.modal-footer .btn-primary',},{content:"Save the website menu with the new entry",trigger:'.modal-footer .btn-primary',extra_trigger:'.oe_menu_editor .js_menu_label:contains("Random!")',},wTourUtils.clickOnExtraMenuItem({extra_trigger:'#oe_snippets.o_loaded'},true),{content:"Menu should have a new link item",trigger:'iframe #top_menu .nav-item a:contains("Random!")',},{content:"navbar shouldn't have any zwnbsp and no o_link_in_selection class",trigger:'iframe nav.navbar:not(:has(.o_link_in_selection)):not(:contains("\ufeff"))',run:()=>{},},{content:"Click on Edit Link",trigger:'iframe .o_edit_menu_popover a.o_we_edit_link',},{content:"Change the label",trigger:'.modal-dialog .o_website_dialog input:eq(0)',run:'text Modnar',},{content:"Confirm the new label",trigger:'.modal-footer .btn-primary',},...wTourUtils.clickOnSave(),wTourUtils.clickOnExtraMenuItem({extra_trigger:'iframe body:not(.editor_enable)'},true),{content:"Label should have changed",extra_trigger:"iframe body:not(.editor_enable)",trigger:'iframe #top_menu .nav-item a:contains("Modnar")',run:()=>{},},...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.clickOnExtraMenuItem({},true),{content:"Click on the 'Modnar' link",trigger:'iframe #top_menu .nav-item a:contains("Modnar")',},{content:"Click on the popover Edit Menu button",trigger:'iframe .o_edit_menu_popover a.js_edit_menu',},{content:"Click on the dialog Edit Menu button",trigger:'.oe_menu_editor .js_menu_label:contains("Modnar")',run:function(){const liEl=this.$anchor[0].closest('[data-menu-id]');liEl.querySelector('button.js_edit_menu').click();},},{content:"Change the label",trigger:'.modal-dialog .o_website_dialog input:eq(0)',run:'text Modnar !!',},{content:"Confirm the new menu label",trigger:'.modal-footer .btn-primary',},{content:"Save the website menu with the new menu label",trigger:'.modal-footer .btn-primary',extra_trigger:'.oe_menu_editor .js_menu_label:contains("Modnar !!")',},wTourUtils.dragNDrop({id:'s_media_list',name:'Media List'}),...wTourUtils.clickOnSave(),wTourUtils.clickOnExtraMenuItem({extra_trigger:'iframe body:not(.editor_enable)'},true),{content:"Label should have changed",trigger:'iframe #top_menu .nav-item a:contains("Modnar !!")',run:()=>{},},{content:"open site menu",trigger:'button[data-menu-xmlid="website.menu_site"]',},{content:"Click on Edit Menu",trigger:'a[data-menu-xmlid="website.menu_edit_menu"]',},{content:"Drag item into parent",trigger:'.oe_menu_editor li:contains("Contact us") > .ui-sortable-handle',run:"drag_move_and_drop [50,38]@.oe_menu_editor li:contains('Home') > .ui-sortable-handle => .oe_menu_editor li:contains('Home') .ui-sortable-placeholder",},{content:"Wait for drop",trigger:'.oe_menu_editor li:contains("Home") ul li:contains("Contact us")',run:()=>{},},{content:"Drag Mega at the top",trigger:'.oe_menu_editor li:contains("Megaaaaa!") > .ui-sortable-handle',run:"drag_move_and_drop [0,0]@.oe_menu_editor li:contains('Home') > .ui-sortable-handle => .oe_menu_editor li",},{content:"Wait for drop",trigger:'.oe_menu_editor:first-child:contains("Megaaaaa!")',run:()=>{},},{content:"Save the website menu with new nested menus",trigger:'.modal-footer .btn-primary',},{content:"Menu item should have a child",trigger:'iframe #top_menu .nav-item a.dropdown-toggle:contains("Home")',},{content:"When menu item is opened, child item must appear in the shown menu",trigger:'iframe #top_menu .nav-item:contains("Home") ul.show li a.dropdown-item:contains("Contact us")[href="/contactus"]',run:function(){this.$anchor[0].closest('body').querySelector('.o_footer_copyright_name').scrollIntoView(true);},},{content:"The Home menu should be closed",trigger:'iframe #top_menu .nav-item:contains("Home"):has(ul:not(.show))',run:()=>{},},{content:"Open the Home menu after scroll",trigger:'iframe #top_menu .nav-item a.dropdown-toggle:contains("Home")',},{content:"Check that the Home menu is opened",trigger:'iframe #top_menu .nav-item:contains("Home") ul.show li'+' a.dropdown-item:contains("Contact us")[href="/contactus"]',run:()=>{},},{content:"Close the Home menu",trigger:'iframe #top_menu .nav-item:has(a.dropdown-toggle:contains("Home"))',},{content:"Check that the Home menu is closed",trigger:'iframe #top_menu .nav-item:contains("Home"):has(ul:not(.show))',run:()=>{},},{content:"Open the mega menu",trigger:'iframe #top_menu .nav-item a.o_mega_menu_toggle:contains("Megaaaaa!")',},{content:"When the mega menu is opened, scroll up",trigger:'iframe #top_menu .o_mega_menu_toggle.show',run:function(){const marginTopOfMegaMenu=getComputedStyle(this.$anchor[0].closest('.dropdown').querySelector('.o_mega_menu'))['margin-top'];if(marginTopOfMegaMenu!=='0px'){console.error('The margin-top of the mega menu should be 0px');}
this.$anchor[0].closest('body').querySelector('.s_media_list_item:nth-child(2)').scrollIntoView(true);}},{content:"Check that the mega menu is closed",trigger:'iframe #top_menu .nav-item:contains("Megaaaaa!"):has(div[data-name="Mega Menu"]:not(.show))',run:()=>{},},{content:"Open the mega menu after scroll",trigger:'iframe #top_menu .nav-item a.o_mega_menu_toggle:contains("Megaaaaa!")',},{content:"Check that the mega menu is opened",trigger:'iframe #top_menu .nav-item:has(a.o_mega_menu_toggle:contains("Megaaaaa!")) '+'.s_mega_menu_odoo_menu',run:()=>{},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Open nested menu item",trigger:'iframe #top_menu .nav-item:contains("Home"):nth(1) .dropdown-toggle',},{content:"Press the 'down arrow' key.",trigger:'iframe #top_menu .nav-item:contains("Home") li:contains("Contact us")',run:function(actions){this.$anchor[0].dispatchEvent(new window.KeyboardEvent("keydown",{key:"ArrowDown"}));},},]);return __exports;});;

/* /website/static/tests/tours/edit_translated_page.js */
odoo.define('@website/../tests/tours/edit_translated_page',async function(require){'use strict';let __exports={};const tour=require("web_tour.tour");const wTourUtils=require("website.tour_utils");tour.register('edit_translated_page_redirect',{test:true,url:'/nl/contactus',},[{content:"Enter backend",trigger:'a.o_frontend_to_backend_edit_btn',},{content:"Check the data-for attribute",trigger:'iframe main:has([data-for="contactus_form"])',run:()=>{},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Go to /nl",trigger:"body",run:()=>{location.href='/nl';},},{content:"Enter backend",trigger:'a.o_frontend_to_backend_edit_btn',},...wTourUtils.clickOnEditAndWaitEditMode(),]);return __exports;});;

/* /website/static/tests/tours/editable_root_as_custom_snippet.js */
odoo.define('@website/../tests/tours/editable_root_as_custom_snippet',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const wTourUtils=require('website.tour_utils');tour.register("editable_root_as_custom_snippet",{test:true,},[wTourUtils.clickOnSnippet('.s_title.custom[data-oe-model][data-oe-id][data-oe-field][data-oe-xpath]'),wTourUtils.changeOption('SnippetSave','we-button'),{content:"Confirm modal",trigger:'.modal-footer .btn-primary',},{content:"Wait for the custom snippet to appear in the panel",trigger:'.oe_snippet[name="Custom Title"]',run:()=>null,},...wTourUtils.clickOnSave(),{content:"Go to homepage",trigger:'iframe a[href="/"].nav-link',},{content:"Wait to land on homepage",trigger:'iframe a[href="/"].nav-link.active',run:()=>null,},...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.dragNDrop({id:'s_title',name:'Custom Title'}),{content:"Check that the custom snippet does not have branding",trigger:'iframe #wrap .s_title.custom:not([data-oe-model]):not([data-oe-id]):not([data-oe-field]):not([data-oe-xpath])',run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/focus_blur_snippets.js */
odoo.define('website.tour.focus_blur_snippets',function(require){'use strict';const{loadJS}=require('@web/core/assets');const wTourUtils=require("website.tour_utils");const blockIDToData={parent:{selector:'iframe .s_focusblur',name:'section',overlayIndex:2,},child1:{selector:'iframe .s_focusblur_child1',name:'first child',overlayIndex:1,},child2:{selector:'iframe .s_focusblur_child2',name:'second child',overlayIndex:0,},};function clickAndCheck(blockID,expected){const blockData=blockIDToData[blockID]||{};return[{content:blockID?`Enable the ${blockData.name}`:'Disable all blocks',trigger:blockData.selector||'iframe #wrapwrap',},{content:'Once the related overlays are enabled/disabled, check that the focus/blur calls have been correct.',trigger:blockID?`iframe .oe_overlay.ui-draggable:eq(${blockData.overlayIndex}).oe_active`:`iframe #oe_manipulators:not(:has(.oe_active))`,run:function(actions){const result=window.focusBlurSnippetsResult;window.focusBlurSnippetsResult=[];if(expected.length!==result.length||!expected.every((item,i)=>item===result[i])){console.error(`
                    Expected: ${expected.toString()}
                    Result: ${result.toString()}
                `);}},}];}
window.focusBlurSnippetsResult=[];wTourUtils.registerWebsitePreviewTour("focus_blur_snippets",{test:true,url:"/",edition:true,},[{content:'First load our custom JS options',trigger:"body",run:function(){loadJS('/website/static/tests/tour_utils/focus_blur_snippets_options.js').then(function(){$('iframe:not(.o_ignore_in_tour)').contents().find('body').addClass('focus_blur_snippets_options_loaded');});},},{content:'Drag the custom block into the page',trigger:'#snippet_structure .oe_snippet:has(.oe_snippet_body.s_focusblur) .oe_snippet_thumbnail',extra_trigger:'iframe body.focus_blur_snippets_options_loaded',run:'drag_and_drop iframe #wrap',},...clickAndCheck('parent',['focus parent']),...clickAndCheck(null,['blur parent']),...clickAndCheck('child1',['focus parent','focus child1']),...clickAndCheck('child1',[]),...clickAndCheck(null,['blur parent','blur child1']),...clickAndCheck('parent',['focus parent']),...clickAndCheck('child1',['blur parent','focus parent','focus child1']),...clickAndCheck('child2',['blur parent','blur child1','focus parent','focus child2']),...clickAndCheck('parent',['blur parent','blur child2','focus parent']),]);});;

/* /website/static/tests/tours/gray_color_palette.js */
odoo.define('@website/../tests/tours/gray_color_palette',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');function waitForCSSReload(){return[{content:"Click on the blocks tab and back on theme to ensure the changes are applied",trigger:'.o_we_add_snippet_btn',},{content:"Go back to theme options",trigger:'.o_we_customize_theme_btn',extra_trigger:'#o_scroll',},{content:"Wait for no loading",trigger:'body:not(:has(.o_we_ui_loading)) iframe body:not(:has(.o_we_ui_loading))',run:()=>null,},];}
wTourUtils.registerWebsitePreviewTour('website_gray_color_palette',{test:true,url:'/',edition:true,},[{content:"Go to theme options",trigger:'.o_we_customize_theme_btn',},{content:"Toggle gray color palette",trigger:'.o_we_gray_preview.o_we_collapse_toggler',},{content:"Drag the hue slider",trigger:'.o_we_slider_tint[data-param="gray-hue"]',run:()=>{const slider=document.querySelector('.o_we_slider_tint[data-param="gray-hue"] input');slider.value=100;slider.dispatchEvent(new InputEvent('change',{bubbles:true}));},},{content:"Check the preview of the gray 900 after hue change",trigger:'[variable="900"][style="background-color: rgb(36, 41, 33) !important;"]',run:()=>{},},...waitForCSSReload(),{content:"Drag the saturation slider",trigger:'.o_we_user_value_widget[data-param="gray-extra-saturation"]',run:()=>{const slider=document.querySelector('.o_we_user_value_widget[data-param="gray-extra-saturation"] input');slider.value=15;slider.dispatchEvent(new InputEvent('change',{bubbles:true}));}},{content:"Check the preview of the gray 900 after saturation change",trigger:'[variable="900"][style="background-color: rgb(34, 47, 27) !important;"]',run:()=>{},},...waitForCSSReload(),{content:"Wait for the iframe to be loaded",trigger:'iframe body',run:()=>{const iframeEl=document.querySelector('.o_website_preview .o_iframe');const styles=iframeEl.contentWindow.getComputedStyle(iframeEl.contentDocument.documentElement);if(styles.getPropertyValue('--900').toString().replace(/ /g,'')!=='#222F1B'){console.error('The value for the gray 900 is not right');}}},]);return __exports;});;

/* /website/static/tests/tours/grid_layout.js */
odoo.define('@website/../tests/tours/grid_layout',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('website_replace_grid_image',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_text_image',name:'Text - Image',}),wTourUtils.clickOnSnippet({id:'s_text_image',name:'Text - Image',}),{content:"Toggle to grid mode",trigger:'.o_we_user_value_widget[data-name="grid_mode"]',},{content:"Replace image",trigger:'iframe .s_text_image img',run:'dblclick',},{content:"Pick new image",trigger:'.o_select_media_dialog img[title="s_banner_default_image.jpg"]',},{content:"Add new image column",trigger:'.o_we_user_value_widget[data-add-element="image"]',},{content:"Replace new image",trigger:'iframe .s_text_image img[src="/web/image/website.s_text_image_default_image"]',run:'dblclick',},{content:"Pick new image",trigger:'.o_select_media_dialog img[title="s_banner_default_image.jpg"]',},...wTourUtils.clickOnSave()]);wTourUtils.registerWebsitePreviewTour("scroll_to_new_grid_item",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_text_image",name:"Text - Image"}),wTourUtils.dragNDrop({id:"s_image_text",name:"Image - Text"}),wTourUtils.dragNDrop({id:"s_image_text",name:"Image - Text"}),wTourUtils.clickOnSnippet({id:"s_text_image",name:"Text - Image"}),wTourUtils.changeOption("layout_column",'we-button[data-name="grid_mode"]'),wTourUtils.changeOption("layout_column",'we-button[data-add-element="image"]'),{content:"Check that the page scrolled to the new grid item",trigger:"iframe .s_text_image .o_grid_item:nth-child(3)",run:function(){setTimeout(()=>{const newItemPosition=this.$anchor[0].getBoundingClientRect();if(newItemPosition.top<0){console.error("The page did not scroll to the new grid item.");}
document.body.classList.add("o_scrolled_to_grid_item");},500);},},{content:"Make sure the scroll check is done",trigger:".o_scrolled_to_grid_item",run:()=>{},},]);return __exports;});;

/* /website/static/tests/tours/homepage_edit_discard.js */
odoo.define('@website/../tests/tours/homepage_edit_discard',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");wTourUtils.registerWebsitePreviewTour('homepage_edit_discard',{test:true,url:'/',edition:true,},[{trigger:"#oe_snippets button[data-action=\"cancel\"]:not([disabled])",extra_trigger:"body:not(:has(.o_dialog))",content:"<b>Click Discard</b> to Discard all Changes.",position:"bottom",},{trigger:"iframe body:not(.editor_enable)",auto:true,run:()=>null,}]);return __exports;});;

/* /website/static/tests/tours/html_editor.js */
odoo.define('website.test.html_editor',function(require){'use strict';const wTourUtils=require('website.tour_utils');const adminCssModif='#wrap {display: none;}';const demoCssModif='// demo_edition';wTourUtils.registerWebsitePreviewTour('html_editor_language',{url:'/test_page',test:true,},[{content:"open site menu",extra_trigger:"iframe body:not(.editor_enable)",trigger:'button[data-menu-xmlid="website.menu_site"]',},{content:"open html editor",trigger:'a[data-menu-xmlid="website.menu_ace_editor"]',},{content:"add something in the page's English version",trigger:'div.ace_line .ace_xml:contains("rumbler")',run:()=>{ace.edit('ace-view-editor').getSession().insert({row:1,column:1,},'<br/>\n');},},{content:"save the html editor",extra_trigger:'div.ace_line .ace_xml:contains("br")',trigger:".o_ace_view_editor button[data-action=save]",},{content:"check that the page has the modification",trigger:'iframe #wrapwrap:has(br)',run:()=>{},},{content:"check that the page has not lost the original text",trigger:'iframe #wrapwrap:contains("rommelpot")',run:()=>{},},]);wTourUtils.registerWebsitePreviewTour('html_editor_multiple_templates',{url:'/generic',edition:true,test:true,},[{content:"drop a snippet",trigger:".oe_snippet:has(.s_cover) .oe_snippet_thumbnail",run:"drag_and_drop iframe #oe_structure_test_ui",},...wTourUtils.clickOnSave(),{content:"open site menu",extra_trigger:"iframe body:not(.editor_enable)",trigger:'button[data-menu-xmlid="website.menu_site"]',},{content:"open html editor",trigger:'a[data-menu-xmlid="website.menu_ace_editor"]',},{content:"add something in the generic view",trigger:'div.ace_line .ace_xml:contains("Generic")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:3,column:1},'<p>somenewcontent</p>\n');},},{content:"select oe_structure specific view",trigger:'div.ace_line .ace_xml:contains("somenewcontent")',run:function(){var viewId=$('#ace-view-list option:contains("oe_structure_test_ui")').val();$('#ace-view-list').val(viewId).trigger('change');},},{content:"add something in the oe_structure specific view",extra_trigger:'#ace-view-id:contains("test.generic_view_oe_structure_test_ui")',trigger:'div.ace_line .ace_xml:contains("s_cover")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:2,column:1},'<p>anothernewcontent</p>\n');},},{content:"save the html editor",extra_trigger:'div.ace_line .ace_xml:contains("anothernewcontent")',trigger:".o_ace_view_editor button[data-action=save]",},{content:"check that the page has both modification",extra_trigger:'iframe #wrapwrap:contains("anothernewcontent")',trigger:'iframe #wrapwrap:contains("somenewcontent")',run:function(){},},]);wTourUtils.registerWebsitePreviewTour('test_html_editor_scss',{url:'/contactus',test:true,},[{content:"open site menu",extra_trigger:'iframe #wrap:visible',trigger:'button[data-menu-xmlid="website.menu_site"]',},{content:"open html editor",trigger:'a[data-menu-xmlid="website.menu_ace_editor"]',},{content:"open type switcher",trigger:'.o_ace_type_switcher button',},{content:"select scss files",trigger:'.o_ace_type_switcher_choice[data-type="scss"]',},{content:"select 'user_custom_rules'",trigger:'body:has(#ace-scss-list option:contains("user_custom_rules"))',run:function(){var scssId=$('#ace-scss-list option:contains("user_custom_rules")').val();$('#ace-scss-list').val(scssId).trigger('change');},},{content:"add some scss content in the file",trigger:'div.ace_line .ace_comment:contains("footer {")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:2,column:0},`${adminCssModif}\n`);},},{content:"save the html editor",extra_trigger:`div.ace_line:contains("${adminCssModif}")`,trigger:".o_ace_view_editor button[data-action=save]",},{content:"check that the scss modification got applied",trigger:'iframe body:has(#wrap:hidden)',run:function(){},timeout:30000,},{content:"reset view (after reload, html editor should have been reopened where it was)",trigger:'#ace-view-id button[data-action="reset"]:not([disabled])',},{content:"confirm reset warning",trigger:'.modal-footer .btn-primary',},{content:"check that the scss file was reset correctly, wrap content should now be visible again",trigger:'iframe #wrap:visible',run:function(){},timeout:30000,},{content:"add some scss content in the file",trigger:'div.ace_line .ace_comment:contains("footer {")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:2,column:0},`${adminCssModif}\n`);},},{content:"save the html editor",extra_trigger:`div.ace_line:contains("${adminCssModif}")`,trigger:'.o_ace_view_editor button[data-action=save]',},{content:"check that the scss modification got applied",trigger:'iframe body:has(#wrap:hidden)',run:function(){},},]);wTourUtils.registerWebsitePreviewTour('test_html_editor_scss_2',{url:'/',test:true,},[{content:"open site menu",trigger:'button[data-menu-xmlid="website.menu_site"]',},{content:"open html editor",trigger:'a[data-menu-xmlid="website.menu_ace_editor"]',},{content:"open type switcher",trigger:'.o_ace_type_switcher button',},{content:"select scss files",trigger:'.o_ace_type_switcher_choice[data-type="scss"]',},{content:"select 'user_custom_rules'",trigger:'body:has(#ace-scss-list option:contains("user_custom_rules"))',run:function(){var scssId=$('#ace-scss-list option:contains("user_custom_rules")').val();$('#ace-scss-list').val(scssId).trigger('change');},},{content:"add some scss content in the file",trigger:`div.ace_line:contains("${adminCssModif}")`,run:function(){ace.edit('ace-view-editor').getSession().insert({row:2,column:0},`${demoCssModif}\n`);},},{content:"save the html editor",extra_trigger:`div.ace_line:contains("${demoCssModif}")`,trigger:".o_ace_view_editor button[data-action=save]",},{content:"reset view (after reload, html editor should have been reopened where it was)",trigger:'#ace-view-id button[data-action="reset"]:not([disabled])',timeout:30000,},{content:"confirm reset warning",trigger:'.modal-footer .btn-primary',},{content:"check that the scss file was reset correctly",extra_trigger:`body:not(:has(div.ace_line:contains("${adminCssModif}")))`,trigger:`body:not(:has(div.ace_line:contains("${demoCssModif}")))`,run:function(){},timeout:30000,},]);});;

/* /website/static/tests/tours/link_tools.js */
odoo.define('@website/../tests/tours/link_tools',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const{boundariesIn,setSelection}=require('@web_editor/js/editor/odoo-editor/src/utils/utils');const clickOnImgStep={content:"Click somewhere else to save.",trigger:'iframe #wrap .s_text_image img',};wTourUtils.registerWebsitePreviewTour('link_tools',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_text_image',name:'Text - Image',}),{content:"Replace first paragraph, to insert a new link",trigger:'iframe #wrap .s_text_image p',run:'text Go to odoo: '},{content:"Open link tools",trigger:"#toolbar #create-link",},{content:"Type the link URL odoo.com",trigger:'#o_link_dialog_url_input',run:'text odoo.com'},clickOnImgStep,{content:"Click on the newly created link",trigger:'iframe #wrap .s_text_image a[href="http://odoo.com"]:contains("odoo.com")',},{content:"Remove the link.",trigger:'iframe .popover:contains("http://odoo.com") a .fa-chain-broken',},{content:"Check that the link was removed",trigger:'iframe #wrap .s_text_image p:contains("Go to odoo:"):not(:has(a))',run:()=>{},},{content:"Select first paragraph, to insert a new link",trigger:'iframe #wrap .s_text_image p',},{content:"Open link tools",trigger:"#toolbar #create-link",},{content:"Type the link URL odoo.com",trigger:'#o_link_dialog_url_input',run:'text odoo.com'},clickOnImgStep,{content:"Click on the newly created link, change content to odoo website",trigger:'iframe .s_text_image a[href="http://odoo.com"]:contains("odoo.com")',run:'text odoo website',},{content:"Link tools, should be open, change the url",trigger:'#o_link_dialog_url_input',run:'text_blur odoo.be'},...wTourUtils.clickOnSave(),...wTourUtils.clickOnEditAndWaitEditMode(),{content:"The new link content should be odoo website and url odoo.be",trigger:'iframe .s_text_image a[href="http://odoo.be"]:contains("odoo website")',},{content:"The new link content should be odoo website and url odoo.be",trigger:'#toolbar button[data-bs-original-title="Link Style"]',},{content:"Click on the secondary style button.",trigger:'#toolbar we-button[data-value="secondary"]',},...wTourUtils.clickOnSave(),{content:"The link should have the secondary button style.",trigger:'iframe .s_text_image a.btn.btn-secondary[href="http://odoo.be"]:contains("odoo website")',run:()=>{},},...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.dragNDrop({id:'s_three_columns',name:'Columns',}),{content:"Click on the first image.",trigger:'iframe .s_three_columns .row > :nth-child(1) img',},{content:"Activate link.",trigger:'.o_we_customize_panel we-row:contains("Media") we-button.fa-link',},{content:"Set URL.",trigger:'.o_we_customize_panel we-input:contains("Your URL") input',run:'text odoo.com',},{content:"Deselect image.",trigger:'iframe .s_three_columns .row > :nth-child(2) img',},{content:"Re-select image.",trigger:'iframe .s_three_columns .row > :nth-child(1) img',},{content:"Check that the second image is not within a link.",trigger:'iframe .s_three_columns .row > :nth-child(2) div > img',run:()=>{},},{content:"Check that link tools appear.",trigger:'iframe .popover div a:contains("http://odoo.com")',run:()=>{},},...wTourUtils.clickOnSave(),{content:"Check that the first image was saved.",trigger:'iframe .s_three_columns .row > :nth-child(1) div > a > img',run:()=>{},},{content:"Check that the second image was saved.",trigger:'iframe .s_three_columns .row > :nth-child(2) div > img',run:()=>{},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Reselect the first image.",trigger:'iframe .s_three_columns .row > :nth-child(1) div > a > img',},{content:"Check that link tools appear.",trigger:'iframe .popover div a:contains("http://odoo.com")',run:()=>{},},{content:"Remove link.",trigger:'iframe .popover:contains("http://odoo.com") a .fa-chain-broken',},{content:"Check that image is not within a link anymore.",trigger:'iframe .s_three_columns .row > :nth-child(1) div > img',run:()=>{},},{content:"Replace first paragraph, write a URL",trigger:'iframe #wrap .s_text_image p',run:'text odoo.com'},{content:"Select text",trigger:'iframe #wrap .s_text_image p:contains(odoo.com)',run(){setSelection(...boundariesIn(this.$anchor[0]),false);}},{content:"Open link tools",trigger:"#toolbar #create-link",},clickOnImgStep,{content:"Check that link was created",trigger:"iframe .s_text_image p a[href='http://odoo.com']:contains('odoo.com')",run:()=>null,},{content:"Click on link to open the link tools",trigger:"iframe .s_text_image p a",},{content:"Change URL to https",trigger:"#o_link_dialog_url_input",run:'text https://odoo.com',},{content:"Check that link was updated",trigger:"iframe .s_text_image p a[href='https://odoo.com']:contains('odoo.com')",run:()=>null,},{content:"Change it back http",trigger:"#o_link_dialog_url_input",run:'text http://odoo.com',},{content:"Check that link was updated",trigger:"iframe .s_text_image p a[href='http://odoo.com']:contains('odoo.com')",run:()=>null,},{content:"Change URL into an email address",trigger:"#o_link_dialog_url_input",run:"text callme@maybe.com",},{content:"Check that link was updated and link content is synced with URL",trigger:"iframe .s_text_image p a[href='mailto:callme@maybe.com']:contains('callme@maybe.com')",run:()=>null,},{content:"Change URL back into a http one",trigger:"#o_link_dialog_url_input",run:"text_blur callmemaybe.com",},{content:"Check that link was updated and link content is synced with URL",trigger:"iframe .s_text_image p a[href='http://callmemaybe.com']:contains('callmemaybe.com')",},{content:"Edit link label",trigger:"iframe .s_text_image p a",run(actions){const link=this.$anchor[0];actions.text("callmemaybe.com/shops");link.dispatchEvent(new KeyboardEvent("keydown",{key:"Backspace",bubbles:true}));link.dispatchEvent(new InputEvent('input',{inputType:'insertText',bubbles:true}));},},{content:"Check that links's href was updated",trigger:"iframe .s_text_image p a[href='http://callmemaybe.com/shop']:contains('callmemaybe.com/shop')",run:()=>null,},{content:"Check popover content is up-to-date",trigger:"iframe .popover div a:contains('http://callmemaybe.com/shop')",run:()=>null,},{content:"Check Link tools URL input content is up-to-date",trigger:"#o_link_dialog_url_input",run(){if(this.$anchor[0].value!=='http://callmemaybe.com/shop'){throw new Error("Tour step failed");}}},...wTourUtils.clickOnSave(),]);return __exports;});;

/* /website/static/tests/tours/media_dialog.js */
odoo.define('@website/../tests/tours/media_dialog',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour("website_media_dialog_undraw",{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_text_image',name:'Text - Image',}),{content:"Open the media dialog from the snippet",trigger:"iframe .s_text_image img",run:"dblclick",},{content:"Search for 'banner' to call the media library",trigger:".o_select_media_dialog .o_we_search",run:"text banner",},{content:"Check that the media library is available",trigger:'.o_select_media_dialog:has(.o_we_search_select option[value="media-library"])',run:()=>null,},]);wTourUtils.registerWebsitePreviewTour("website_media_dialog_external_library",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_text_image",name:"Text - Image",}),{content:"Open the media dialog from the snippet",trigger:"iframe .s_text_image img",run:"dblclick",},{content:"Dummy search to call the media library",trigger:".o_select_media_dialog .o_we_search",run:"text a",},{content:"Choose the media library to only show its media",trigger:".o_select_media_dialog .o_we_search_select",run:function(actions){actions.click();actions.text("Illustrations");this.$anchor.trigger($.Event("keydown",{key:'Enter',keyCode:13}));},},{content:"Double click on the first image",trigger:".o_select_media_dialog img.o_we_attachment_highlight",run:"dblclick",},{content:"Reopen the media dialog",trigger:"iframe .s_text_image img",run:"dblclick",},{content:"Check that the image was created only once",trigger:".o_select_media_dialog .o_we_existing_attachments",run:function(){const selector=".o_existing_attachment_cell img[src^='/web_editor/shape/illustration/']";const imgName=this.$anchor[0].querySelector(selector).title;const uploadedImgs=this.$anchor[0].querySelectorAll(`${selector}[title='${imgName}']`);if(uploadedImgs.length!==1){throw new Error(`error: ${uploadedImgs.length} attachment(s) were found. Exactly 1 should have been created.`);}},},]);wTourUtils.registerWebsitePreviewTour('website_media_dialog_icons',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_process_steps',name:'Steps',}),{content:"Open MediaDialog from a snippet icon",trigger:'iframe .s_process_steps .fa-unlock-alt',run:"dblclick",},{content:"Pick the same icon",trigger:'.o_select_media_dialog .o_we_attachment_selected.fa-unlock-alt',},{content:"Check if the icon remains the same",trigger:'iframe .s_process_steps .fa-unlock-alt',run:()=>null,},{content:"Open MediaDialog again",trigger:'iframe .s_process_steps .fa-unlock-alt',run:"dblclick",},{content:"Click on the ADD button",trigger:'.o_select_media_dialog .btn:contains(Add)',},{content:"Check if the icon remains the same",trigger:'iframe .s_process_steps .fa-unlock-alt',run:()=>null,},...wTourUtils.clickOnSave()]);wTourUtils.registerWebsitePreviewTour("website_media_dialog_image_shape",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_text_image",name:"Text - Image",}),{content:"Click on the image",trigger:"iframe .s_text_image img",},wTourUtils.changeOption("ImageTools",'we-select[data-name="shape_img_opt"] we-toggler'),wTourUtils.changeOption("ImageTools","we-button[data-set-img-shape]"),{content:"Open MediaDialog from an image",trigger:"iframe .s_text_image img[data-shape]",run:"dblclick",},{content:"Click on the 'Icons' tab",trigger:'.o_select_media_dialog .o_notebook_headers .nav-item a:contains("Icons")',},{content:"Select an icon",trigger:".o_select_media_dialog:has(.nav-link.active:contains('Icons')) .tab-content span.fa-heart",},{content:"Checks that the icon doesn't have a shape",trigger:"iframe .s_text_image .fa-heart:not([data-shape])",run:()=>{},},]);return __exports;});;

/* /website/static/tests/tours/multi_edition.js */
odoo.define('@website/../tests/tours/multi_edition',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('website_multi_edition',{test:true,url:'/',edition:true,},[{content:'Check the current page has not the elements that will be added',trigger:'iframe body:not(:has(.s_text_image)):not(:has(.s_hr))',run:()=>null,},wTourUtils.dragNDrop({id:'s_text_image',name:'Text - Image',}),wTourUtils.dragNDrop({id:'s_hr',name:'Separator',}),...wTourUtils.clickOnSave(),{content:'Check that the main element of the page was properly saved',trigger:'iframe main .s_text_image',run:()=>null,},{content:'Check that the footer was properly saved',trigger:'iframe footer .s_hr',run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/page_manager.js */
odoo.define('@website/../tests/tours/page_manager',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const wTourUtils=require('website.tour_utils');const checkKanbanGroupBy=[{content:"Click on Kanban View",trigger:'.o_cp_switch_buttons .o_kanban',},{content:"Click on Group By",extra_trigger:'.o_kanban_renderer',trigger:'.o_search_options .o_group_by_menu button',},{content:"Click on Add Custom Group",trigger:'.o_search_options .o_add_custom_group_menu button',run:function(actions){this.$anchor[0].dispatchEvent(new MouseEvent('mouseenter'));},},{content:"Click on Apply",trigger:'.o_add_custom_group_menu .dropdown-menu .btn-primary',},{content:"Click on List View",extra_trigger:'.o_kanban_renderer .o_kanban_header',trigger:'.o_cp_switch_buttons .o_list',},{content:"Remove applied Group By",extra_trigger:'.o_list_renderer',trigger:'.o_cp_searchview .o_facet_remove',}];const checkWebsiteFilter=[{content:"Click on My Website",trigger:"button.dropdown-toggle:contains('My Website')",},{content:"Select My Website 2",trigger:".dropdown-menu.show > .dropdown-item:contains('My Website 2')",},{content:"Check that the homepage is now the one of My Website 2",trigger:".o_list_table .o_data_row .o_data_cell[name=name]:contains('Home') "+"~ .o_data_cell[name=website_id]:contains('My Website 2')",run:()=>null,},{content:"Click on My Website 2",trigger:"button.dropdown-toggle:contains('My Website 2')",},{content:"Go back to My Website",trigger:".dropdown-menu.show > .dropdown-item:contains('My Website')",},{content:"Check that the homepage is now the one of My Website",trigger:".o_list_table .o_data_row .o_data_cell[name=name]:contains('Home') "+"~ .o_data_cell[name=website_id]:contains('My Website'):not(:contains('2'))",run:()=>null,}];const deleteSelectedPage=[{content:"Click on Action",trigger:'.o_cp_action_menus button',},{content:"Click on Delete",trigger:'.o-dropdown--menu span:contains("Delete")',},{content:"Click on I am sure about this",trigger:'main.modal-body input[type="checkbox"]',timeout:20000,},{content:"Click on OK",trigger:'.modal-content footer button.btn-primary:not([disabled])',}];const homePage='tr:contains("Home")';wTourUtils.registerWebsitePreviewTour('website_page_manager',{test:true,url:'/',},[{content:"Click on Site",trigger:'button.dropdown-toggle[title="Site"]',},{content:"Click on Pages",trigger:'a.dropdown-item[data-menu-xmlid="website.menu_website_pages_list"]',},...checkKanbanGroupBy,...checkWebsiteFilter,{content:"Click on Home Page",trigger:`.o_list_renderer ${homePage} td.o_list_record_selector input[type="checkbox"]`,},...deleteSelectedPage,{content:"Check that the page has been removed",trigger:`.o_list_renderer:not(:has(${homePage}))`,run:()=>null,},{content:"Click on All Pages",trigger:'.o_list_renderer thead input[type="checkbox"]',},...deleteSelectedPage,{content:"Check that all pages have been removed",trigger:'.o_list_renderer tbody:not(:has([data-id]))',run:()=>null,},]);wTourUtils.registerWebsitePreviewTour('website_page_manager_session_forced',{test:true,url:'/',},[...wTourUtils.switchWebsite(2,'My Website 2'),{content:"Click on Site",trigger:'button.dropdown-toggle[data-menu-xmlid="website.menu_site"]',},{content:"Click on Pages",trigger:'a.dropdown-item[data-menu-xmlid="website.menu_website_pages_list"]',},{content:"Check that the homepage is the one of My Website 2",trigger:".o_list_table .o_data_row .o_data_cell[name=name]:contains('Home') "+"~ .o_data_cell[name=website_id]:contains('My Website 2')",run:()=>null,},{content:"Check that the selected website is My Website 2",trigger:".o_search_options .dropdown-toggle:contains('My Website 2')",run:()=>null,}]);tour.register('website_page_manager_direct_access',{test:true,url:'/web#action=website.action_website_pages_list',},[{content:"Check that the homepage is the one of My Website 2",trigger:".o_list_table .o_data_row .o_data_cell[name=name]:contains('Home') "+"~ .o_data_cell[name=website_id]:contains('My Website 2')",run:()=>null,},{content:"Check that the selected website is My Website 2",trigger:".o_search_options .dropdown-toggle:contains('My Website 2')",run:()=>null,}]);return __exports;});;

/* /website/static/tests/tours/parallax.js */
odoo.define("website.tour.parallax",function(require){"use strict";const wTourUtils=require("website.tour_utils");const coverSnippet={id:"s_cover",name:"Cover"};wTourUtils.registerWebsitePreviewTour("test_parallax",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop(coverSnippet),wTourUtils.clickOnSnippet(coverSnippet),wTourUtils.changeOption("BackgroundOptimize","we-toggler"),wTourUtils.changeOption("BackgroundOptimize",'we-button[data-gl-filter="blur"]'),{content:"Check that the Cover snippet has the Blur filter on its background image",trigger:"iframe .s_cover span[data-gl-filter='blur']",run:()=>{},},wTourUtils.changeOption("Parallax","we-toggler"),wTourUtils.changeOption("Parallax",'we-button[data-select-data-attribute="0"]'),{content:"Check that the data related to the filter have been transferred to the new target",trigger:"iframe .s_cover[data-gl-filter='blur']",run:()=>{},},{content:"Check that the 'o_modified_image_to_save' class has been transferred to the new target",trigger:"iframe .s_cover.o_modified_image_to_save",run:()=>{},},wTourUtils.changeOption("Parallax","we-toggler"),wTourUtils.changeOption("Parallax",'we-button[data-select-data-attribute="1"]'),{content:"Check that the 'o_modified_image_to_save' class has been deleted from the old target",trigger:"iframe .s_cover:not(.o_modified_image_to_save)",run:()=>{},},{content:"Check that the 'o_modified_image_to_save' class has been transferred to the new target",trigger:"iframe span.s_parallax_bg.o_modified_image_to_save",run:()=>{},},{content:"Check that the data related to the filter have been transferred to the new target",trigger:"iframe span.s_parallax_bg[data-gl-filter='blur']",run:()=>{},},wTourUtils.changeOption("Parallax","we-toggler"),wTourUtils.changeOption("Parallax",'we-button[data-select-data-attribute="1.5"]'),{content:"Check that the option was correctly applied",trigger:'iframe span.s_parallax_bg[style*=top][style*=bottom][style*=transform]',run:()=>{},},...wTourUtils.clickOnSave(),...wTourUtils.clickOnEditAndWaitEditMode(),{content:"The parallax should not add o_dirty when entering edit mode",trigger:'iframe #wrap:not(.o_dirty)',run:()=>{},},]);});;

/* /website/static/tests/tours/public_user_editor.js */
odoo.define('website.tour.public_user_editor_dep_widget',function(require){'use strict';const publicWidget=require('web.public.widget');const wysiwygLoader=require('web_editor.loader');publicWidget.registry['public_user_editor_test']=publicWidget.Widget.extend({selector:'textarea.o_public_user_editor_test_textarea',start:async function(){await this._super(...arguments);await wysiwygLoader.loadFromTextarea(this,this.el,{});},});});odoo.define('website.tour.public_user_editor',function(require){'use strict';const tour=require('web_tour.tour');tour.register('public_user_editor',{test:true,},[{trigger:'.note-editable',run:function(){},}]);});;

/* /website/static/tests/tours/reset_password.js */
odoo.define('website.tour_reset_password',function(require){'use strict';var tour=require('web_tour.tour');require('web.dom_ready');tour.register('website_reset_password',{test:true,},[{content:"fill new password",trigger:'.oe_reset_password_form input[name="password"]',run:"text adminadmin"},{content:"fill confirm password",trigger:'.oe_reset_password_form input[name="confirm_password"]',run:"text adminadmin"},{content:"submit reset password form",trigger:'.oe_reset_password_form button[type="submit"]',},{content:"check that we're logged in",trigger:'.oe_topbar_name:contains("The King")',run:function(){}},]);});;

/* /website/static/tests/tours/restricted_editor.js */
odoo.define("website.tour.restricted_editor",function(require){"use strict";var wTourUtils=require("website.tour_utils");wTourUtils.registerWebsitePreviewTour("restricted_editor",{test:true,url:"/",},[...wTourUtils.clickOnEditAndWaitEditMode(),]);});;

/* /website/static/tests/tours/rte.js */
odoo.define('website.tour.rte',function(require){'use strict';var session=require('web.session');const wTourUtils=require('website.tour_utils');var domReady=new Promise(function(resolve){$(resolve);});var ready=Promise.all([domReady,session.is_bound]);wTourUtils.registerWebsitePreviewTour('rte_translator',{test:true,url:'/',wait_for:ready,},[{content:"click language dropdown",trigger:'iframe .js_language_selector .dropdown-toggle',},{content:"click on Add a language",trigger:'iframe a.o_add_language',},{content:"type Parseltongue",trigger:'div[name="lang_ids"] .o_input_dropdown input',run:'text Parseltongue',},{content:'select Parseltongue',trigger:'.dropdown-item:contains(Parseltongue)',},{content:"load Parseltongue",trigger:'.modal-footer .btn-primary',extra_trigger:'.modal-dialog div[name="lang_ids"] .rounded-pill .o_tag_badge_text:contains(Parseltongue)',},{content:"click language dropdown (2)",trigger:'iframe .js_language_selector .dropdown-toggle',timeout:60000,},{content:"go to english version",trigger:'iframe .js_language_selector a[data-url_code="en"]',extra_trigger:'iframe html[lang*="pa-GB"]',},{content:"Open new page menu",trigger:".o_menu_systray .o_new_content_container > a",extra_trigger:'iframe html[lang*="en-US"]',consumeVisibleOnly:true,},{content:"click on new page",trigger:'.o_new_content_element a',},{content:"insert file name",trigger:'.modal-dialog input[type="text"]',run:'text rte_translator.xml',},{content:"create file",trigger:'.modal-dialog button.btn-primary',extra_trigger:'input[type="text"]:propValue(rte_translator.xml)',},{content:"click on the 'page manager' button",trigger:'button[name="website.action_website_pages_list"]',},{content:"click on the record to display the xml file in the iframe",trigger:'td:contains("rte_translator.xml")',},{content:"Open new page menu",trigger:".o_menu_systray .o_new_content_container > a",consumeVisibleOnly:true,},{content:"click on new page",trigger:'.o_new_content_element a',},{content:"insert page name",trigger:'.modal-dialog input[type="text"]',run:'text rte_translator',},{content:"create page",trigger:'.modal-dialog button.btn-primary',extra_trigger:'input[type="text"]:propValue(rte_translator)',},{content:"drop a snippet",trigger:"#snippet_structure .oe_snippet:eq(1) .oe_snippet_thumbnail",run:'drag_and_drop iframe #wrap',},{content:"change content",trigger:'iframe #wrap',run:function(){$('iframe:not(.o_ignore_in_tour)').contents().find("#wrap p:first").replaceWith('<p>Write one or <font style="background-color: yellow;">two paragraphs <b>describing</b></font> your product or\
                <font style="color: rgb(255, 0, 0);">services</font>. To be successful your content needs to be\
                useful to your <a href="/999">readers</a>.</p> <input value="test translate default value" placeholder="test translate placeholder"/>\
                <p>&lt;b&gt;&lt;/b&gt; is an HTML&nbsp;tag &amp; is empty</p>');$('iframe:not(.o_ignore_in_tour)').contents().find("#wrap img").attr("title","test translate image title");}},{content:"save",trigger:'button[data-action=save]',extra_trigger:'iframe #wrap p:first b',},{content:"click language dropdown (3)",trigger:'iframe .js_language_selector .dropdown-toggle',extra_trigger:'iframe body:not(.editor_enable)',},{content:"click on Parseltongue version",trigger:'iframe .js_language_selector a[data-url_code="pa_GB"]',extra_trigger:'iframe html[lang*="en"]',},{content:"translate",trigger:'.o_menu_systray .o_translate_website_container > a',extra_trigger:'iframe html:not(:has(#wrap p span))',},{content:"close modal",trigger:'.modal-footer .btn-secondary',},{content:"check if translation is activate",trigger:'iframe [data-oe-translation-initial-sha]',},{content:"translate text",extra_trigger:'#oe_snippets.o_loaded',trigger:'iframe #wrap p font:first',run:function(actionHelper){actionHelper.text('translated Parseltongue text');const Wysiwyg=odoo.__DEBUG__.services['web_editor.wysiwyg'];Wysiwyg.setRange(this.$anchor.contents()[0],22);this.$anchor.trigger($.Event("keyup",{key:'_',keyCode:95}));this.$anchor.trigger('input');},},{content:"translate text with special char",trigger:'iframe #wrap input + p span:first',run:function(actionHelper){actionHelper.click();this.$anchor.prepend('&lt;{translated}&gt;');const Wysiwyg=odoo.__DEBUG__.services['web_editor.wysiwyg'];Wysiwyg.setRange(this.$anchor.contents()[0],0);this.$anchor.trigger($.Event("keyup",{key:'_',keyCode:95}));this.$anchor.trigger('input');},},{content:"click on input",trigger:'iframe #wrap input:first',extra_trigger:'iframe #wrap .o_dirty font:first:contains(translated Parseltongue text)',run:'click',},{content:"translate placeholder",trigger:'.modal-dialog input:first',run:'text test Parseltongue placeholder',},{content:"translate default value",trigger:'.modal-dialog input:last',run:'text test Parseltongue default value',},{content:"close modal",trigger:'.modal-footer .btn-primary',extra_trigger:'.modal input:propValue(test Parseltongue placeholder)',},{content:"check: input marked as translated",trigger:'iframe input[placeholder="test Parseltongue placeholder"].oe_translated',run:()=>{},},{content:"save translation",trigger:'button[data-action=save]',},{content:"check: content is translated",trigger:'iframe #wrap p font:first:contains(translated Parseltongue text)',extra_trigger:'iframe body:not(.editor_enable)',run:function(){},},{content:"check: content with special char is translated",trigger:"iframe #wrap input + p:contains(<{translated}><b></b> is an HTML\xa0tag & )",run:function(){},},{content:"check: placeholder translation",trigger:'iframe input[placeholder="test Parseltongue placeholder"]',run:function(){},},{content:"check: default value translation",trigger:'iframe input[value="test Parseltongue default value"]',run:()=>{},},{content:"open language selector",trigger:'iframe .js_language_selector button:first',extra_trigger:'iframe html[lang*="pa-GB"]:not(:has(#wrap p span))',},{content:"return to english version",trigger:'iframe .js_language_selector a[data-url_code="en"]',},{content:"edit english version",trigger:'.o_edit_website_container > a',extra_trigger:'iframe body:not(:has(#wrap p font:first:containsExact(paragraphs <b>describing</b>)))',},{content:"select text",extra_trigger:'#oe_snippets.o_loaded',trigger:'iframe #wrap p',run:function(actionHelper){actionHelper.click();var el=this.$anchor[0];var mousedown=document.createEvent('MouseEvents');mousedown.initMouseEvent('mousedown',true,true,window,0,0,0,0,0,false,false,false,false,0,el);el.dispatchEvent(mousedown);var mouseup=document.createEvent('MouseEvents');const Wysiwyg=odoo.__DEBUG__.services['web_editor.wysiwyg'];Wysiwyg.setRange(el.childNodes[2],6,el.childNodes[2],13);mouseup.initMouseEvent('mouseup',true,true,window,0,0,0,0,0,false,false,false,false,0,el);el.dispatchEvent(mouseup);},},{content:"save new change",trigger:'button[data-action=save]',},{content:"click language dropdown (4)",trigger:'iframe .js_language_selector .dropdown-toggle',extra_trigger:'iframe body:not(.editor_enable)',},{content:"return in Parseltongue",trigger:'iframe html[lang="en-US"] .js_language_selector .js_change_lang[data-url_code="pa_GB"]',},{content:"check bis: content is translated",trigger:'iframe #wrap p font:first:contains(translated Parseltongue text)',extra_trigger:'iframe html[lang*="pa-GB"]',},{content:"check bis: placeholder translation",trigger:'iframe input[placeholder="test Parseltongue placeholder"]',},{content:"open site menu",trigger:'button[data-menu-xmlid="website.menu_site"]',},{content:"Open HTML editor",trigger:'a[data-menu-xmlid="website.menu_ace_editor"]',},{content:"Check that the editor is not showing translated content (1)",trigger:'.ace_text-layer .ace_line:contains("an HTML")',run:function(actions){var lineEscapedText=$(this.$anchor.text()).last().text();if(lineEscapedText!=="&lt;b&gt;&lt;/b&gt; is an HTML&nbsp;tag &amp; is empty"){console.error('The HTML editor should display the correct untranslated content');$('iframe:not(.o_ignore_in_tour)').contents().find('body').addClass('rte_translator_error');}},},{content:"Check that the editor is not showing translated content (2)",trigger:'iframe body:not(.rte_translator_error)',run:function(){},}]);});;

/* /website/static/tests/tours/snippet_background_edition.js */
odoo.define('@website/../tests/tours/snippet_background_edition',async function(require){'use strict';let __exports={};const weUtils=require('web_editor.utils');const wTourUtils=require('website.tour_utils');const snippets=[{id:'s_text_image',name:'Text - Image',},];const gradients=['linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)','linear-gradient(135deg, rgb(255, 222, 202) 0%, rgb(202, 115, 69) 100%)',];function typeToName(xType){return xType==='cc'?'color combinations':xType==='bg'?'background colors':'gradients';}
function switchTo(type,_name){const target=type==='cc'?'color-combinations':type==='bg'?'custom-colors':'gradients';const name=_name||typeToName(type);return{trigger:`.o_we_colorpicker_switch_pane_btn[data-target="${target}"]`,content:`Switch to ${name}`,};}
function addCheck(steps,checkX,checkNoX,xType,noSwitch=false){if(!checkX&&!checkNoX){return;}
const name=typeToName(xType);const selectorCheckX=checkX&&`.o_we_color_btn[data-color="${checkX}"].selected`;const selectorCheckNoX=checkNoX&&`.o_we_color_btn[data-color="${checkNoX}"]:not(.selected)`;const step={trigger:selectorCheckX||selectorCheckNoX,content:`The correct ${name} is marked as selected`,position:'bottom',run:()=>null,};if(!selectorCheckX&&selectorCheckNoX){step.extra_trigger=selectorCheckNoX;}
if(!noSwitch){steps.push(switchTo(xType,name));}
steps.push(step);}
function checkAndUpdateBackgroundColor({checkCC,checkNoCC,checkBg,checkNoBg,checkGradient,checkNoGradient,changeType,change,finalSelector,finalRun}){const steps=[wTourUtils.changeBackgroundColor(),];addCheck(steps,checkCC,checkNoCC,'cc',true);addCheck(steps,checkBg,checkNoBg,'bg');addCheck(steps,checkGradient,checkNoGradient,'gradient');if(changeType){steps.push(switchTo(changeType));steps.push(wTourUtils.changeOption('ColoredLevelBackground',`.o_we_color_btn[data-color="${change}"]`,'background color','top',true));steps.push({trigger:finalSelector,content:"The selected colors have been applied (CC AND (BG or GRADIENT))",position:'bottom',run:finalRun,});}
return steps;}
function updateAndCheckCustomGradient({updateStep,checkGradient}){const steps=[updateStep,{trigger:`iframe #wrapwrap section.${snippets[0].id}.o_cc1`,content:'Color combination 1 still selected',run:()=>null,}];addCheck(steps,checkGradient,checkGradient!==gradients[0]&&gradients[0],'gradient',true);return steps;}
wTourUtils.registerWebsitePreviewTour('snippet_background_edition',{url:'/',edition:true,test:true,},[wTourUtils.dragNDrop(snippets[0]),wTourUtils.clickOnSnippet(snippets[0]),...checkAndUpdateBackgroundColor({changeType:'cc',change:3,finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc3:not([class*=bg-]):not([style*="background"])`,}),...checkAndUpdateBackgroundColor({checkCC:3,changeType:'cc',change:2,finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc2:not(.o_cc3):not([class*=bg-])`,}),...checkAndUpdateBackgroundColor({checkCC:2,checkNoCC:3,changeType:'bg',change:'black-50',finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc2.bg-black-50`,}),...checkAndUpdateBackgroundColor({checkCC:2,checkBg:'black-50',changeType:'bg',change:'800',finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc2.bg-800:not(.bg-black-50)`,}),...checkAndUpdateBackgroundColor({checkCC:2,checkBg:'800',checkNoBg:'black-50',changeType:'cc',change:4,finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc4:not(.o_cc2).bg-800`,}),...checkAndUpdateBackgroundColor({checkCC:4,checkNoCC:2,checkBg:'800',changeType:'gradient',change:gradients[0],finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc4:not(.bg-800)[style*="background-image: ${gradients[0]}"]`,}),...checkAndUpdateBackgroundColor({checkCC:4,checkNoBg:'800',checkGradient:gradients[0],changeType:'gradient',change:gradients[1],finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc4[style*="background-image: ${gradients[1]}"]:not([style*="background-image: ${gradients[0]}"])`,}),...checkAndUpdateBackgroundColor({checkCC:4,checkGradient:gradients[1],checkNoGradient:gradients[0],changeType:'cc',change:1,finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc1:not(.o_cc4)[style*="background-image: ${gradients[1]}"]`,}),...checkAndUpdateBackgroundColor({checkCC:1,checkNoCC:4,checkGradient:gradients[1],}),{trigger:'.snippet-option-ColoredLevelBackground we-title',content:'Close palette',},wTourUtils.changeOption('ColoredLevelBackground','[data-name="bg_image_toggle_opt"]'),{trigger:'.o_existing_attachment_cell img',content:"Select an image in the media dialog",},{trigger:`iframe .${snippets[0].id}.o_cc.o_cc1`,run:function(){const parts=weUtils.backgroundImageCssToParts(this.$anchor.css('background-image'));if(!parts.url||!parts.url.startsWith('url(')){console.error('An image should have been added as background.');}
if(parts.gradient!==gradients[1]){console.error('The gradient should have been kept when adding the background image');}},},...checkAndUpdateBackgroundColor({checkCC:1,checkGradient:gradients[1],changeType:'gradient',change:gradients[0],finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc1:not([style*="${gradients[1]}"])`,finalRun:function(){const parts=weUtils.backgroundImageCssToParts(this.$anchor.css('background-image'));if(!parts.url||!parts.url.startsWith('url(')){console.error('The image should have been kept when changing the gradient');}
if(parts.gradient!==gradients[0]){console.error('The gradient should have been changed');}},}),wTourUtils.changeBackgroundColor(),switchTo('gradient'),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker .o_custom_gradient_scale',content:'Add step',run:'click',},checkGradient:'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',}),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker .o_slider_multi input.active',content:'Move step',run:()=>{const slider=$('.colorpicker .o_slider_multi input.active');slider.val(45);slider.trigger('click');},},checkGradient:'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(203, 94, 238) 45%, rgb(75, 225, 236) 100%)',}),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker .o_color_picker_inputs .o_hex_div input',content:'Pick step color',run:'text #FF0000',},checkGradient:'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(255, 0, 0) 45%, rgb(75, 225, 236) 100%)',}),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker .o_remove_color',content:'Delete step',run:'click',},checkGradient:'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',}),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker input[data-name="angle"]',content:'Change angle',run:'text_blur 50',},checkGradient:'linear-gradient(50deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',}),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker we-button[data-gradient-type="radial-gradient"]',content:'Switch to Radial',run:'click',},checkGradient:'radial-gradient(circle farthest-side at 25% 25%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',}),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker input[data-name="positionX"]',content:'Change X position',run:'text_blur 33',},checkGradient:'radial-gradient(circle farthest-side at 33% 25%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',}),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker input[data-name="positionY"]',content:'Change Y position',run:'text_blur 75',},checkGradient:'radial-gradient(circle farthest-side at 33% 75%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',}),...updateAndCheckCustomGradient({updateStep:{trigger:'.colorpicker we-button[data-gradient-size="closest-side"]',content:'Change color spread size',run:'click',},checkGradient:'radial-gradient(circle closest-side at 33% 75%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',}),{trigger:`.o_we_color_btn[data-color="${gradients[0]}"]`,content:`Revert to predefiend gradient ${gradients[0]}`,run:'click',},...checkAndUpdateBackgroundColor({checkCC:1,checkGradient:gradients[0],checkNoGradient:gradients[1],changeType:'bg',change:'black-75',finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc1.bg-black-75[style^="background-image: url("]:not([style*="${gradients[0]}"])`}),...checkAndUpdateBackgroundColor({checkCC:1,checkBg:'black-75',checkNoGradient:gradients[0],changeType:'gradient',change:gradients[1],finalSelector:`iframe .${snippets[0].id}.o_cc.o_cc1:not(.bg-black-75)`,finalRun:function(){const parts=weUtils.backgroundImageCssToParts(this.$anchor.css('background-image'));if(!parts.url||!parts.url.startsWith('url(')){console.error('The image should have been kept when re-adding the gradient');}
if(parts.gradient!==gradients[1]){console.error('The gradient should have been re-added');}},}),...checkAndUpdateBackgroundColor({checkCC:1,checkNoBg:'black-75',checkGradient:gradients[1],}),wTourUtils.changeOption('ColoredLevelBackground','[data-name="bg_image_toggle_opt"]','image toggle','top',true),{trigger:`iframe .${snippets[0].id}.o_cc.o_cc1[style*="background-image: ${gradients[1]}"]`,run:()=>null,},{trigger:'.o_colorpicker_reset',content:"Click on the None button of the color palette",},{trigger:`iframe .${snippets[0].id}:not(.o_cc):not(.o_cc1):not([style*="background-image"])`,content:"All color classes and properties should have been removed",run:()=>null,}]);return __exports;});;

/* /website/static/tests/tours/snippet_cache_across_websites.js */
odoo.define('@website/../tests/tours/snippet_cache_across_websites',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('snippet_cache_across_websites',{edition:true,test:true,url:'/@/'},[{content:"Check that the custom snippet is displayed",trigger:'#snippet_custom_body span:contains("custom_snippet_test")',run:()=>null,},...wTourUtils.clickOnSave(),...wTourUtils.switchWebsite(2,'My Website 2'),...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Check that the custom snippet is not here",extra_trigger:'#oe_snippets:not(:has(#snippet_custom_body span:contains("custom_snippet_test")))',trigger:'#oe_snippets:has(#snippet_custom.d-none)',run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/snippet_countdown.js */
odoo.define('@website/../tests/tours/snippet_countdown',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('snippet_countdown',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_countdown',name:'Countdown'}),wTourUtils.clickOnSnippet({id:'s_countdown',name:'Countdown'}),wTourUtils.changeOption('countdown','we-select:has([data-end-action]) we-toggler','end action'),wTourUtils.changeOption('countdown','we-button[data-end-action="message"]','end action'),wTourUtils.changeOption('countdown','we-button.toggle-edit-message','message preview'),{content:"Hover an option which has a preview",trigger:'[data-select-class="o_half_screen_height"]',run:function(actions){this.$anchor.trigger('mouseover');this.$anchor.trigger('mouseenter');},},{content:"Check that the countdown message is still displayed",trigger:'iframe .s_countdown .s_picture',run:()=>{const $previousAnchor=$('[data-select-class="o_half_screen_height"]');$previousAnchor.trigger('mouseout');$previousAnchor.trigger('mouseleave');},},wTourUtils.changeOption('countdown','we-select:has([data-end-action]) we-toggler','end action'),wTourUtils.changeOption('countdown','we-button[data-end-action="message_no_countdown"]','end action'),{content:"Check that the countdown is not displayed",trigger:'iframe .s_countdown:has(.s_countdown_canvas_wrapper:not(:visible))',run:()=>null,},{content:"Check that the message is still displayed",trigger:'iframe .s_countdown .s_picture',run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/snippet_editor_panel_options.js */
odoo.define('@website/../tests/tours/snippet_editor_panel_options',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('snippet_editor_panel_options',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_text_image',name:'Text - Image',}),{content:"Click on the first paragraph.",trigger:'iframe .s_text_image p',},{content:"The text toolbar should be visible. The paragraph should be selected.",trigger:'#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',run(){const iframeDocument=document.querySelector('.o_iframe').contentDocument;const pText=iframeDocument.querySelector('.s_text_image p').textContent;const selection=iframeDocument.getSelection().toString();if(pText!==selection){console.error("The paragraph was not correctly selected.");}},},{content:"Click on the width option.",trigger:'[data-select-class="o_container_small"]',},{content:"The snippet should have the correct class.",trigger:'iframe .s_text_image > .o_container_small',run:()=>{},},{content:"The text toolbar should still be visible, and the text still selected.",trigger:'#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',run(){const iframeDocument=document.querySelector('.o_iframe').contentDocument;const pText=iframeDocument.querySelector('.s_text_image p').textContent;const selection=iframeDocument.getSelection().toString();if(pText!==selection){console.error("The paragraph text selection was lost.");}},},{content:"Click on the anchor option",trigger:'#oe_snippets .snippet-option-anchor we-button',run(){const oldExecCommand=document.execCommand;document.execCommand=()=>true;this.$anchor[0].click();document.execCommand=oldExecCommand;}},{content:"Check the copied url from the notification toast",trigger:'.o_notification_manager .o_notification_content',run(){const{textContent}=this.$anchor[0];const url=textContent.substring(textContent.indexOf('/'));if(url.startsWith('/@')){console.error('The anchor option should target the frontend');}
const iframeDocument=document.querySelector('.o_iframe').contentDocument;const snippetId=iframeDocument.querySelector('.s_text_image').id;if(!url||url.indexOf(snippetId)<0){console.error('The anchor option does not target the correct snippet.');}},},wTourUtils.goBackToBlocks(),wTourUtils.dragNDrop({id:'s_text_block',name:'Text',}),{content:"Click on the first paragraph.",trigger:'iframe .s_text_block p',},{content:"The text toolbar should be visible. The paragraph should be selected.",trigger:'#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',run(){const iframeDocument=document.querySelector('.o_iframe').contentDocument;const pText=iframeDocument.querySelector('.s_text_block p').textContent;const selection=iframeDocument.getSelection().toString();if(pText!==selection){console.error("The paragraph was not correctly selected.");}},},{content:"Click on the columns option.",trigger:'.snippet-option-layout_column we-select',},{content:"Change the number of columns.",trigger:'.snippet-option-layout_column [data-select-count="3"]',},{content:"The snippet should have the correct number of columns.",trigger:'iframe .s_text_block .container > .row',run(){if(this.$anchor[0].childElementCount!==3){console.error("The snippet does not have the correct number of columns");}},},{content:"The text toolbar should still be visible, and the text still selected.",trigger:'#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',run(){const iframeDocument=document.querySelector('.o_iframe').contentDocument;const pText=iframeDocument.querySelector('.s_text_block p').textContent;const selection=iframeDocument.getSelection().toString();if(pText!==selection){console.error("The paragraph text selection was lost.");}},},{content:"Click on the columns option.",trigger:'.snippet-option-layout_column we-select',},{content:"Change the number of columns.",trigger:'.snippet-option-layout_column [data-select-count="0"]',},{content:"The snippet should have the correct number of columns.",trigger:'iframe .s_text_block .container:not(:has(.row))',},{content:"The text toolbar should still be visible, and the text still selected.",trigger:'#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',run(){const iframeDocument=document.querySelector('.o_iframe').contentDocument;const pText=iframeDocument.querySelector('.s_text_block p').textContent;const selection=iframeDocument.getSelection().toString();if(pText!==selection){console.error("The paragraph text selection was lost.");}},},wTourUtils.changeOption("layout_column",'we-button[data-name="grid_mode"]'),{content:"The snippet row should have the grid mode class.",trigger:"iframe .s_text_block .row.o_grid_mode",run:()=>{},},{content:"The text toolbar should still be visible, and the text still selected.",trigger:"#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container",run(){const iframeDocument=document.querySelector(".o_iframe").contentDocument;const pText=iframeDocument.querySelector(".s_text_block p").textContent;const selection=iframeDocument.getSelection().toString();if(pText!==selection){console.error("The paragraph text selection was lost.");}},},wTourUtils.changeOption("layout_column",'we-button[data-name="normal_mode"]'),{content:"The snippet row should not have the grid mode class anymore.",trigger:"iframe .s_text_block .row:not(.o_grid_mode)",run:()=>{},},{content:"The text toolbar should still be visible, and the text still selected.",trigger:"#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container",run(){const iframeDocument=document.querySelector(".o_iframe").contentDocument;const pText=iframeDocument.querySelector(".s_text_block p").textContent;const selection=iframeDocument.getSelection().toString();if(pText!==selection){console.error("The paragraph text selection was lost.");}},},{content:"Open text style dropdown.",trigger:"#style button.dropdown-toggle",},{content:"Check if dropdown opened correctly.",trigger:"#style button[data-bs-toggle=dropdown][aria-expanded=true]",run:()=>{},},{content:"Click on the first paragraph again.",trigger:"iframe .s_text_block p",},{content:"Check if dropdown closed correctly.",trigger:"#style button[data-bs-toggle=dropdown][aria-expanded=false]",run:()=>{},},...wTourUtils.clickOnSave(),]);return __exports;});;

/* /website/static/tests/tours/snippet_empty_parent_autoremove.js */
odoo.define("website.tour.snippet_empty_parent_autoremove",function(require){"use strict";const wTourUtils=require('website.tour_utils');function removeSelectedBlock(){return{content:"Remove selected block",trigger:'#oe_snippets we-customizeblock-options:nth-last-child(3) .oe_snippet_remove',};}
wTourUtils.registerWebsitePreviewTour('snippet_empty_parent_autoremove',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_text_image',name:'Text - Image',}),{content:"Click on second column",trigger:'iframe #wrap .s_text_image .row > :nth-child(2)',},removeSelectedBlock(),{content:"Click on first column",trigger:'iframe #wrap .s_text_image .row > :first-child',},removeSelectedBlock(),{content:"Check that #wrap is empty",trigger:'iframe #wrap:empty',},wTourUtils.dragNDrop({id:'s_banner',name:'Banner',}),wTourUtils.clickOnSnippet({id:'s_banner',name:'Banner',}),{content:"Check that parallax is present",trigger:'iframe #wrap .s_banner .s_parallax_bg',run:()=>null,},wTourUtils.changeOption('ColoredLevelBackground','Shape'),{content:"Check that shape is present",trigger:'iframe #wrap .s_banner .o_we_shape',run:()=>null,},{content:"Click on first column",trigger:'iframe #wrap .s_banner .row > :first-child',},removeSelectedBlock(),{content:"Check that #wrap is empty",trigger:'iframe #wrap:empty',run:()=>null,},]);});;

/* /website/static/tests/tours/snippet_image_gallery.js */
odoo.define('@website/../tests/tours/snippet_image_gallery',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('snippet_image_gallery',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_image_gallery',name:'Images Wall'}),...wTourUtils.clickOnSave(),{content:'Click on an image of the Image Wall',trigger:'iframe .s_image_gallery img',run:'click',},{content:'Check that the modal has opened properly',trigger:'iframe .s_gallery_lightbox img',run:()=>{},},]);wTourUtils.registerWebsitePreviewTour("snippet_image_gallery_remove",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_image_gallery",name:"Image Gallery",}),wTourUtils.clickOnSnippet({id:'s_image_gallery',name:'Image Gallery',}),{content:"Click on Remove all",trigger:"we-button:has(div:contains('Remove all'))",},{content:"Click on Add Images",trigger:"iframe span:contains('Add Images')",},{content:"Click on the first new image",trigger:".o_select_media_dialog img[title='s_default_image.jpg']",},{content:"Click on the second new image",trigger:".o_select_media_dialog img[title='s_default_image2.jpg']",},wTourUtils.addMedia(),{content:"Click on the image of the Image Gallery snippet",trigger:"iframe .s_image_gallery .carousel-item.active  img",},{content:"Check that the Snippet Editor of the clicked image has been loaded",trigger:"we-customizeblock-options span:contains('Image'):not(:contains('Image Gallery'))",run:()=>null,},{content:"Click on Remove Block",trigger:".o_we_customize_panel we-title:has(span:contains('Image Gallery')) we-button[title='Remove Block']",},{content:"Check that the Image Gallery snippet has been removed",trigger:"iframe #wrap:not(:has(.s_image_gallery))",run:()=>null,}]);wTourUtils.registerWebsitePreviewTour("snippet_image_gallery_reorder",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_image_gallery",name:"Image Gallery",}),{content:"Click on the first image of the snippet",trigger:"iframe .s_image_gallery .carousel-item.active img",},wTourUtils.changeOption('ImageTools','we-select:contains("Filter") we-toggler'),wTourUtils.changeOption('ImageTools','[data-gl-filter="blur"]'),{content:"Check that the image has the correct filter",trigger:".snippet-option-ImageTools we-select:contains('Filter') we-toggler:contains('Blur')",run:()=>null,},{content:"Click on move to next",trigger:".snippet-option-gallery_img we-button[data-position='next']",},{content:"Check that the image has been moved",trigger:"iframe .s_image_gallery .carousel-item.active img[data-index='1']",run:()=>null,},{content:"Click on the footer to reload the editor panel",trigger:"iframe #footer",},{content:"Check that the footer options have been loaded",trigger:".snippet-option-HideFooter we-button:contains('Page Visibility')",run:()=>null,},{content:"Click on the moved image",trigger:"iframe .s_image_gallery .carousel-item.active img[data-index='1'][data-gl-filter='blur']",},{content:"Check that the image still has the correct filter",trigger:".snippet-option-ImageTools we-select:contains('Filter') we-toggler:contains('Blur')",run:()=>null,},{content:"Click to access next image",trigger:"iframe .s_image_gallery .carousel-control-next",},{content:"Check that the option has changed",trigger:".snippet-option-ImageTools we-select:contains('Filter') we-toggler:not(:contains('Blur'))",run:()=>null,},{content:"Click to access previous image",trigger:"iframe .s_image_gallery .carousel-control-prev",},{content:"Check that the option is restored",trigger:".snippet-option-ImageTools we-select:contains('Filter') we-toggler:contains('Blur')",run:()=>null,}]);wTourUtils.registerWebsitePreviewTour("snippet_image_gallery_thumbnail_update",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_image_gallery",name:"Image Gallery",}),wTourUtils.clickOnSnippet({id:"s_image_gallery",name:"Image Gallery",}),wTourUtils.changeOption("gallery","we-button[data-add-images]"),{content:"Click on the default image",trigger:".o_select_media_dialog img[title='s_default_image.jpg']",},wTourUtils.addMedia(),{content:"Check that the new image has been added",trigger:"iframe .s_image_gallery:has(img[data-index='3'])",run:()=>null,},{content:"Check that the thumbnail of the first image has not been changed",trigger:"iframe .s_image_gallery ul.carousel-indicators li:first-child[style='background-image: url(/web/image/website.library_image_08)']",run:()=>null,}]);return __exports;});;

/* /website/static/tests/tours/snippet_images_wall.js */
odoo.define('@website/../tests/tours/snippet_images_wall',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");const selectSignImageStep={content:"Click on sign image",extra_trigger:".o_we_customize_panel:not(:has(.snippet-option-gallery_img))",trigger:"iframe .s_image_gallery img[data-original-src*='sign']",};const reselectSignImageSteps=[{content:"Select footer",extra_trigger:"iframe .s_image_gallery .o_masonry_col:nth-child(3):has(img[data-index='5'])",trigger:"iframe footer",},{content:"Select social media in footer",trigger:"iframe footer .s_social_media",},{content:"Check that the social media options are displayed",trigger:"we-list[data-name='social_media_list']",run:()=>{},},selectSignImageStep];wTourUtils.registerWebsitePreviewTour("snippet_images_wall",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_images_wall",name:"Images Wall",}),wTourUtils.clickOnSnippet({id:"s_image_gallery",name:"Images Wall",}),selectSignImageStep,{content:"Click on add a link",trigger:".snippet-option-ReplaceMedia we-button[data-set-link]",},{content:"Change the link of the image",trigger:".snippet-option-ReplaceMedia [data-set-url] input",run:"text /contactus",},{content:"Click on move to previous",trigger:".snippet-option-gallery_img we-button[data-position='prev']",},{content:"Check if sign is in second column",trigger:"iframe .s_image_gallery .o_masonry_col:nth-child(2):has(a[href='/contactus'] img[data-index='1'][data-original-src*='sign'])",run:()=>{},},...reselectSignImageSteps,{content:"Click on move to first",trigger:".snippet-option-gallery_img we-button[data-position='first']",},{content:"Check if sign is in first column",trigger:"iframe .s_image_gallery .o_masonry_col:nth-child(1):has(img[data-index='0'][data-original-src*='sign'])",run:()=>{},},...reselectSignImageSteps,{content:"Click on move to previous",trigger:".snippet-option-gallery_img we-button[data-position='prev']",},{content:"Check if sign is in third column",trigger:"iframe .s_image_gallery .o_masonry_col:nth-child(3):has(img[data-index='5'][data-original-src*='sign'])",run:()=>{},},...reselectSignImageSteps,{content:"Click on move to next",trigger:".snippet-option-gallery_img we-button[data-position='next']",},{content:"Check if sign is in first column",trigger:"iframe .s_image_gallery .o_masonry_col:nth-child(1):has(img[data-index='0'][data-original-src*='sign'])",run:()=>{},},...reselectSignImageSteps,{content:"Click on move to last",trigger:".snippet-option-gallery_img we-button[data-position='last']",},{content:"Check layout",trigger:"iframe .s_image_gallery .o_masonry_col:nth-child(3):has(img[data-index='5'][data-original-src*='sign'])",run:()=>{},}]);return __exports;});;

/* /website/static/tests/tours/snippet_popup_add_remove.js */
odoo.define('@website/../tests/tours/snippet_popup_add_remove',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('snippet_popup_add_remove',{test:true,url:'/',edition:true,},[{content:'Drop s_popup snippet',trigger:'.oe_snippet:has( > [data-snippet="s_popup"]) .oe_snippet_thumbnail',run:"drag_and_drop iframe #wrap",},{content:'Edit s_popup snippet',in_modal:false,trigger:'iframe #wrap.o_editable [data-snippet="s_popup"] .row > div',},{content:'Check s_popup setting are loaded, wait panel is visible',in_modal:false,trigger:'.o_we_customize_panel',run:()=>null,},{content:`Remove the s_popup snippet`,in_modal:false,trigger:'.o_we_customize_panel we-customizeblock-options:contains("Popup") we-button.oe_snippet_remove:first',},{content:'Check the s_popup was removed',in_modal:false,trigger:'iframe #wrap.o_editable:not(:has([data-snippet="s_popup"]))',run:()=>null,},{content:"Drop the snippet again.",trigger:'#oe_snippets .oe_snippet:has(> [data-snippet="s_popup"]) .oe_snippet_thumbnail',run:"drag_and_drop iframe #wrap",},{content:"The popup should be in the invisible elements panel.",in_modal:false,trigger:'.o_we_invisible_el_panel .o_we_invisible_entry',run:()=>null,},{content:"Click on the 'undo' button.",in_modal:false,trigger:'#oe_snippets button[data-action="undo"]',},{content:"Check that the s_popup was removed.",in_modal:false,trigger:'iframe #wrap.o_editable:not(:has([data-snippet="s_popup"]))',run:()=>null,},{content:"The invisible elements panel should also be removed.",trigger:'#oe_snippets:has(.o_we_invisible_el_panel.d-none)',run:()=>null,}]);return __exports;});;

/* /website/static/tests/tours/snippet_popup_and_animations.js */
odoo.define('@website/../tests/tours/snippet_popup_and_animations',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");const snippets=[{id:"s_popup",name:"Popup",},{id:"s_media_list",name:"Media List",},{id:"s_three_columns",name:"Columns",},];const setOnScrollAnim=function(){return[wTourUtils.changeOption("WebsiteAnimate",'we-select[data-is-animation-type-selection="true"] we-toggler'),wTourUtils.changeOption("WebsiteAnimate",'we-button[data-animation-mode="onScroll"]'),wTourUtils.changeOption("WebsiteAnimate",'we-select[data-name="animation_effect_opt"] we-toggler'),wTourUtils.changeOption("WebsiteAnimate",'we-button[data-name="o_anim_slide_in_opt"]'),];};wTourUtils.registerWebsitePreviewTour("snippet_popup_and_animations",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop(snippets[1]),wTourUtils.dragNDrop(snippets[1]),wTourUtils.dragNDrop(snippets[2]),wTourUtils.clickOnElement("3rd columns","iframe .s_three_columns .row > :last-child"),...setOnScrollAnim(),{content:"Open the Cookies Bar.",trigger:".o_we_invisible_el_panel .o_we_invisible_entry",},{content:"Scroll to top",trigger:"iframe #wrapwrap",extra_trigger:"iframe #website_cookies_bar:not(.d-none)",run:function(){const animatedColumnEl=this.$anchor[0].querySelector(".s_three_columns .row > :last-child");if(Math.round(parseFloat(animatedColumnEl.style.animationDelay))!==-1){console.error("The scroll animation in the page did not start properly with the cookies bar open.");}
this.$anchor[0].scrollTo({top:0,left:0,behavior:'smooth'});},},{content:"Wait for the page to be scrolled to the top.",trigger:"iframe .s_three_columns .row > :last-child:not(.o_animating)",extra_trigger:"iframe header#top:not(.o_header_affixed)",run:function(){if(Math.round(parseFloat(this.$anchor[0].style.animationDelay))!==0){console.error("The scroll animation in the page did not end properly with the cookies bar open.");}},},{content:"Close the Cookies Bar.",trigger:".o_we_invisible_el_panel .o_we_invisible_entry",run:"click",},wTourUtils.dragNDrop(snippets[0]),wTourUtils.dragNDrop(snippets[1]),{content:"Drag the Columns building block and drop it at the bottom of the popup.",trigger:'#oe_snippets .oe_snippet[name="Columns"] .oe_snippet_thumbnail:not(.o_we_already_dragging)',extra_trigger:".o_website_preview.editor_enable.editor_has_snippets",run:"drag_and_drop iframe #wrapwrap .modal-content .s_media_list .container > .row > :last-child",},wTourUtils.clickOnElement("3rd columns","iframe .s_popup .s_three_columns .row > :last-child"),...setOnScrollAnim(),{content:"Verify the animation delay of the animated element in the popup at the beginning",trigger:"iframe .s_popup .modal",run:function(){const animatedColumnEl=this.$anchor[0].querySelector(".s_three_columns .row > :last-child");if(Math.round(parseFloat(animatedColumnEl.style.animationDelay))!==-1){console.error("The scroll animation in the modal did not start properly.");}
this.$anchor[0].closest(".modal").scrollTo({top:0,left:0,behavior:'smooth'});},},{content:"Wait until the column is no longer animated/visible.",trigger:"iframe .s_popup .s_three_columns .row > :last-child:not(.o_animating)",run:function(){if(Math.round(parseFloat(this.$anchor[0].style.animationDelay))!==0){console.error("The scroll animation in the modal did not end properly.");}},},]);return __exports;});;

/* /website/static/tests/tours/snippet_popup_and_scrollbar.js */
odoo.define('@website/../tests/tours/snippet_popup_and_scrollbar',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");const snippets=[{id:"s_popup",name:"Popup",},{id:"s_media_list",name:"Media List",},];const checkScrollbar=function(hasScrollbar){return{content:`Check that the #wrapwrap ${hasScrollbar ? "has" : "does not have"} a vertical scrollbar.`,trigger:`iframe ${hasScrollbar ? "body:not(.modal-open)" : "body.modal-open"}`,run:function(){const wrapwrapEl=this.$anchor[0].querySelector("#wrapwrap");const wrapwrapStyle=window.getComputedStyle(wrapwrapEl);if(!hasScrollbar&&(wrapwrapStyle.overflow!=="hidden"||parseFloat(wrapwrapStyle.paddingRight)<1)){console.error("error The #wrapwrap vertical scrollbar should be hidden");}else if(hasScrollbar&&(wrapwrapStyle.overflow==="hidden"||parseFloat(wrapwrapStyle.paddingRight)>0)){console.error("error The #wrapwrap vertical scrollbar should be displayed");}},};};const toggleBackdrop=function(){return wTourUtils.changeOption('SnippetPopup','we-button[data-name="popup_backdrop_opt"] we-checkbox','backdrop');};wTourUtils.registerWebsitePreviewTour("snippet_popup_and_scrollbar",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop(snippets[1]),wTourUtils.dragNDrop(snippets[0]),checkScrollbar(false),wTourUtils.clickOnSnippet(snippets[0]),toggleBackdrop(),checkScrollbar(true),wTourUtils.goBackToBlocks(),{content:"Drag the Media List block and drop it in the popup.",trigger:"#oe_snippets .oe_snippet:has(> [data-snippet='s_media_list']) .oe_snippet_thumbnail",run:"drag_and_drop iframe #wrap .s_popup .modal-content.oe_structure",},checkScrollbar(false),{content:"Select the Media List snippet in the Popup.",trigger:"iframe #wrap .s_popup .modal-content .s_media_list",},{content:"Remove the Media List snippet in the Popup.",trigger:"iframe .oe_overlay.oe_active .oe_snippet_remove",},checkScrollbar(true),toggleBackdrop(),checkScrollbar(false),{content:"Close the Popup.",trigger:".o_we_invisible_el_panel .o_we_invisible_entry",},checkScrollbar(true),{content:"Open the Cookies Bar.",trigger:".o_we_invisible_el_panel .o_we_invisible_entry:last-child",},checkScrollbar(true),toggleBackdrop(),checkScrollbar(false),toggleBackdrop(),checkScrollbar(true),{content:"Open the Popup.",trigger:".o_we_invisible_el_panel .o_we_invisible_entry",},checkScrollbar(false),wTourUtils.goBackToBlocks(),{content:"Drag the Media List block and drop it in the popup.",trigger:"#oe_snippets .oe_snippet:has(> [data-snippet='s_media_list']) .oe_snippet_thumbnail",run:"drag_and_drop iframe #wrap .s_popup .modal-content.oe_structure",},checkScrollbar(false),wTourUtils.clickOnSnippet(snippets[0]),{content:"Remove the s_popup snippet",trigger:".o_we_customize_panel we-customizeblock-options:contains('Popup') we-button.oe_snippet_remove:first",in_modal:false,run:"click",},checkScrollbar(true),wTourUtils.goBackToBlocks(),{content:"Drag a Media List snippet and drop it in the Cookies Bar.",trigger:"#oe_snippets .oe_snippet:has(> [data-snippet='s_media_list']) .oe_snippet_thumbnail",run:"drag_and_drop iframe #website_cookies_bar .modal-content.oe_structure",},{content:"Select the Media List snippet in the Cookies Bar.",trigger:"iframe #website_cookies_bar .modal-content .s_media_list",},{content:"Duplicate the Media List snippet",trigger:".o_we_customize_panel we-customizeblock-options:contains('Media List') we-button.oe_snippet_clone:first",in_modal:false,run:"click",},checkScrollbar(false),{content:"Remove the first Media List snippet in the Cookies Bar.",trigger:"iframe .oe_overlay.oe_active .oe_snippet_remove",},{content:"Remove the second Media List snippet in the Cookies Bar.",trigger:"iframe .oe_overlay.oe_active .oe_snippet_remove",},checkScrollbar(true),]);return __exports;});;

/* /website/static/tests/tours/snippet_social_media.js */
odoo.define('@website/../tests/tours/snippet_social_media',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const socialRaceConditionClass='social_media_race_condition';const preventRaceConditionStep=[{content:"Wait a few ms to avoid race condition",extra_trigger:`body:not(.${socialRaceConditionClass})`,trigger:'iframe .s_social_media',run(){setTimeout(()=>{document.body.classList.add(socialRaceConditionClass);},500);}},{content:"Check the race condition class is added after a few ms",trigger:`body.${socialRaceConditionClass}`,run(){document.body.classList.remove(socialRaceConditionClass);}}];const replaceIconByImage=function(url){return[{content:"Replace the icon by an image",trigger:`iframe .s_social_media a[href='${url}'] i.fa`,run:"dblclick",},{content:"Go to the Images tab in the media dialog",trigger:".o_select_media_dialog .o_notebook_headers .nav-item a:contains('Images')",},{content:"Select the image",trigger:".o_select_media_dialog img[title='s_banner_default_image.jpg']",},...preventRaceConditionStep,];};const addNewSocialNetwork=function(optionIndex,linkIndex,url,replaceIcon=false){const replaceIconByImageSteps=replaceIcon?replaceIconByImage("https://www.example.com"):[];return[{content:"Click on Add New Social Network",trigger:'we-list we-button.o_we_list_add_optional',},{content:"Ensure new option is found",trigger:`we-list table input:eq(${optionIndex})[data-list-position=${optionIndex}][data-dom-position=${linkIndex}][data-undeletable=false]`,run:()=>{},},{content:"Ensure new link is found",trigger:`iframe .s_social_media:has(a:eq(${linkIndex})[href='https://www.example.com'])`,run:()=>{},},...replaceIconByImageSteps,{content:"Change added Option label",trigger:`we-list table input:eq(${optionIndex})`,run:`text ${url}`,},{content:"Ensure new link is changed",trigger:`iframe .s_social_media:has(a:eq(${linkIndex})[href='${url}'])`,run:()=>{},},...preventRaceConditionStep,];};wTourUtils.registerWebsitePreviewTour('snippet_social_media',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_social_media',name:'Social Media'}),wTourUtils.clickOnSnippet({id:'s_social_media',name:'Social Media'}),...addNewSocialNetwork(6,6,'https://www.youtu.be/y7TlnAv6cto'),{content:'Click on the toggle to hide Facebook',trigger:'we-list table we-button.o_we_user_value_widget',run:'click',},{content:"Ensure twitter became first",trigger:'iframe .s_social_media:has(a:eq(0)[href="/website/social/twitter"])',run:()=>{},},{content:'Drag the facebook link at the end of the list',trigger:'we-list table we-button.o_we_drag_handle',position:'bottom',run:"drag_and_drop we-list table tr:last-child",},{content:'Check drop completed',trigger:'we-list table input:eq(6)[data-media="facebook"]',run:()=>{},},...preventRaceConditionStep,...addNewSocialNetwork(7,6,'https://whatever.it/1EdSw9X'),...addNewSocialNetwork(8,7,'https://instagr.am/odoo.official/'),{content:"Check if the result is correct before removing",trigger:"iframe .s_social_media"+":has(a:eq(0)[href='/website/social/twitter'])"+":has(a:eq(1)[href='/website/social/linkedin'])"+":has(a:eq(2)[href='/website/social/youtube'])"+":has(a:eq(3)[href='/website/social/instagram'])"+":has(a:eq(4)[href='/website/social/github'])"+":has(a:eq(5)[href='https://www.youtu.be/y7TlnAv6cto']:has(i.fa-youtube))"+":has(a:eq(6)[href='https://whatever.it/1EdSw9X']:has(i.fa-pencil))"+":has(a:eq(7)[href='https://instagr.am/odoo.official/']:has(i.fa-instagram))",run:()=>{},},{content:'Change custom social to unsupported link',trigger:'we-list table input:eq(5)',run:'text https://www.paypal.com/abc',},{content:"Ensure paypal icon is found",trigger:"iframe .s_social_media"+":has(a:eq(5)[href='https://www.paypal.com/abc']:has(i.fa-paypal))",run:()=>{},},...preventRaceConditionStep,{content:'Delete the custom link',trigger:'we-list we-button.o_we_select_remove_option',run:'click',},{content:"Ensure custom link was removed",trigger:'iframe .s_social_media:has(a:eq(5)[href="https://whatever.it/1EdSw9X"]:has(i.fa-pencil))',run:()=>{},},{content:'Click on the toggle to show Facebook',trigger:'we-list table we-button.o_we_user_value_widget:not(.active)',run:'click',},{content:"Check if the result is correct after removing",trigger:"iframe .s_social_media"+":has(a:eq(0)[href='/website/social/twitter'])"+":has(a:eq(1)[href='/website/social/linkedin'])"+":has(a:eq(2)[href='/website/social/youtube'])"+":has(a:eq(3)[href='/website/social/instagram'])"+":has(a:eq(4)[href='/website/social/github'])"+":has(a:eq(5)[href='/website/social/facebook'])"+":has(a:eq(6)[href='https://whatever.it/1EdSw9X']:has(i.fa-pencil))"+":has(a:eq(7)[href='https://instagr.am/odoo.official/']:has(i.fa-instagram))",run:()=>{},},{content:'Change url of the DB instagram link',trigger:'we-list table input:eq(3)',run:'text https://instagram.com/odoo.official/',},{content:'Save',trigger:'button[data-action=save]',run:function(){setTimeout(()=>{this.$anchor[0].click();},500);},},{content:"Wait until save's calls are finished",trigger:"iframe body:not(.editor_enable)",run:function(){},},...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.clickOnSnippet({id:'s_social_media',name:'Social Media',}),{content:"Check if we can still change custom icons",trigger:'iframe .s_social_media a[href="https://whatever.it/1EdSw9X"] i.fa-pencil',run:'dblclick',},{content:"Select a new icon",trigger:'.o_select_media_dialog .fa-heart',},{content:"Check if the result is correct after setting the icon",trigger:"iframe .s_social_media"+":has(a:eq(0)[href='/website/social/twitter'])"+":has(a:eq(1)[href='/website/social/linkedin'])"+":has(a:eq(2)[href='/website/social/youtube'])"+":has(a:eq(3)[href='/website/social/instagram'])"+":has(a:eq(4)[href='/website/social/github'])"+":has(a:eq(5)[href='/website/social/facebook'])"+":has(a:eq(6)[href='https://whatever.it/1EdSw9X']:has(i.fa-heart))"+":has(a:eq(7)[href='https://instagr.am/odoo.official/']:has(i.fa-instagram))",run:()=>{},},...addNewSocialNetwork(8,8,"https://google.com",true),...replaceIconByImage("/website/social/twitter"),...addNewSocialNetwork(9,9,"https://facebook.com"),{content:"Check if the result is correct after adding images",trigger:"iframe .s_social_media"+":has(a:eq(0)[href='/website/social/twitter']:has(img))"+":has(a:eq(8)[href='https://google.com']:has(img))"+":has(a:eq(9)[href='https://facebook.com']:has(img))",run:()=>{},},...wTourUtils.clickOnSave(),]);return __exports;});;

/* /website/static/tests/tours/snippet_table_of_content.js */
odoo.define('@website/../tests/tours/snippet_table_of_content',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const scrollToHeading=function(position){return{content:`Scroll to h1 number ${position}`,trigger:`iframe h1:eq(${position})`,run:function(){this.$anchor[0].scrollIntoView(true);},};};const checkTOCNavBar=function(tocPosition,activeHeaderPosition){return{content:`Check that the header ${activeHeaderPosition} is active for TOC ${tocPosition}`,trigger:`iframe .s_table_of_content:eq(${tocPosition}) .table_of_content_link:eq(${activeHeaderPosition}).active `,run:()=>{},};};wTourUtils.registerWebsitePreviewTour('snippet_table_of_content',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop({id:'s_table_of_content',name:'Table of Content'}),wTourUtils.dragNDrop({id:'s_table_of_content',name:'Table of Content'}),wTourUtils.dragNDrop({id:'s_banner',name:'Banner'}),...wTourUtils.clickOnSave(),checkTOCNavBar(0,0),checkTOCNavBar(1,0),scrollToHeading(1),checkTOCNavBar(0,1),checkTOCNavBar(1,0),scrollToHeading(2),checkTOCNavBar(1,0),scrollToHeading(3),checkTOCNavBar(1,1),...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Click on the first TOC's title",trigger:'iframe .s_table_of_content:eq(0) h1',},{content:"Hide the first TOC on mobile",trigger:'[data-toggle-device-visibility="no_mobile"]',},{content:"Click on the second TOC's title",trigger:'iframe .s_table_of_content:eq(1) h1',},{content:"Hide the second TOC on desktop",trigger:'[data-toggle-device-visibility="no_desktop"]',},...wTourUtils.clickOnSave(),{content:"Check that we have the good TOC on desktop",trigger:'iframe .s_table_of_content.o_snippet_mobile_invisible',run:()=>{if($(document.querySelector('iframe .s_table_of_content.o_snippet_desktop_invisible')).is(':visible')){console.error('The mobile TOC should not be visible on desktop');}},},{content:"Toggle the mobile view",trigger:'.o_mobile_preview',},{content:"Check that we have the good TOC on mobile",trigger:'iframe .s_table_of_content.o_snippet_desktop_invisible',run:()=>{if($(document.querySelector('iframe .s_table_of_content.o_snippet_mobile_invisible')).is(':visible')){console.error('The desktop TOC should not be visible on mobile');}},},]);return __exports;});;

/* /website/static/tests/tours/snippet_translation.js */
odoo.define('@website/../tests/tours/snippet_translation',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('snippet_translation',{url:'/',edition:true,test:true,},[wTourUtils.dragNDrop({name:'Cover'}),{content:"Check that contact us contain Parseltongue",trigger:'iframe .s_cover .btn-primary:contains("Contact us in Parseltongue")',run:()=>null,},{content:"Check that the save button contains 'in fu_GB'",trigger:'.btn[data-action="save"]:contains("Save in fu_GB")',run:()=>null,},]);wTourUtils.registerWebsitePreviewTour('snippet_translation_changing_lang',{url:'/',test:true,},[{content:"Change language to Parseltongue",trigger:'iframe .js_language_selector .btn',},{content:"Change the language to English",trigger:'iframe .js_language_selector .js_change_lang[data-url_code="en"]',},{content:"Enable translation",trigger:'.o_translate_website_container a',},{content:"Close the dialog",trigger:'.modal-footer .btn-primary',},...wTourUtils.clickOnSave(),...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.dragNDrop({name:'Cover'}),{content:"Check that contact us contain Parseltongue",trigger:'iframe .s_cover .btn-primary:contains("Contact us in Parseltongue")',run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/snippet_version.js */
odoo.define("website.tour.snippet_version",function(require){"use strict";const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour("snippet_version",{edition:true,url:"/",test:true,},[{content:"Drop s_test_snip snippet",trigger:'#oe_snippets .oe_snippet:has(.s_test_snip) .oe_snippet_thumbnail',run:"drag_and_drop iframe #wrap",},{content:"Drop s_text_image snippet",trigger:'#oe_snippets .oe_snippet:has(.s_text_image) .oe_snippet_thumbnail:not(.o_we_already_dragging)',run:"drag_and_drop iframe #wrap",},{content:"Test t-snippet and t-snippet-call: snippets have data-snippet set",trigger:'#oe_snippets .o_panel_body > .oe_snippet.ui-draggable',run:function(){const draggableSnippets=document.querySelectorAll('#oe_snippets .o_panel_body > .oe_snippet.ui-draggable > :nth-child(2)');if(![...draggableSnippets].every(el=>el.dataset.snippet)){console.error("error Some t-snippet are missing their template name");}
if(!document.querySelector('#oe_snippets [data-snippet="s_test_snip"] [data-snippet="s_share"]')){console.error("error s_share t-called inside s_test_snip is missing template name");}
if(!document.querySelector('iframe:not(.o_ignore_in_tour)').contentDocument.querySelector('#wrap [data-snippet="s_test_snip"] [data-snippet="s_share"]')){console.error("error Dropped a s_test_snip snippet but missing s_share template name in it");}},},...wTourUtils.clickOnSave(),...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Modify the version of snippets",trigger:'#oe_snippets .o_panel_body > .oe_snippet',run:function(){document.querySelector('#oe_snippets .oe_snippet > [data-snippet="s_test_snip"]').dataset.vjs='999';document.querySelector('#oe_snippets .oe_snippet > [data-snippet="s_share"]').dataset.vcss='999';document.querySelector('#oe_snippets .oe_snippet > [data-snippet="s_text_image"]').dataset.vxml='999';},},{content:"Edit s_test_snip",trigger:'iframe #wrap.o_editable .s_test_snip',},{content:"Edit text_image",extra_trigger:'we-customizeblock-options:contains(Test snip) .snippet-option-VersionControl > we-alert',trigger:'iframe #wrap.o_editable .s_text_image',},{content:"Edit s_share",extra_trigger:'we-customizeblock-options:contains(Text - Image) .snippet-option-VersionControl  > we-alert',trigger:'iframe #wrap.o_editable .s_share',},{content:"s_share is outdated",extra_trigger:'we-customizeblock-options:contains(Share) .snippet-option-VersionControl > we-alert',trigger:'iframe body',}]);});;

/* /website/static/tests/tours/snippets_all_drag_and_drop.js */
odoo.define("website.tour.snippets_all_drag_and_drop",async function(require){"use strict";const{WysiwygAdapterComponent}=require('@website/components/wysiwyg_adapter/wysiwyg_adapter');const websiteTourUtils=require('website.tour_utils');const{patch,unpatch}=require('web.utils');const patchWysiwygAdapter=()=>patch(WysiwygAdapterComponent.prototype,'snippets_all_drag_and_drop.wysiwyg_adapter',{_trigger_up(ev){this._super(...arguments);if(ev.name==='snippet_removed'){$('body').attr('test-dd-snippet-removed',true);}}});const unpatchWysiwygAdapter=()=>unpatch(WysiwygAdapterComponent.prototype,'snippets_all_drag_and_drop.wysiwyg_adapter');const tour=require("web_tour.tour");let snippetsNames=(new URL(document.location.href)).searchParams.get('snippets_names')||'';const searchParams=new URLSearchParams(window.location.href.split('#')[1]).get('path');if(searchParams){snippetsNames=new URLSearchParams(searchParams.split('/')[1]).get('snippets_names')||'';snippetsNames=snippetsNames.split(',');}
let steps=[];let n=0;for(const snippet of snippetsNames){n++;const snippetSteps=[{content:`Drop ${snippet} snippet [${n}/${snippetsNames.length}]`,trigger:`#oe_snippets .oe_snippet:has( > [data-snippet='${snippet}']) .oe_snippet_thumbnail`,run:"drag_and_drop iframe #wrap",},{content:`Edit ${snippet} snippet`,trigger:`iframe #wrap.o_editable [data-snippet='${snippet}']`,},{content:`check ${snippet} setting are loaded, wait panel is visible`,trigger:".o_we_customize_panel",run:function(){},},{content:`Remove the ${snippet} snippet`,trigger:"we-button.oe_snippet_remove:last"},{content:`click on 'BLOCKS' tab (${snippet})`,extra_trigger:'body[test-dd-snippet-removed]',trigger:".o_we_add_snippet_btn",run:function(actions){$('body').removeAttr('test-dd-snippet-removed');actions.auto();},}];if(snippet==='s_google_map'){snippetSteps.splice(1,3,{content:'Close API Key popup',trigger:"iframe .modal-footer .btn-secondary",});}else if(['s_popup','s_newsletter_subscribe_popup'].includes(snippet)){snippetSteps[2]['in_modal']=false;snippetSteps.splice(3,2,{content:`Hide the ${snippet} popup`,trigger:"iframe .s_popup_close",},{content:`Make sure ${snippet} is hidden`,trigger:"iframe body:not(.modal-open)",});}
steps=steps.concat(snippetSteps);}
tour.register("snippets_all_drag_and_drop",{test:true,},[...websiteTourUtils.clickOnEditAndWaitEditMode(),{content:"Ensure snippets are actually passed at the test.",trigger:"body",run:function(){if(steps.length<220){console.error(`This test is not behaving as it should, got only ${steps.length} steps.`);}
patchWysiwygAdapter();},},{content:"Drop s_text_image snippet",trigger:"#oe_snippets .oe_snippet:has( > [data-snippet='s_text_image']) .oe_snippet_thumbnail",run:"drag_and_drop iframe #wrap"},{content:"Edit s_text_image snippet",trigger:"iframe #wrap.o_editable [data-snippet='s_text_image']"},{content:"check setting are loaded, wait panel is visible",trigger:".o_we_customize_panel"},{content:"click on 'BLOCKS' tab",trigger:".o_we_add_snippet_btn"},].concat(steps).concat([{content:"Remove wysiwyg patch",trigger:"body",run:()=>unpatchWysiwygAdapter(),}]),);});;

/* /website/static/tests/tours/specific_website_editor.js */
odoo.define('website.tour.specific_website_editor',function(require){'use strict';const tour=require('web_tour.tour');const wTourUtils=require("website.tour_utils");wTourUtils.registerWebsitePreviewTour("generic_website_editor",{test:true,edition:true,},[{trigger:'iframe body:not([data-hello="world"])',content:'Check that the editor DOM matches its website-generic features',run:function(){},}]);tour.register('specific_website_editor',{test:true,},[...wTourUtils.clickOnEditAndWaitEditMode(),{trigger:'iframe body[data-hello="world"]',content:'Check that the editor DOM matches its website-specific features',run:function(){},}]);});;

/* /website/static/tests/tours/start_cloned_snippet.js */
odoo.define('@website/../tests/tours/start_cloned_snippet',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const countdownSnippet={name:'Countdown',id:'s_countdown',};const dragNDropOutOfFooter=wTourUtils.dragNDrop(countdownSnippet);dragNDropOutOfFooter.run='drag_and_drop iframe #wrapwrap #wrap';wTourUtils.registerWebsitePreviewTour('website_start_cloned_snippet',{edition:true,test:true,url:'/',},[dragNDropOutOfFooter,wTourUtils.clickOnSnippet(countdownSnippet),{content:'Click on clone snippet',trigger:'.oe_snippet_clone',},{content:'Check that the cloned snippet has a canvas and that something has been drawn inside of it',trigger:'iframe .s_countdown:eq(1) canvas',run:function(){if(!this.$anchor[0].getContext('2d').getImageData(0,0,1000,1000).data.includes(1)){console.error('The cloned snippet should have been started');}},},]);return __exports;});;

/* /website/static/tests/tours/text_animations.js */
odoo.define('@website/../tests/tours/text_animations',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");wTourUtils.registerWebsitePreviewTour("text_animations",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_cover",name:"Cover",}),{content:"Click on the snippet title",trigger:"iframe .s_cover h1 > font",run:"dblclick",},{content:"Click on the 'Animate Text' button to activate the option",trigger:"div.o_we_animate_text",},{content:"Check that the animation was applied",trigger:"iframe .s_cover h1 span.o_animated_text",run:()=>null,},{content:"Click on the 'Animate Text' button",trigger:"div.o_we_animate_text",},{content:"Check that the animation was disabled for the title",trigger:"iframe .s_cover:not(:has(.o_animated_text))",run:()=>null,},{content:"Try to apply the text animation again",trigger:"div.o_we_animate_text",},{content:"Check that the animation was applied",trigger:"iframe .s_cover:has(span.o_animated_text)",run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/translate_menu_name.js */
odoo.define('@website/../tests/tours/translate_menu_name',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('translate_menu_name',{url:'/pa_GB',test:true,edition:false,},[{content:"activate translate mode",trigger:'.o_translate_website_container a',},{content:"Close the dialog",trigger:'.modal-footer .btn-primary',},wTourUtils.clickOnExtraMenuItem({},true),{content:"translate the menu entry",trigger:'iframe a[href="/englishURL"] span',run:'text value pa-GB',},...wTourUtils.clickOnSave(),]);return __exports;});;

/* /website/static/tests/tours/unsplash_beacon.js */
odoo.define("website.tour.unsplash_beacon",function(require){"use strict";const tour=require("web_tour.tour");tour.register("test_unsplash_beacon",{test:true,url:"/",},[{content:"Verify whether beacon was sent.",trigger:'img[data-beacon="sent"]',run:()=>{},}]);});;

/* /website/static/tests/tours/website_backend_menus_redirect.js */
odoo.define('@website/../tests/tours/website_backend_menus_redirect',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('website_backend_menus_redirect',{test:true,url:'/',},[{content:'Need at least a step so the tour is not failing in enterprise',trigger:'body',edition:'enterprise',},{content:'Make frontend to backend menus appears',trigger:'body:has(#wrap)',run:function(){this.$anchor.find('.o_frontend_to_backend_apps_menu').addClass('show');},edition:'community',},{content:'Click on Test Root backend menu',trigger:'.o_frontend_to_backend_apps_menu a:contains("Test Root")',edition:'community',},{content:'Check that we landed on the apps page (Apps), and not the Home Action page (Settings)',trigger:'.oe_module_vignette',edition:'community',},]);return __exports;});;

/* /website/static/tests/tours/website_click_tests.js */
odoo.define('@website/../tests/tours/website_click_tests',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const cover={id:'s_cover',name:'Cover',};wTourUtils.registerWebsitePreviewTour('website_click_tour',{test:true,url:'/',},[{content:"trigger a page navigation",trigger:'iframe a[href="/contactus"]',},{content:"wait for the page to be loaded",trigger:'.o_website_preview[data-view-xmlid="website.contactus"]',run:()=>null,},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"click on a link that would trigger navigation",trigger:'iframe a[href="/"]',},wTourUtils.goBackToBlocks(),wTourUtils.dragNDrop(cover),wTourUtils.clickOnSnippet(cover),...wTourUtils.clickOnSave(),{content:"wait for the iframe to be ready",trigger:'iframe body:not(.editor_enable)',run:()=>null,}]);return __exports;});;

/* /website/static/tests/tours/website_form_editor.js */
odoo.define('website.tour.form_editor',function(require){'use strict';const wTourUtils=require("website.tour_utils");const VISIBLE='Always Visible';const HIDDEN='Hidden';const CONDITIONALVISIBILITY='Visible only if';const NB_NON_ESSENTIAL_REQUIRED_FIELDS_IN_DEFAULT_FORM=2;const ESSENTIAL_FIELDS_VALID_DATA_FOR_DEFAULT_FORM=[{name:'email_from',value:'admin@odoo.com',},{name:'subject',value:'Hello, world!',}];const essentialFieldsForDefaultFormFillInSteps=[];for(const data of ESSENTIAL_FIELDS_VALID_DATA_FOR_DEFAULT_FORM){essentialFieldsForDefaultFormFillInSteps.push({content:"Enter data in model-required field",trigger:`iframe .s_website_form_model_required .s_website_form_input[name="${data.name}"]`,run:`text ${data.value}`,});}
const getQuotesEncodedName=function(name){return name.replaceAll(/"/g,character=>`&quot;`).replaceAll(/'/g,character=>`&apos;`).replaceAll(/`/g,character=>`&lsquo;`).replaceAll("\\",character=>`&bsol;`);};const triggerFieldByLabel=(label)=>{return`.s_website_form_field.s_website_form_custom:has(label:contains("${label}"))`;};const selectFieldByLabel=(label)=>{return[{content:`Select field "${label}"`,trigger:"iframe "+triggerFieldByLabel(label),}];};const selectButtonByText=function(text){return[{content:"Open the select",trigger:`we-select:has(we-button:contains("${text}")) we-toggler`,},{content:"Click on the option",trigger:`we-select we-button:contains("${text}")`,}];};const selectButtonByData=function(data){return[{content:"Open the select",trigger:`we-select:has(we-button[${data}]) we-toggler`,},{content:"Click on the option",trigger:`we-select we-button[${data}]`,}];};const addField=function(name,type,label,required,isCustom,display={visibility:VISIBLE,condition:""}){const data=isCustom?`data-custom-field="${name}"`:`data-existing-field="${name}"`;const ret=[{content:"Select form",extra_trigger:'iframe .s_website_form_field',trigger:'iframe section.s_website_form',},{content:"Add field",trigger:'we-button[data-add-field]',},...selectButtonByData(data),{content:"Wait for field to load",trigger:`iframe .s_website_form_field[data-type="${name}"], .s_website_form_input[name="${name}"]`,run:function(){},},...selectButtonByText(display.visibility),];let testText='iframe .s_website_form_field';if(display.condition){ret.push({content:"Set the visibility condition",trigger:'we-input[data-attribute-name="visibilityCondition"] input',run:`text ${display.condition}`,});}
if(required){testText+='.s_website_form_required';ret.push({content:"Mark the field as required",trigger:'we-button[data-name="required_opt"] we-checkbox',});}
if(label){testText+=`:has(label:contains(${label}))`;ret.push({content:"Change the label text",trigger:'we-input[data-set-label-text] input',run:`text ${label}`,});}
if(type!=='checkbox'&&type!=='radio'&&type!=='select'){let inputType=type==='textarea'?type:`input[type="${type}"]`;const nameAttribute=isCustom&&label?getQuotesEncodedName(label):name;testText+=`:has(${inputType}[name="${nameAttribute}"]${required ? "[required]" : ""})`;testText=testText.replaceAll("\\","\\\\");}
ret.push({content:"Check the resulting field",trigger:testText,run:function(){},});return ret;};const addCustomField=function(name,type,label,required,display){return addField(name,type,label,required,true,display);};const addExistingField=function(name,type,label,required,display){return addField(name,type,label,required,false,display);};wTourUtils.registerWebsitePreviewTour("website_form_editor_tour",{url:'/',edition:true,test:true,},[{content:"Drop the form snippet",trigger:'#oe_snippets .oe_snippet:has(.s_website_form) .oe_snippet_thumbnail',run:'drag_and_drop iframe #wrap',},{content:"Select form by clicking on an input field",extra_trigger:'iframe .s_website_form_field',trigger:'iframe section.s_website_form input',},{content:"Verify that the form editor appeared",trigger:'.o_we_customize_panel .snippet-option-WebsiteFormEditor',run:()=>null,},{content:"Go back to blocks to unselect form",trigger:'.o_we_add_snippet_btn',},{content:"Select form by clicking on a text area",extra_trigger:'iframe .s_website_form_field',trigger:'iframe section.s_website_form textarea',},{content:"Verify that the form editor appeared",trigger:'.o_we_customize_panel .snippet-option-WebsiteFormEditor',run:()=>null,},{content:"Rename the field label",trigger:'we-input[data-set-label-text] input',run:"text Renamed",},{content:"Leave the rename options",trigger:'we-input[data-set-label-text] input',run:"text_blur",},{content:"Go back to blocks to unselect form",trigger:'.o_we_add_snippet_btn',},{content:"Select form itself (not a specific field)",extra_trigger:'iframe .s_website_form_field',trigger:'iframe section.s_website_form',},...selectButtonByText('Send an E-mail'),{content:"Form has a model name",trigger:'iframe section.s_website_form form[data-model_name="mail.mail"]',},{content:'Edit the Phone Number field',trigger:'iframe input[name="phone"]',},{content:'Change the label position of the phone field',trigger:'we-button[data-select-label-position="right"]',},...addCustomField("char","text","Conditional Visibility Check 1",false),...addCustomField("char","text","Conditional Visibility Check 2",false),...selectButtonByData("data-set-visibility='conditional'"),...selectButtonByData("data-set-visibility-dependency='Conditional Visibility Check 1'"),...addCustomField("char","text","Conditional Visibility Check 2",false),...selectFieldByLabel("Conditional Visibility Check 1"),...selectButtonByData("data-set-visibility='conditional'"),{content:"Check that 'Conditional Visibility Check 2' is not in the list of the visibility selector of Conditional Visibility Check 1",trigger:"we-select[data-name='hidden_condition_opt']:not(:has(we-button[data-set-visibility-dependency='Conditional Visibility Check 2']))",run:()=>null,},...addCustomField("char","text","Conditional Visibility Check 3",false),...addCustomField("char","text","Conditional Visibility Check 4",false),...selectButtonByData("data-set-visibility='conditional'"),...selectButtonByData("data-set-visibility-dependency='Conditional Visibility Check 3'"),{content:"Change the label of 'Conditional Visibility Check 4' and change it to 'Conditional Visibility Check 3'",trigger:'we-input[data-set-label-text] input',run:"text Conditional Visibility Check 3",},{content:"Check that the conditional visibility of the renamed field is removed",trigger:"we-customizeblock-option.snippet-option-WebsiteFieldEditor we-select:contains('Visibility'):has(we-toggler:contains('Always Visible'))",run:()=>null,},...addCustomField("char","text","Conditional Visibility Check 5",false),...addCustomField("char","text","Conditional Visibility Check 6",false),...selectButtonByData("data-set-visibility='conditional'"),{content:"Change the label of 'Conditional Visibility Check 6' and change it to 'Conditional Visibility Check 5'",trigger:'we-input[data-set-label-text] input',run:"text Conditional Visibility Check 5",},{content:"Check that 'Conditional Visibility Check 5' is not in the list of the renamed field",trigger:"we-customizeblock-option.snippet-option-WebsiteFieldEditor we-select[data-name='hidden_condition_opt']:not(:has(we-button:contains('Conditional Visibility Check 5')))",run:()=>null,},...addExistingField('email_cc','text','Test conditional visibility',false,{visibility:CONDITIONALVISIBILITY,condition:'odoo'}),...addCustomField("char","text","dependent",false,{visibility:CONDITIONALVISIBILITY}),...addCustomField("selection","radio","dependency",false),...selectFieldByLabel("dependent"),...selectButtonByData('data-set-visibility-dependency="dependency"'),...selectFieldByLabel("dependency"),...selectButtonByData('data-custom-field="char"'),...selectFieldByLabel("dependent"),{content:"Open the select",trigger:'we-select:has(we-button[data-set-visibility="visible"]) we-toggler',},{content:"Check that the field no longer has conditional visibility",trigger:"we-select we-button[data-set-visibility='visible'].active",run:()=>null,},...addExistingField('date','text','Test Date',true),...addExistingField('record_name','text','Awesome Label',false,{visibility:HIDDEN}),...addExistingField('body_html','textarea','Your Message',true),...addExistingField('recipient_ids','checkbox'),...addCustomField('one2many','checkbox','Products',true),{content:"Change Option 1 label",trigger:'we-list table input:eq(0)',run:'text Iphone',},{content:"Change Option 2 label",trigger:'we-list table input:eq(1)',run:'text Galaxy S',},{content:"Change first Option 3 label",trigger:'we-list table input:eq(2)',run:'text Xperia',},{content:"Click on Add new Checkbox",trigger:'we-list we-button.o_we_list_add_optional',},{content:"Change added Option label",trigger:'we-list table input:eq(3)',run:'text Wiko Stairway',},{content:"Check the resulting field",trigger:"iframe .s_website_form_field.s_website_form_custom.s_website_form_required"+":has(.s_website_form_multiple[data-display='horizontal'])"+":has(.checkbox:has(label:contains('Iphone')):has(input[type='checkbox'][required]))"+":has(.checkbox:has(label:contains('Galaxy S')):has(input[type='checkbox'][required]))"+":has(.checkbox:has(label:contains('Xperia')):has(input[type='checkbox'][required]))"+":has(.checkbox:has(label:contains('Wiko Stairway')):has(input[type='checkbox'][required]))",run:function(){},},...selectButtonByData('data-multi-checkbox-display="vertical"'),{content:"Check the resulting field",trigger:"iframe .s_website_form_field.s_website_form_custom.s_website_form_required"+":has(.s_website_form_multiple[data-display='vertical'])"+":has(.checkbox:has(label:contains('Iphone')):has(input[type='checkbox'][required]))"+":has(.checkbox:has(label:contains('Galaxy S')):has(input[type='checkbox'][required]))"+":has(.checkbox:has(label:contains('Xperia')):has(input[type='checkbox'][required]))"+":has(.checkbox:has(label:contains('Wiko Stairway')):has(input[type='checkbox'][required]))",run:function(){},},...addCustomField('selection','radio','Service',true),{content:"Change Option 1 label",trigger:'we-list table input:eq(0)',run:'text After-sales Service',},{content:"Change Option 2 label",trigger:'we-list table input:eq(1)',run:'text Invoicing Service',},{content:"Change first Option 3 label",trigger:'we-list table input:eq(2)',run:'text Development Service',},{content:"Click on Add new Checkbox",trigger:'we-list we-button.o_we_list_add_optional',},{content:"Change last Option label",trigger:'we-list table input:eq(3)',run:'text Management Service',},{content:"Mark the field as not required",extra_trigger:"we-list table input:eq(3)[name='Management Service']",trigger:'we-button[data-name="required_opt"] we-checkbox',},{content:"Check the resulting field",trigger:"iframe .s_website_form_field.s_website_form_custom:not(.s_website_form_required)"+":has(.radio:has(label:contains('After-sales Service')):has(input[type='radio']:not([required])))"+":has(.radio:has(label:contains('Invoicing Service')):has(input[type='radio']:not([required])))"+":has(.radio:has(label:contains('Development Service')):has(input[type='radio']:not([required])))"+":has(.radio:has(label:contains('Management Service')):has(input[type='radio']:not([required])))",run:function(){},},...addCustomField('many2one','select','State',true),{content:"Change Option 1 Label",trigger:'we-list table input:eq(0)',run:'text Germany',},{content:"Change Option 2 Label",trigger:'we-list table input:eq(1)',run:'text Belgium',},{content:"Change first Option 3 label",trigger:'we-list table input:eq(2)',run:'text France',},{content:"Click on Add new Checkbox",trigger:'we-list we-button.o_we_list_add_optional',},{content:"Change last Option label",trigger:'we-list table input:eq(3)',run:'text Canada',},{content:"Remove Germany Option",trigger:'.o_we_select_remove_option:eq(0)',},{content:"Click on Add new Checkbox",trigger:'we-list we-button.o_we_list_add_optional',},{content:"Change last option label with a number",trigger:'we-list table input:eq(3)',run:'text 44 - UK',},{content:"Check that the input value is the full option value",trigger:"we-list table input:eq(3)[name='44 - UK']",run:()=>{const addedOptionEl=document.querySelector('iframe.o_iframe').contentDocument.querySelector('.s_website_form_field select option[value="44 - UK"]');if(!addedOptionEl){console.error('The number option was not correctly added');}},},{content:"Check the resulting snippet",trigger:"iframe .s_website_form_field.s_website_form_custom.s_website_form_required"+":has(label:contains('State'))"+":has(select[required]:hidden)"+":has(.s_website_form_select_item:contains('Belgium'))"+":has(.s_website_form_select_item:contains('France'))"+":has(.s_website_form_select_item:contains('Canada'))"+":has(.s_website_form_select_item:contains('44 - UK'))"+":not(:has(.s_website_form_select_item:contains('Germany')))",run:function(){},},...addExistingField('attachment_ids','file','Invoice Scan'),{content:"Insure the history step of the editor is not checking for unbreakable",trigger:'iframe #wrapwrap',run:()=>{const wysiwyg=$('iframe:not(.o_ignore_in_tour)').contents().find('#wrapwrap').data('wysiwyg');wysiwyg.odooEditor.historyStep(true);},},{content:"Click submit button to show edit popover",trigger:'iframe .s_website_form_send',},{content:"Click on Edit Link in Popover",trigger:'iframe .o_edit_menu_popover .o_we_edit_link',},{content:"Check that no URL field is suggested",trigger:'#toolbar:has(#url_row:hidden)',run:()=>null,},{content:"Change button's style",trigger:'.dropdown-toggle[data-bs-original-title="Link Style"]',run:()=>{$('.dropdown-toggle[data-bs-original-title="Link Style"]').click();$('[data-value="secondary"]').click();$('[data-bs-original-title="Link Shape"]').click();$('[data-value="rounded-circle"]').click();$('[data-bs-original-title="Link Size"]').click();$('[data-value="sm"]').click();},},{content:"Check the resulting button",trigger:'iframe .s_website_form_send.btn.btn-sm.btn-secondary.rounded-circle',run:()=>null,},{content:'Select the name field',trigger:'iframe .s_website_form_field:eq(0)',},{content:'Set a default value to the name field',trigger:'we-input[data-attribute-name="value"] input',run:'text John Smith',},...addCustomField("char","text","field A",false,{visibility:CONDITIONALVISIBILITY}),...addCustomField("char","text","field B",false),...selectFieldByLabel("field A"),...selectButtonByData('data-set-visibility-dependency="field B"'),...selectButtonByData('data-select-data-attribute="set"'),...selectFieldByLabel("field B"),{content:"Insert default value",trigger:'we-input[data-attribute-name="value"] input',run:"text prefilled",},{content:"Save the page",trigger:"button[data-action=save]",},{content:'Verify value attribute and property',extra_trigger:'iframe body:not(.editor_enable)',trigger:'iframe .s_website_form_field:eq(0) input[value="John Smith"]:propValue("Mitchell Admin")',},{content:'Verify that phone field is still auto-fillable',trigger:'iframe .s_website_form_field input[data-fill-with="phone"]:propValue("+1 555-555-5555")',},{content:"Check that field B prefill text is set",trigger:`iframe ${triggerFieldByLabel("field B")}:has(input[value="prefilled"])`,run:()=>null,},{content:"Check that field A is visible",trigger:`iframe .s_website_form:has(${triggerFieldByLabel("field A")}:visible)`,run:()=>null,},...wTourUtils.clickOnEditAndWaitEditMode(),{content:'Edit the form',trigger:'iframe .s_website_form_field:eq(0) input',run:'click',},...addCustomField("char","text","field C",false),...selectFieldByLabel("field B"),...selectButtonByText(CONDITIONALVISIBILITY),...selectButtonByText(CONDITIONALVISIBILITY),{content:"Check that there is a comparator after two clicks on 'Visible only if'",trigger:"[data-attribute-name='visibilityComparator']",run:function(){if(!this.$anchor[0].querySelector("we-button.active")){console.error("A default comparator should be set");}},},...selectButtonByData('data-set-visibility-dependency="field C"'),...selectButtonByData('data-select-data-attribute="set"'),{content:'Save the page',trigger:'button[data-action=save]',run:'click',},{content:'Verify that the value has not been deleted',extra_trigger:'iframe body:not(.editor_enable)',trigger:'iframe .s_website_form_field:eq(0) input[value="John Smith"]',},{content:"Check that fields A and B are not visible and that field B's prefill text is still set",trigger:"iframe .s_website_form"+`:has(${triggerFieldByLabel("field A")}:not(:visible))`+`:has(${triggerFieldByLabel("field B")}`+`:has(input[value="prefilled"]):not(:visible))`,run:()=>null,},{content:"Type something in field C",trigger:`iframe ${triggerFieldByLabel("field C")} input`,run:"text Sesame",},{content:"Check that fields A and B are visible",trigger:`iframe .s_website_form:has(${triggerFieldByLabel("field B")}:visible)`+`:has(${triggerFieldByLabel("field A")}:visible)`,run:()=>null,},...wTourUtils.clickOnEditAndWaitEditMode(),...selectFieldByLabel("field A"),{content:"Verify that the form editor appeared",trigger:".o_we_customize_panel .snippet-option-WebsiteFormEditor",run:()=>null,},...selectButtonByData('data-select-data-attribute="contains"'),{content:"Tie the visibility of field A to field B containing 'peek-a-boo'",trigger:"we-input[data-name=hidden_condition_additional_text] input",run:"text peek-a-boo",},...wTourUtils.clickOnSave(),{content:"Write anything in C",trigger:`iframe ${triggerFieldByLabel("field C")} input`,run:"text Mellon",},{content:"Check that field B is visible, but field A is not",trigger:`iframe .s_website_form:has(${triggerFieldByLabel("field B")}:visible)`+`:has(${triggerFieldByLabel("field A")}:not(:visible))`,run:()=>null,},{content:"Insert 'peek-a-boo' in field B",trigger:`iframe ${triggerFieldByLabel("field B")} input`,run:"text peek-a-boo",},{content:"Check that field A is visible",trigger:`iframe .s_website_form:has(${triggerFieldByLabel("field A")}:visible)`,run:()=>null,},...wTourUtils.clickOnEditAndWaitEditMode(),{content:'Click on the submit button',trigger:'iframe .s_website_form_send',run:'click',},{content:'Change the Recipient Email',trigger:'[data-field-name="email_to"] input',run:'text test@test.test',},...addCustomField("char","text","''",false),...addCustomField("char","text",'""',false),...addCustomField("char","text","``",false),...addCustomField("char","text","\\",false),{content:'Save the page',trigger:'button[data-action=save]',run:'click',},{content:'Verify that the recipient email has been saved',trigger:'iframe body:not(.editor_enable)',extra_trigger:'iframe form:has(input[name="email_to"][value="test@test.test"])',},]);function editContactUs(steps){return[{content:"Select the contact us form by clicking on an input field",trigger:'iframe .s_website_form input',extra_trigger:'#oe_snippets .oe_snippet_thumbnail',run:'click',},...steps,{content:'Save the page',trigger:'button[data-action=save]',},{content:'Wait for reload',trigger:'body:not(.editor_enable)',},];}
wTourUtils.registerWebsitePreviewTour('website_form_contactus_edition_with_email',{url:'/contactus',edition:true,test:true,},editContactUs([{content:'Change the Recipient Email',trigger:'[data-field-name="email_to"] input',run:'text test@test.test',},]));wTourUtils.registerWebsitePreviewTour('website_form_contactus_edition_no_email',{url:'/contactus',edition:true,test:true,},editContactUs([{content:"Change a random option",trigger:'[data-set-mark] input',run:'text_blur **',},{content:"Check that the recipient email is correct",trigger:'we-input[data-field-name="email_to"] input:propValue("website_form_contactus_edition_no_email@mail.com")',run:()=>null,},]));wTourUtils.registerWebsitePreviewTour('website_form_conditional_required_checkboxes',{test:true,url:'/',edition:true,},[{content:"Add the form snippet",trigger:'#oe_snippets .oe_snippet:has(.s_website_form) .oe_snippet_thumbnail',run:'drag_and_drop iframe #wrap',},{content:"Select the form by clicking on an input field",extra_trigger:'iframe .s_website_form_field',trigger:'iframe section.s_website_form input',run:function(actions){actions.auto();const requiredFields=this.$anchor.closest('[data-snippet]').find('.s_website_form_required');if(requiredFields.length!==NB_NON_ESSENTIAL_REQUIRED_FIELDS_IN_DEFAULT_FORM){console.error('The amount of required fields seems to have changed');}},},...((function(){const steps=[];for(let i=0;i<NB_NON_ESSENTIAL_REQUIRED_FIELDS_IN_DEFAULT_FORM;i++){steps.push({content:"Select required field to remove",trigger:'iframe .s_website_form_required .s_website_form_input',});steps.push({content:"Remove required field",trigger:'iframe .oe_overlay .oe_snippet_remove',});}
return steps;})()),...addCustomField('boolean','checkbox','Checkbox 1',false),...addCustomField('boolean','checkbox','Checkbox 2',true,{visibility:CONDITIONALVISIBILITY}),{content:"Open condition item select",trigger:'we-select[data-name="hidden_condition_opt"] we-toggler',},{content:"Choose first checkbox as condition item",trigger:'we-button[data-set-visibility-dependency="Checkbox 1"]',},{content:"Open condition comparator select",trigger:'we-select[data-attribute-name="visibilityComparator"] we-toggler',},{content:"Choose 'not equal to' comparator",trigger:'we-button[data-select-data-attribute="!selected"]',},{content:'Save the page',trigger:'button[data-action=save]',},{content:"Wait for page reload",trigger:'iframe body:not(.editor_enable) [data-snippet="s_website_form"]',run:function(actions){const essentialFields=this.$anchor.find('.s_website_form_model_required');if(essentialFields.length!==ESSENTIAL_FIELDS_VALID_DATA_FOR_DEFAULT_FORM.length){console.error('The amount of model-required fields seems to have changed');}},},...essentialFieldsForDefaultFormFillInSteps,{content:'Try sending empty form',trigger:'iframe .s_website_form_send',},{content:'Check the form could not be sent',trigger:'iframe #s_website_form_result.text-danger',run:()=>null,},{content:'Check the first checkbox',trigger:'iframe input[type="checkbox"][name="Checkbox 1"]',},{content:'Check the second checkbox is now hidden',trigger:'iframe .s_website_form:has(input[type="checkbox"][name="Checkbox 2"]:not(:visible))',run:()=>null,},{content:'Try sending the form',trigger:'iframe .s_website_form_send',},{content:"Check the form was sent (success page without form)",trigger:'iframe body:not(:has([data-snippet="s_website_form"])) .fa-check-circle',run:()=>null,},{content:"Go back to the form",trigger:'iframe a.navbar-brand.logo',},...essentialFieldsForDefaultFormFillInSteps,{content:'Check the second checkbox',trigger:'iframe input[type="checkbox"][name="Checkbox 2"]',},{content:'Try sending the form again',trigger:'iframe .s_website_form_send',},{content:"Check the form was again sent (success page without form)",trigger:'iframe body:not(:has([data-snippet="s_website_form"])) .fa-check-circle',run:()=>null,}]);wTourUtils.registerWebsitePreviewTour('website_form_contactus_change_random_option',{test:true,url:'/contactus',edition:true,},editContactUs([{content:"Change a random option",trigger:'[data-set-mark] input',run:'text_blur **',},]));wTourUtils.registerWebsitePreviewTour("website_form_editable_content",{test:true,url:"/",edition:true,},[{...wTourUtils.dragNDrop({id:"s_website_form",name:"Form"}),run:"drag_and_drop iframe #wrap",},{content:"Check that a form field is not editable",extra_trigger:"iframe .s_website_form_field",trigger:"iframe section.s_website_form input",run:function(){if(this.$anchor[0].isContentEditable){console.error("A form field should not be editable.");}},},{content:"Go back to blocks",trigger:".o_we_add_snippet_btn",},wTourUtils.dragNDrop({id:"s_three_columns",name:"Columns"}),{content:"Select the first column",trigger:"iframe .s_three_columns .row > :nth-child(1)",},{content:"Drag and drop the selected column inside the form",trigger:"iframe .o_overlay_move_options .ui-draggable-handle",run:"drag_and_drop iframe section.s_website_form",},{content:"Click on the text inside the dropped form column",trigger:"iframe section.s_website_form h3.card-title",run:"dblclick",},{content:"Update the text inside the form column",trigger:"iframe section.s_website_form h3.card-title",run:"keydown 65 66 67",},{content:"Check that the new text value was correctly set",trigger:"iframe section.s_website_form h3:containsExact(ABC)",run:()=>null,},{content:"Remove the dropped column",trigger:"iframe .oe_overlay.oe_active .oe_snippet_remove",run:"click",},...wTourUtils.clickOnSave(),]);wTourUtils.registerWebsitePreviewTour("website_form_special_characters",{test:true,url:"/",edition:true,},[{...wTourUtils.dragNDrop({id:"s_website_form",name:"Form"}),run:"drag_and_drop iframe #wrap",},{content:"Select form by clicking on an input field",extra_trigger:"iframe .s_website_form_field",trigger:"iframe section.s_website_form input",},...addCustomField("char","text",`Test1"'`,false),...addCustomField("char","text",'Test2`\\',false),...wTourUtils.clickOnSave(),...essentialFieldsForDefaultFormFillInSteps,{content:"Complete 'Your Question' field",trigger:"iframe textarea[name='description']",run:"text test",},{content:"Complete the first added field",trigger:"iframe input[name='Test1&quot;&apos;']",run:"text test1",},{content:"Complete the second added field",trigger:"iframe input[name='Test2&lsquo;&bsol;']",run:"text test2",},{content:"Click on 'Submit'",trigger:"iframe a.s_website_form_send",},{content:"Check the form was again sent (success page without form)",trigger:"iframe body:not(:has([data-snippet='s_website_form'])) .fa-check-circle",run:()=>null,},]);return{};});;

/* /website/static/tests/tours/website_form_editor_frontend.js */
odoo.define('@website/../tests/tours/website_form_editor_frontend',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const rpc=require('web.rpc');tour.register("website_form_editor_tour_submit",{test:true,},[{content:"Try to send the form with some required fields not filled in",extra_trigger:"form[data-model_name='mail.mail']"+"[data-success-page='/contactus-thank-you']"+":has(.s_website_form_field:has(label:contains('Your Name')):has(input[type='text'][name='name'][required]))"+":has(.s_website_form_field:has(label:contains('Your Email')):has(input[type='email'][name='email_from'][required]))"+":has(.s_website_form_field:has(label:contains('Your Question')):has(textarea[name='description'][required]))"+":has(.s_website_form_field:has(label:contains('Subject')):has(input[type='text'][name='subject'][required]))"+":has(.s_website_form_field:has(label:contains('Test Date')):has(input[type='text'][name='date'][required]))"+":has(.s_website_form_field:has(label:contains('Awesome Label')):hidden)"+":has(.s_website_form_field:has(label:contains('Your Message')):has(textarea[name='body_html'][required]))"+":has(.s_website_form_field:has(label:contains('Products')):has(input[type='checkbox'][name='Products'][value='Iphone'][required]))"+":has(.s_website_form_field:has(label:contains('Products')):has(input[type='checkbox'][name='Products'][value='Galaxy S'][required]))"+":has(.s_website_form_field:has(label:contains('Products')):has(input[type='checkbox'][name='Products'][value='Xperia'][required]))"+":has(.s_website_form_field:has(label:contains('Products')):has(input[type='checkbox'][name='Products'][value='Wiko Stairway'][required]))"+":has(.s_website_form_field:has(label:contains('Service')):has(input[type='radio'][name='Service'][value='After-sales Service']:not([required])))"+":has(.s_website_form_field:has(label:contains('Service')):has(input[type='radio'][name='Service'][value='Invoicing Service']:not([required])))"+":has(.s_website_form_field:has(label:contains('Service')):has(input[type='radio'][name='Service'][value='Development Service']:not([required])))"+":has(.s_website_form_field:has(label:contains('Service')):has(input[type='radio'][name='Service'][value='Management Service']:not([required])))"+":has(.s_website_form_field:has(label:contains('State')):has(select[name='State'][required]:has(option[value='Belgium'])))"+":has(.s_website_form_field.s_website_form_required:has(label:contains('State')):has(select[name='State'][required]:has(option[value='France'])))"+":has(.s_website_form_field:has(label:contains('State')):has(select[name='State'][required]:has(option[value='Canada'])))"+":has(.s_website_form_field:has(label:contains('Invoice Scan')))"+":has(.s_website_form_field:has(input[name='email_to'][value='test@test.test']))"+":has(.s_website_form_field:has(input[name='website_form_signature']))",trigger:".s_website_form_send"},{content:"Check if required fields were detected and complete the Subject field",extra_trigger:"form:has(#s_website_form_result.text-danger)"+":has(.s_website_form_field:has(label:contains('Your Name')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Email')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Your Question')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Subject')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Test Date')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Your Message')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Products')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Service')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('State')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Invoice Scan')):not(.o_has_error))",trigger:"input[name=subject]",run:"text Jane Smith"},{content:"Update required field status by trying to Send again",trigger:".s_website_form_send"},{content:"Check if required fields were detected and complete the Message field",extra_trigger:"form:has(#s_website_form_result.text-danger)"+":has(.s_website_form_field:has(label:contains('Your Name')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Email')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Your Question')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Subject')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Test Date')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Your Message')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Products')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Service')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('State')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Invoice Scan')):not(.o_has_error))",trigger:"textarea[name=body_html]",run:"text A useless message"},{content:"Update required field status by trying to Send again",trigger:".s_website_form_send"},{content:"Check if required fields was detected and check a product. If this fails, you probably broke the cleanForSave.",extra_trigger:"form:has(#s_website_form_result.text-danger)"+":has(.s_website_form_field:has(label:contains('Your Name')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Email')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Your Question')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Subject')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Test Date')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Your Message')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Products')).o_has_error)"+":has(.s_website_form_field:has(label:contains('Service')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('State')):not(.o_has_error))"+":has(.s_website_form_field:has(label:contains('Invoice Scan')):not(.o_has_error))",trigger:"input[name=Products][value='Wiko Stairway']"},{content:"Complete Date field",trigger:".s_website_form_datetime [data-toggle='datetimepicker']",},{content:"Check another product",trigger:"input[name='Products'][value='Xperia']"},{content:"Check a service",trigger:"input[name='Service'][value='Development Service']"},{content:"Complete Your Name field",trigger:"input[name='name']",run:"text chhagan"},{content:"Complete Email field",trigger:"input[name=email_from]",run:"text test@mail.com"},{content:"Complete Subject field",trigger:'input[name="subject"]',run:'text subject',},{content:"Complete Your Question field",trigger:"textarea[name='description']",run:"text magan"},{content:"Check if conditional field is visible, it shouldn't.",trigger:"body",run:function(){const style=window.getComputedStyle(this.$anchor[0].getElementsByClassName('s_website_form_field_hidden_if')[0]);if(style.display!=='none'){console.error('error This field should be invisible when the name is not odoo');}}},{content:"Change name input",trigger:"input[name='name']",run:"text odoo",},{content:"Check if conditional field is visible, it should.",trigger:"input[name='email_cc']",},{content:"Select state option",trigger:"select[name='State']",run:'text 44 - UK',},{content:"Send the form",trigger:".s_website_form_send"},{content:"Check form is submitted without errors",trigger:"#wrap:has(h1:contains('Thank You!'))"}]);tour.register("website_form_editor_tour_results",{test:true,},[{content:"Check mail.mail records have been created",trigger:"body",run:function(){var mailDef=rpc.query({model:'mail.mail',method:'search_count',args:[[['email_to','=','test@test.test'],['body_html','like','A useless message'],['body_html','like','Service : Development Service'],['body_html','like','State : 44 - UK'],['body_html','like','Products : Xperia,Wiko Stairway']]],});var success=function(model,count){if(count>0){$('body').append('<div id="website_form_editor_success_test_tour_'+model+'"></div>');}};mailDef.then(_.bind(success,this,'mail_mail'));}},{content:"Check mail.mail records have been created",trigger:"#website_form_editor_success_test_tour_mail_mail"}]);tour.register('website_form_contactus_submit',{test:true,url:'/contactus',},[{content:"Fill in the subject",trigger:'input[name="subject"]',},{content:'Fill in the message',trigger:'textarea[name="description"]',},{content:'Send the form',trigger:'.s_website_form_send',},{content:'Check form is submitted without errors',trigger:'#wrap:has(h1:contains("Thank You!"))',},]);tour.register('website_form_contactus_check_changed_email',{test:true,url:'/contactus',},[{content:"Check that the recipient email is updated",trigger:'form:has(input[name="email_to"][value="after.change@mail.com"])',run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/website_navbar_menu.js */
odoo.define("website.tour.website_navbar_menu",function(require){"use strict";var tour=require("web_tour.tour");tour.register("website_navbar_menu",{test:true,url:"/",},[{content:"Ensure menus are in DOM",trigger:'#top_menu .nav-item a:contains("Test Tour Menu")',run:function(){},},{content:"Ensure menus loading is done (so they are actually visible)",trigger:'body:not(:has(.o_menu_loading))',run:function(){},}]);});;

/* /website/static/tests/tours/website_no_dirty_page.js */
odoo.define('@website/../tests/tours/website_no_dirty_page',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const makeSteps=(steps=[])=>[wTourUtils.dragNDrop({id:"s_text_image",name:"Text - Image",}),{content:"Click on Discard",trigger:'.o_we_website_top_actions [data-action="cancel"]',},{content:"Check that discarding actually warns when there are dirty changes, and cancel",trigger:".modal-footer .btn-secondary",},...wTourUtils.clickOnSave(),...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Confirm we are in edit mode",trigger:'body.editor_has_snippets',run:()=>null,},...steps,{content:"Click elsewhere and wait for a few ms",trigger:'iframe #wrap',run:function(actions){actions.auto();setTimeout(()=>document.body.classList.add('o_test_delay'),999);},},{content:"Click on Discard",trigger:'.o_we_website_top_actions [data-action="cancel"]',extra_trigger:'body.o_test_delay',},{content:"Confirm we are not in edit mode anymore",trigger:'body:not(.editor_has_snippets)',run:()=>null,},];wTourUtils.registerWebsitePreviewTour('website_no_action_no_dirty_page',{test:true,url:'/',edition:true,},makeSteps());wTourUtils.registerWebsitePreviewTour('website_no_dirty_page',{test:true,url:'/',edition:true,},makeSteps([{content:"Click on default paragraph",trigger:'iframe .s_text_image h2 + p.o_default_snippet_text',},{content:"Make sure the paragraph still acts as a default paragraph",trigger:'iframe .s_text_image h2 + p.o_default_snippet_text',run:()=>null,},{content:"Click on button",trigger:'iframe .s_text_image .btn',run:function(actions){actions.click();const el=this.$anchor[0];const sel=el.ownerDocument.getSelection();sel.collapse(el,0);el.focus();},},]));return __exports;});;

/* /website/static/tests/tours/website_page_options.js */
odoo.define('@website/../tests/tours/website_page_options',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('website_page_options',{test:true,url:'/',edition:true,},[wTourUtils.clickOnSnippet({id:'o_header_standard',name:'Header'}),wTourUtils.changeOption('TopMenuVisibility','we-select:has([data-visibility]) we-toggler'),wTourUtils.changeOption('TopMenuVisibility','we-button[data-visibility="transparent"]'),...wTourUtils.clickOnSave(),{content:"Check that the header is transparent",trigger:'iframe #wrapwrap.o_header_overlay',run:()=>null,},...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.clickOnSnippet({id:'o_header_standard',name:'Header'}),wTourUtils.changeOption('topMenuColor','we-select.o_we_so_color_palette'),wTourUtils.changeOption('topMenuColor','button[data-color="black-50"]','background color','bottom',true),...wTourUtils.clickOnSave(),{content:"Check that the header is in black-50",trigger:'iframe header#top.bg-black-50',run:()=>null,},...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.clickOnSnippet({id:'o_header_standard',name:'Header'}),wTourUtils.changeOption('TopMenuVisibility','we-select:has([data-visibility]) we-toggler'),wTourUtils.changeOption('TopMenuVisibility','we-button[data-visibility="hidden"]'),...wTourUtils.clickOnSave(),{content:"Check that the header is hidden",trigger:'iframe #wrapwrap:has(header#top.d-none.o_snippet_invisible)',run:()=>null,},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Click on 'header' in the invisible elements list",trigger:'.o_we_invisible_el_panel .o_we_invisible_entry',},wTourUtils.clickOnSnippet({id:'o_footer',name:'Footer'}),wTourUtils.changeOption('HideFooter','we-button[data-name="hide_footer_page_opt"] we-checkbox'),...wTourUtils.clickOnSave(),{content:"Check that the footer is hidden and the header is visible",trigger:'iframe #wrapwrap:has(.o_footer.d-none.o_snippet_invisible)',extra_trigger:'iframe #wrapwrap header#top:not(.d-none)',run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/website_snippets_menu_tabs.js */
odoo.define('@website/../tests/tours/website_snippets_menu_tabs',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour("website_snippets_menu_tabs",{test:true,url:"/",edition:true,},[wTourUtils.goToTheme(),{content:"Click on the empty 'DRAG BUILDING BLOCKS HERE' area.",extra_trigger:'we-customizeblock-option.snippet-option-ThemeColors',trigger:'iframe main > .oe_structure.oe_empty',run:'click',},wTourUtils.goToTheme(),{content:"Verify that the customize panel is not empty.",trigger:'.o_we_customize_panel > we-customizeblock-options',run:()=>null,},{content:"Click on the style tab.",trigger:'#snippets_menu .o_we_customize_snippet_btn',},wTourUtils.goToTheme(),{content:"Verify that the customize panel is not empty.",trigger:'.o_we_customize_panel > we-customizeblock-options',run:()=>null,},]);return __exports;});;

/* /website/static/tests/tours/website_style_edition.js */
odoo.define("website.tour.website_style_edition",function(require){"use strict";const wTourUtils=require("website.tour_utils");const TARGET_FONT_SIZE=30;const checkFontSize=function(actions){const style=actions.tip_widget.el.ownerDocument.defaultView.getComputedStyle(this.$anchor[0]);if(style.fontSize!==`${TARGET_FONT_SIZE}px`){console.error(`Expected the font-size to be equal to ${TARGET_FONT_SIZE}px but found ${style.fontSize} instead`);}};wTourUtils.registerWebsitePreviewTour("website_style_edition",{test:true,url:'/',edition:true,},[{content:"Go to theme options",trigger:'.o_we_customize_theme_btn',},{content:"Change font size",trigger:'[data-variable="font-size-base"] input',run:`text_blur ${TARGET_FONT_SIZE}`,},{content:"Check the font size was properly adapted",trigger:'iframe #wrapwrap',extra_trigger:'iframe html:not(:has(link[href$="web.assets_frontend.min.css"]))',run:checkFontSize,},...wTourUtils.clickOnSave(),{content:"Check the font size is still ok outside of edit mode",trigger:'iframe body:not(.editor_enable) #wrapwrap',run:checkFontSize,},...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.goToTheme(),{content:"Click on the Background Image selection",trigger:'[data-customize-body-bg-type="\'image\'"]:not(.active)',extra_trigger:'[data-customize-body-bg-type="NONE"].active',},{content:"The media dialog should open",trigger:'.o_select_media_dialog',run:()=>{},}]);});;

/* /website/static/tests/tours/website_text_edition.js */
odoo.define('@website/../tests/tours/website_text_edition',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const WEBSITE_MAIN_COLOR='#ABCDEF';wTourUtils.registerWebsitePreviewTour('website_text_edition',{test:true,url:'/',edition:true,},[{content:"Go to theme options",trigger:'.o_we_customize_theme_btn',},{content:"Open colorpicker to change website main color",trigger:'we-select[data-color="o-color-1"] .o_we_color_preview',},{content:"Input the value for the new website main color (also make sure it is independent from the backend)",trigger:'.o_hex_input',run:`text_blur ${WEBSITE_MAIN_COLOR}`,},{content:"Go to the blocks tab",trigger:'.o_we_add_snippet_btn',},wTourUtils.dragNDrop({id:'s_text_block',name:'Text'}),{content:"Click on the text block first paragraph (to auto select)",trigger:'iframe .s_text_block p',},{content:"Open the foreground colorpicker",trigger:'#oe-text-color',},{content:"Go to the 'solid' tab",trigger:'.o_we_colorpicker_switch_pane_btn[data-target="custom-colors"]',},{content:"Input the website main color explicitly",trigger:'.o_hex_input',run:`text_blur ${WEBSITE_MAIN_COLOR}`,},{content:"Check that paragraph now uses the main color *class*",trigger:'iframe .s_text_block p',run:function(actions){const fontEl=this.$anchor[0].querySelector('font');if(!fontEl){console.error("A background color should have been applied");return;}
if(fontEl.style.backgroundColor){console.error("The paragraph should not have an inline style background color");return;}
if(!fontEl.classList.contains('text-o-color-1')){console.error("The paragraph should have the right background color class");return;}},}]);return __exports;});;

/* /website/static/tests/tours/widget_lifecycle.js */
odoo.define('@website/../tests/tours/widget_lifecycle',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");const localStorageKey='widgetAndWysiwygLifecycle';wTourUtils.registerWebsitePreviewTour("widget_lifecycle",{test:true,url:"/",edition:true,},[wTourUtils.dragNDrop({id:"s_countdown",name:"Countdown",}),{content:"Wait for the widget to be started and empty the widgetAndWysiwygLifecycle list",trigger:"iframe .s_countdown.public_widget_started",run:()=>{window.localStorage.setItem(localStorageKey,'[]');},},...wTourUtils.clickOnSave(),{content:"Wait for the widget to be started",trigger:"iframe .s_countdown.public_widget_started",run:()=>{},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"Wait for the widget to be started and check the order of the lifecycle method call of the widget and the wysiwyg",trigger:"iframe .s_countdown.public_widget_started",run:()=>{const result=JSON.parse(window.localStorage.widgetAndWysiwygLifecycle);const expected=["widgetStop","wysiwygStop","wysiwygStop","widgetStart","widgetStop","wysiwygStart","wysiwygStarted","widgetStart",];const alternative=["widgetStop","wysiwygStop","widgetStart","wysiwygStop","widgetStop","wysiwygStart","wysiwygStarted","widgetStart",];const resultIsEqualTo=(arr)=>{return arr.length===result.length&&arr.every((item,i)=>item===result[i]);};if(!(resultIsEqualTo(expected)||resultIsEqualTo(alternative))){console.error(`
                    Expected: ${expected.toString()}
                    Or:       ${alternative.toString()}
                    Result:   ${result.toString()}
                `);}},},]);return __exports;});;

/* /website/static/src/client_actions/website_preview/website_preview_test_mode.js */
odoo.define('@website/client_actions/website_preview/website_preview_test_mode',async function(require){'use strict';let __exports={};const{patch}=require('web.utils');const{WebsitePreview}=require('@website/client_actions/website_preview/website_preview');patch(WebsitePreview.prototype,'website_preview_test_mode',{get testMode(){return true;}});return __exports;});;

/* /website_sale/static/tests/tours/website_sale_add_to_cart_snippet_tour.js */
odoo.define('@website_sale/../tests/tours/website_sale_add_to_cart_snippet_tour',async function(require){'use strict';let __exports={};const wsTourUtils=require('website_sale.tour_utils');const wTourUtils=require('website.tour_utils');function editAddToCartSnippet(){return[...wTourUtils.clickOnEditAndWaitEditMode(),wTourUtils.clickOnSnippet({id:'s_add_to_cart'})]}
wTourUtils.registerWebsitePreviewTour('add_to_cart_snippet_tour',{url:'/',edition:true,test:true,},[wTourUtils.dragNDrop({name:'Add to Cart Button'}),wTourUtils.clickOnSnippet({id:'s_add_to_cart'}),...wTourUtils.selectElementInWeSelectWidget('product_template_picker_opt','Acoustic Bloc Screens',true),...wTourUtils.clickOnSave(),wTourUtils.clickOnElement('add to cart button','iframe .s_add_to_cart_btn'),...editAddToCartSnippet(),...wTourUtils.selectElementInWeSelectWidget('product_template_picker_opt','Conference Chair',true),...wTourUtils.clickOnSave(),wTourUtils.clickOnElement('add to cart button','iframe .s_add_to_cart_btn'),wTourUtils.clickOnElement('continue shopping','iframe span:contains(Continue Shopping)'),...editAddToCartSnippet(),...wTourUtils.selectElementInWeSelectWidget('product_template_picker_opt','Conference Chair',true),...wTourUtils.selectElementInWeSelectWidget('product_variant_picker_opt','Conference Chair (Aluminium)'),...wTourUtils.clickOnSave(),wTourUtils.clickOnElement('add to cart button','iframe .s_add_to_cart_btn'),...editAddToCartSnippet(),...wTourUtils.selectElementInWeSelectWidget('product_template_picker_opt','Acoustic Bloc Screens',true),...wTourUtils.selectElementInWeSelectWidget('action_picker_opt','Buy Now'),...wTourUtils.clickOnSave(),wTourUtils.clickOnElement('add to cart button','iframe .s_add_to_cart_btn'),wTourUtils.assertPathName('/shop/payment','button[name=o_payment_submit_button]'),wsTourUtils.goToCart({quantity:4,backend:false}),wsTourUtils.assertCartContains({productName:'Acoustic Bloc Screens'}),wsTourUtils.assertCartContains({productName:'Conference Chair (Steel)'}),wsTourUtils.assertCartContains({productName:'Conference Chair (Aluminium)'}),],);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_buy.js */
odoo.define('website_sale.tour',function(require){'use strict';var tour=require("web_tour.tour");const tourUtils=require('website_sale.tour_utils');tour.register('shop_buy_product',{test:true,url:'/shop',},[{content:"search conference chair",trigger:'form input[name="search"]',run:"text conference chair",},{content:"search conference chair",trigger:'form:has(input[name="search"]) .oe_search_button',},{content:"select conference chair",trigger:'.oe_product_cart:first a:contains("Conference Chair")',},{content:"select Conference Chair Aluminium",extra_trigger:'#product_detail',trigger:'label:contains(Aluminium) input',},{content:"select Conference Chair Steel",extra_trigger:'#product_detail',trigger:'label:contains(Steel) input',},{id:'add_cart_step',content:"click on add to cart",extra_trigger:'label:contains(Steel) input:propChecked',trigger:'#product_detail form[action^="/shop/cart/update"] #add_to_cart',},tourUtils.goToCart(),{content:"add suggested",extra_trigger:'#wrap:not(:has(#cart_products:contains("Storage Box")))',trigger:'.oe_cart:has(tr:contains("Storage Box")) a:contains("Add to Cart")',},{content:"add one more",extra_trigger:'#cart_products tr:contains("Storage Box")',trigger:'#cart_products tr:contains("Steel") a.js_add_cart_json:eq(1)',},{content:"remove Storage Box",extra_trigger:'#cart_products tr:contains("Steel") input.js_quantity:propValue(2)',trigger:'#cart_products tr:contains("Storage Box") a.js_add_cart_json:first',},{content:"set one",extra_trigger:'#wrap:not(:has(#cart_products tr:contains("Storage Box")))',trigger:'#cart_products input.js_quantity',run:'text 1',},{content:"go to checkout",extra_trigger:'#cart_products input.js_quantity:propValue(1)',trigger:'a[href*="/shop/checkout"]',},{content:"select payment",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay Now",extra_trigger:'#payment_method label:contains("Wire Transfer") input:checked,#payment_method:not(:has("input:radio:visible"))',trigger:'button[name="o_payment_submit_button"]:visible:not(:disabled)',},{content:"finish",trigger:'.oe_website_sale:contains("Please use the following transfer details")',run:function(){window.location.href='/contactus';},timeout:30000,},{content:"wait page loaded",trigger:'h1:contains("Contact us")',run:function(){},},]);});;

/* /website_sale/static/tests/tours/website_sale_cart_popover.js */
odoo.define('@website_sale/../tests/tours/website_sale_cart_popover',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const wTourUtils=require('website.tour_utils');tour.register('website_sale_cart_popover_tour',{test:true,url:'/shop',},[{content:"Search for the product",trigger:'form input[name="search"]',run:'text website_sale_cart_popover_tour_product'},wTourUtils.clickOnElement('Search','form:has(input[name="search"]) .oe_search_button'),wTourUtils.clickOnElement('website_sale_cart_popover_tour_product','a:contains(website_sale_cart_popover_tour_product)'),wTourUtils.clickOnElement('Add to Cart','#product_detail form[action^="/shop/cart/update"] #add_to_cart'),{content:"hover on cart popover",trigger:'#top_menu a[href$="/shop/cart"]',run:()=>{$('#top_menu a[href$="/shop/cart"]').mouseenter();},},{content:"check that popover is visible",trigger:'.mycart-popover:visible',run:()=>{},},{content:"hover on cart popover",trigger:'#top_menu a[href$="/shop/cart"]',run:()=>{$('#top_menu a[href$="/shop/cart"]').mouseleave();},},{content:"check that popover is not visible",trigger:':not(.mycart-popover:visible)',run:()=>{},},]);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_category_page_and_products_snippet.js */
odoo.define('@website_sale/../tests/tours/website_sale_category_page_and_products_snippet',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const wTourUtils=require('website.tour_utils');const PRODUCT_CATEGORY_ID=2;wTourUtils.registerWebsitePreviewTour('category_page_and_products_snippet_edition',{test:true,url:`/shop/category/${PRODUCT_CATEGORY_ID}`,edition:true,},[Object.assign(wTourUtils.dragNDrop({id:'s_dynamic_snippet_products',name:'Products'}),{content:"Drag and drop the product snippet inside the category area",run:'drag_and_drop iframe #category_header',}),{content:"Click on the product snippet to show its options",trigger:'iframe #category_header .s_dynamic_snippet_products',},{content:"Open category option dropdown",trigger:'we-select[data-attribute-name="productCategoryId"] we-toggler',},{content:"Choose the option to use the current page's category",trigger:'we-button[data-select-data-attribute="current"]',},...wTourUtils.clickOnSave(),]);tour.register('category_page_and_products_snippet_use',{test:true,url:`/shop/category/${PRODUCT_CATEGORY_ID}`,},[{content:"Check that the snippet displays the right products",trigger:'#category_header .s_dynamic_snippet_products:has(.o_carousel_product_img_link)',run:function(actions){const productGridEl=this.$anchor[0].closest('#products_grid');const regex=new RegExp(`^/shop/[\\w-/]+-(\\d+)\\?category=${PRODUCT_CATEGORY_ID}$`);const allPageProductIDs=[...productGridEl.querySelectorAll('.oe_product_image_link')].map(el=>el.getAttribute('href').match(regex)[1]);const $shownProductLinks=this.$anchor.find('.o_carousel_product_img_link');const regex2=new RegExp(`^/shop/[\\w-/]+-(\\d+)(?:#attr=\\d*)?$`);for(const shownProductLinkEl of $shownProductLinks){const productID=shownProductLinkEl.getAttribute('href').match(regex2)[1];if(!allPageProductIDs.includes(productID)){console.error(`The snippet displays a product (${productID}) which does not belong to the current category (${allPageProductIDs})`);}}},},]);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_complete_flow.js */
odoo.define('website_sale_tour.tour',function(require){'use strict';var tour=require("web_tour.tour");var rpc=require("web.rpc");const tourUtils=require('website_sale.tour_utils');tour.register('website_sale_tour_1',{test:true,url:'/shop?search=Storage Box Test',},[{content:"Open product page",trigger:'.oe_product_cart a:contains("Storage Box Test")',},{content:"Add one more storage box",trigger:'.js_add_cart_json:eq(1)',},{content:"Check b2b Tax-Excluded Prices",trigger:'.product_price .oe_price .oe_currency_value:containsExact(79.00)',run:function(){},},{content:"Click on add to cart",trigger:'#add_to_cart',},tourUtils.goToCart({quantity:2}),{content:"Check for 2 products in cart and proceed to checkout",extra_trigger:'#cart_products tr:contains("Storage Box Test") input.js_quantity:propValue(2)',trigger:'a[href*="/shop/checkout"]',},{content:"Check Price b2b subtotal",trigger:'tr#order_total_untaxed .oe_currency_value:containsExact(158.00)',run:function(){},},{content:"Check Price b2b Sale Tax(15%)",trigger:'tr#order_total_taxes .oe_currency_value:containsExact(23.70)',run:function(){},},{content:"Check Price b2b Total amount",trigger:'tr#order_total .oe_currency_value:containsExact(181.70)',run:function(){},},{content:"Fulfill billing address form",trigger:'select[name="country_id"]',run:function(){$('input[name="name"]').val('abc');$('input[name="phone"]').val('99999999');$('input[name="email"]').val('abc@odoo.com');$('input[name="street"]').val('SO1 Billing Street, 33');$('input[name="city"]').val('SO1BillingCity');$('input[name="zip"]').val('10000');$('#country_id option:eq(1)').attr('selected',true);},},{content:"Shipping address is not same as billing address",trigger:'#shipping_use_same',},{content:"Click on next button",trigger:'.oe_cart .btn:contains("Next")',},{content:"Fulfill shipping address form",trigger:'select[name="country_id"]',extra_trigger:'h2:contains("Shipping Address")',run:function(){$('input[name="name"]').val('def');$('input[name="phone"]').val('8888888888');$('input[name="street"]').val('17, SO1 Shipping Road');$('input[name="city"]').val('SO1ShippingCity');$('input[name="zip"]').val('10000');$('#country_id option:eq(1)').attr('selected',true);},},{content:"Click on next button",trigger:'.oe_cart .btn:contains("Next")',},{content:"Check selected billing address is same as typed in previous step",trigger:'#shipping_and_billing:contains(SO1 Billing Street, 33):contains(SO1BillingCity):contains(Afghanistan)',run:function(){},},{content:"Check selected shipping address is same as typed in previous step",trigger:'#shipping_and_billing:contains(17, SO1 Shipping Road):contains(SO1ShippingCity):contains(Afghanistan)',run:function(){},},{content:"Click for edit address",trigger:'a:contains("Edit") i',},{content:"Click for edit billing address",trigger:'.js_edit_address:first',},{content:"Change billing address form",trigger:'select[name="country_id"]',extra_trigger:'h2:contains("Your Address")',run:function(){$('input[name="name"]').val('abcd');$('input[name="phone"]').val('11111111');$('input[name="street"]').val('SO1 Billing Street Edited, 33');$('input[name="city"]').val('SO1BillingCityEdited');},},{content:"Click on next button",trigger:'.oe_cart .btn:contains("Next")',},{content:"Confirm Address",trigger:'a.btn:contains("Confirm")',},{content:"Check selected billing address is same as typed in previous step",trigger:'#shipping_and_billing:contains(SO1 Billing Street Edited, 33):contains(SO1BillingCityEdited):contains(Afghanistan)',run:function(){},},{content:"Select `Wire Transfer` payment method",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay Now",trigger:'button[name="o_payment_submit_button"]:visible:not(:disabled)',},{content:"Sign up",trigger:'.oe_cart a:contains("Sign Up")',},{content:"Submit login",trigger:'.oe_signup_form',run:function(){$('.oe_signup_form input[name="password"]').val("1admin@admin");$('.oe_signup_form input[name="confirm_password"]').val("1admin@admin");$('.oe_signup_form').submit();},},{content:"See Quotations",trigger:'.o_portal_docs a:contains("Quotations")',},{content:"Open Dropdown for logout",trigger:'#top_menu li.dropdown:visible a:contains("abcd")',},{content:"Logout",trigger:'#o_logout:contains("Logout")',},{content:"Sign in as admin",trigger:'header a[href="/web/login"]',},{content:"Submit login",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("admin");$('.oe_login_form input[name="password"]').val("admin");$('.oe_login_form input[name="redirect"]').val("/");$('.oe_login_form').submit();},},{content:"Configuration Settings for 'Tax Included' and sign up 'On Invitation'",extra_trigger:'.o_frontend_to_backend_nav',trigger:'#wrapwrap',run:function(){var def1=rpc.query({model:'res.config.settings',method:'create',args:[{'auth_signup_uninvited':'b2b','show_line_subtotals_tax_selection':'tax_included','group_show_line_subtotals_tax_excluded':false,'group_show_line_subtotals_tax_included':true,}],});var def2=def1.then(function(resId){return rpc.query({model:'res.config.settings',method:'execute',args:[[resId]],});});def2.then(function(){window.location.href='/web/session/logout?redirect=/shop?search=Storage Box Test';});},},{content:"Open product page",trigger:'.oe_product_cart a:contains("Storage Box Test")',},{content:"Add one more Storage Box Test",trigger:'.js_add_cart_json:eq(1)',},{content:"Check b2c Tax-Included Prices",trigger:'.product_price .oe_price .oe_currency_value:containsExact(90.85)',run:function(){},},{content:"Click on add to cart",trigger:'#add_to_cart',},tourUtils.goToCart({quantity:2}),{content:"Check for 2 products in cart and proceed to checkout",extra_trigger:'#cart_products tr:contains("Storage Box Test") input.js_quantity:propValue(2)',trigger:'a[href*="/shop/checkout"]',},{content:"Check Price b2c total",trigger:'tr#order_total_untaxed .oe_currency_value:containsExact(158.00)',run:function(){},},{content:"Check Price b2c Sale Tax(15%)",trigger:'tr#order_total_taxes .oe_currency_value:containsExact(23.70)',run:function(){},},{content:"Check Price b2c Total amount",trigger:'tr#order_total .oe_currency_value:containsExact(181.70)',run:function(){},},{content:"Click on Sign in Button",trigger:'.oe_cart a:contains(" Sign in")',},{content:"Submit login",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("abc@odoo.com");$('.oe_login_form input[name="password"]').val("1admin@admin");$('.oe_login_form').submit();},},{content:"Add new shipping address",trigger:'.one_kanban form[action^="/shop/address"] .btn',},{content:"Fulfill shipping address form",trigger:'select[name="country_id"]',run:function(){$('input[name="name"]').val('ghi');$('input[name="phone"]').val('7777777777');$('input[name="street"]').val('SO2New Shipping Street, 5');$('input[name="city"]').val('SO2NewShipping');$('input[name="zip"]').val('1200');$('#country_id option:eq(1)').attr('selected',true);},},{content:"Click on next button",trigger:'.oe_cart .btn:contains("Next")',},{content:"Select `Wire Transfer` payment method",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay Now",extra_trigger:'#payment_method label:contains("Wire Transfer") input:checked,#payment_method:not(:has("input:radio:visible"))',trigger:'button[name="o_payment_submit_button"]:visible:not(:disabled)',},{content:"Open Dropdown for See quotation",extra_trigger:'.oe_cart .oe_website_sale_tx_status',trigger:'#top_menu li.dropdown:visible a:contains("abc")',},{content:"My account",extra_trigger:'#top_menu li.dropdown .js_usermenu.show',trigger:'#top_menu .dropdown-menu a[href="/my/home"]:visible',},{content:"See Quotations",trigger:'.o_portal_docs a:contains("Quotations") .badge:containsExact(2)',},{content:"Open Dropdown for logout",trigger:'#top_menu li.dropdown:visible a:contains("abc")',},{content:"Logout",trigger:'#o_logout:contains("Logout")',},{content:"Sign in as admin",trigger:'header a[href="/web/login"]',},{content:"Submit login",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("admin");$('.oe_login_form input[name="password"]').val("admin");$('.oe_login_form input[name="redirect"]').val("/shop/cart");$('.oe_login_form').submit();},}]);tour.register('website_sale_tour_2',{test:true,url:'/shop/cart',},[{content:"Open Dropdown for logout",extra_trigger:'.progress-wizard-step:contains("Extra Info")',trigger:'#top_menu li.dropdown:visible a:contains("Mitchell Admin")',},{content:"Logout",trigger:'#o_logout:contains("Logout")',},{content:"Sign in as abc",trigger:'header a[href="/web/login"]',},{content:"Submit login",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("abc@odoo.com");$('.oe_login_form input[name="password"]').val("1admin@admin");$('.oe_login_form input[name="redirect"]').val("/shop?search=Storage Box Test");$('.oe_login_form').submit();},},{content:"Open product page",trigger:'.oe_product_cart a:contains("Storage Box Test")',},{content:"Click on add to cart",trigger:'#add_to_cart',},tourUtils.goToCart(),{content:"Proceed to checkout",trigger:'a[href*="/shop/checkout"]',},{content:"Click on next button",trigger:'.oe_cart .btn:contains("Next")',},{content:"Check selected billing address is same as typed in previous step",trigger:'#shipping_and_billing:contains(SO1 Billing Street Edited, 33):contains(SO1BillingCityEdited):contains(Afghanistan)',run:function(){},},{content:"Check selected shipping address is same as typed in previous step",trigger:'#shipping_and_billing:contains(SO2New Shipping Street, 5):contains(SO2NewShipping):contains(Afghanistan)',run:function(){},},{content:"Select `Wire Transfer` payment method",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay Now",extra_trigger:'#payment_method label:contains("Wire Transfer") input:checked,#payment_method:not(:has("input:radio:visible"))',trigger:'button[name="o_payment_submit_button"]:visible',}]);});;

/* /website_sale/static/tests/tours/website_sale_complete_flow_backend.js */
odoo.define('@website_sale/../tests/tours/website_sale_complete_flow_backend',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('website_sale_tour_backend',{test:true,url:'/shop/cart',edition:true,},[{content:"open customize tab",trigger:'.o_we_customize_snippet_btn',},{content:"Enable Extra step",extra_trigger:'#oe_snippets .o_we_customize_panel',trigger:'[data-customize-website-views="website_sale.extra_info_option"] we-checkbox',},...wTourUtils.clickOnSave(),],);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_fiscal_position_tour.js */
odoo.define('website_sale_tour.website_sale_fiscal_position_tour',function(require){'use strict';var tour=require("web_tour.tour");tour.register('website_sale_fiscal_position_portal_tour',{test:true,url:'/shop?search=Super%20Product'},[{content:"Check price",trigger:".oe_product:contains('Super product') .product_price:contains('80.00')",run:function(){}},]);tour.register('website_sale_fiscal_position_public_tour',{test:true,url:'/shop?search=Super%20Product'},[{content:"Toggle Pricelist",trigger:".o_pricelist_dropdown > .dropdown-toggle",run:'click',},{content:"Change Pricelist",trigger:".dropdown-item:contains('EUROPE EUR')",run:'click',},{content:"Check price",trigger:".oe_product:contains('Super product') .product_price:contains('92.00')",run:function(){}},]);});;

/* /website_sale/static/tests/tours/website_sale_google_analytics.js */
odoo.define('website_sale.google_analytics',function(require){'use strict';const tour=require("web_tour.tour");const websiteSaleTracking=require('website_sale.tracking');let itemId;websiteSaleTracking.include({_onViewItem(event,data){$('body').attr('view-event-id',data.item_id);},_onAddToCart(event,data){$('body').attr('cart-event-id',data.item_id);},});tour.register('google_analytics_view_item',{test:true,url:'/shop?search=Customizable Desk',},[{content:"select customizable desk",trigger:'.oe_product_cart a:contains("Customizable Desk")',},{content:"wait until `_getCombinationInfo()` rpc is done",trigger:'body[view-event-id]',timeout:25000,run:()=>{const $body=$('body');itemId=$body.attr('view-event-id');$body.removeAttr('view-event-id');}},{content:'select another variant',extra_trigger:'body:not([view-event-id])',trigger:'ul.js_add_cart_variants ul.list-inline li:has(label.active) + li:has(label) input',},{content:'wait until `_getCombinationInfo()` rpc is done (2)',trigger:`body[view-event-id][view-event-id!=${itemId}]`,timeout:25000,run:()=>{},},]);tour.register('google_analytics_add_to_cart',{test:true,url:'/shop?search=Acoustic Bloc Screens',},[{content:"select Acoustic Bloc Screens",trigger:'.oe_product_cart a:contains("Acoustic Bloc Screens")',},{content:"click add to cart button on product page",trigger:'#add_to_cart',},{content:'check add to cart event',extra_trigger:'body[cart-event-id]',trigger:'a:has(.my_cart_quantity:containsExact(1))',timeout:25000,run:()=>{},},]);});;

/* /website_sale/static/tests/tours/website_sale_remove_product_image.js */
odoo.define('@website_sale/../tests/tours/website_sale_remove_product_image',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");const clickOnImgAndWaitForLoad=[{content:"Click on the product image",trigger:"iframe #o-carousel-product img[alt='Test Remove Image']",},{content:"Check that the snippet editor of the clicked image has been loaded",trigger:"we-customizeblock-options:has(we-title:contains('Re-order'))",run:()=>null,},];const enterEditModeOfTestProduct=[{content:"Click on the product anchor",trigger:"iframe a:contains('Test Remove Image')",},...wTourUtils.clickOnEditAndWaitEditMode(),];const removeImg=[{content:"Click on Remove",trigger:"we-customizeblock-options:has(we-title:contains('Image')) we-button[data-name='media_wsale_remove']",},{content:"Check that the snippet editor is not visible",trigger:".o_we_customize_panel:not(:has(we-customizeblock-options:has(we-title:contains('Re-order'))))",run:()=>null,},];wTourUtils.registerWebsitePreviewTour("add_and_remove_main_product_image_no_variant",{url:"/shop?search=Test Remove Image",test:true,},[...enterEditModeOfTestProduct,{content:"Double click on the product image",trigger:"iframe #o-carousel-product img[alt='Test Remove Image']",run:"dblclick",},{content:"Click on the new image",trigger:".o_select_media_dialog img[title='s_default_image.jpg']",},{content:"Check that the snippet editor of the clicked image has been loaded",trigger:"we-customizeblock-options:has(we-title:contains('Re-order'))",run:()=>null,},...removeImg,]);wTourUtils.registerWebsitePreviewTour("remove_main_product_image_with_variant",{url:"/shop?search=Test Remove Image",test:true,},[...enterEditModeOfTestProduct,...clickOnImgAndWaitForLoad,...wTourUtils.clickOnSave(),...wTourUtils.clickOnEditAndWaitEditMode(),...clickOnImgAndWaitForLoad,...removeImg,]);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_reorder_from_portal.js */
odoo.define('@website_sale/../tests/tours/website_sale_reorder_from_portal',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const wsTourUtils=require('website_sale.tour_utils');const wTourUtils=require('website.tour_utils');tour.register('website_sale_reorder_from_portal',{test:true,url:'/my/orders',},[{content:'Select first order',trigger:'.o_portal_my_doc_table a:first',},wTourUtils.clickOnElement('Reorder Again','.o_wsale_reorder_button'),wTourUtils.clickOnElement('Confirm','.o_wsale_reorder_confirm'),wsTourUtils.assertCartContains({productName:'Reorder Product 1'}),wsTourUtils.assertCartContains({productName:'Reorder Product 2'}),{content:"Check that quantity is 1",trigger:".js_quantity[value='1']",},{content:"Go back to my orders",trigger:"body",run:()=>{window.location="/my/orders";}},{content:'Select first order',trigger:'.o_portal_my_doc_table a:first',},wTourUtils.clickOnElement('Reorder Again','.o_wsale_reorder_button'),wTourUtils.clickOnElement('Confirm','.o_wsale_reorder_confirm'),wTourUtils.clickOnElement('No','button:contains(No)'),wsTourUtils.assertCartContains({productName:'Reorder Product 1'}),wsTourUtils.assertCartContains({productName:'Reorder Product 2'}),{content:"Check that quantity is 2",trigger:".js_quantity[value='2']",},{content:"Go back to my orders",trigger:"body",run:()=>{window.location="/my/orders";}},{content:'Select first order',trigger:'.o_portal_my_doc_table a:first',},wTourUtils.clickOnElement('Reorder Again','.o_wsale_reorder_button'),wTourUtils.clickOnElement('Confirm','.o_wsale_reorder_confirm'),wTourUtils.clickOnElement('Yes','button:contains(Yes)'),wsTourUtils.assertCartContains({productName:'Reorder Product 1'}),wsTourUtils.assertCartContains({productName:'Reorder Product 2'}),{content:"Check that quantity is 1",trigger:".js_quantity[value='1']",},]);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_restricted_editor_ui.js */
odoo.define('@website_sale/../tests/tours/website_sale_restricted_editor_ui',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('website_sale_restricted_editor_ui',{test:true,url:`/shop`,},[{content:"Open the site menu to check what is inside",trigger:'[data-menu-xmlid="website.menu_site"]',},{content:"First check the user is not a designer",trigger:'.dropdown-menu:has([data-menu-xmlid="website_sale.menu_product_pages"]):not(:has([data-menu-xmlid="website.menu_website_pages_list"]))',},{content:"Ensure the publish and 'edit-in-backend' buttons are not shown",trigger:'.o_menu_systray:not(:has(.o_switch_danger_success)):not(:has(.o_website_edit_in_backend))',extra_trigger:'.o_menu_systray .o_edit_website_container a',},{content:"Navigate to the first product",trigger:'iframe .oe_product_image_link',},{content:"Click on publish/unpublish",trigger:'.o_menu_systray_item .o_switch_danger_success:has(input:checked)',},{content:"Click on edit-in-backend",trigger:'.o_menu_systray .o_website_edit_in_backend a',extra_trigger:'.o_menu_systray_item:not([data-processing]) .o_switch_danger_success:has(input:not(:checked))',},{content:"Check that you landed on a form view and that the record was unpublished",trigger:'.o_form_sheet [name="is_published"] .fa-globe.text-danger',run:()=>{},},]);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_shop_archived_variant_multi.js */
odoo.define('@website_sale/../tests/tours/website_sale_shop_archived_variant_multi',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');function fail(errorMessage){tour._consume_tour(tour.running_tour,errorMessage);}
function assert(current,expected,info){if(current!==expected){fail(info+': "'+current+'" instead of "'+expected+'".');}}
tour.register('tour_shop_archived_variant_multi',{test:true,url:'/shop?search=Test Product 2',},[{content:"select Test Product",trigger:'.oe_product_cart a:containsExact("Test Product 2")',},{content:'click on the first variant',trigger:'input[data-attribute_name="Size"][data-value_name="Small"]',},{content:"click on the second variant",trigger:'input[data-attribute_name="Color"][data-value_name="Black"]',},{content:"Check that brand b is not available and select it",trigger:'.css_not_available input[data-attribute_name="Brand"][data-value_name="Brand B"]',},{content:"check combination is not possible",trigger:'.js_main_product.css_not_available .css_not_available_msg:contains("This combination does not exist.")'},{content:"check add to cart not possible",trigger:'#add_to_cart.disabled',run:function(){},},{content:"change second variant to remove warning",trigger:'input[data-attribute_name="Color"][data-value_name="White"]',},{content:"Check that second variant is disabled",trigger:'.css_not_available input[data-attribute_name="Color"][data-value_name="Black"]',run:function(){},},]);tour.register('test_09_pills_variant',{test:true,url:'/shop?search=Test Product 2',},[{content:"select Test Product",trigger:'.oe_product_cart a:containsExact("Test Product 2")',},{content:"check there are two radio boxes, both hidden",trigger:'.js_main_product',run:function(){var buttons=$('input.js_variant_change');function isVisuallyHidden(elem){const style=window.getComputedStyle(elem);return style.display==="none"||style.visibility==="hidden"||style.opacity==="0"||(style.width==="0px"&&style.height==="0px")}
assert(buttons.length,2,"there should be two radio inputs")
assert(isVisuallyHidden(buttons[0]),true,"first radio input is not hidden")
assert(isVisuallyHidden(buttons[1]),true,"second radio input is not hidden")
assert(buttons[0].checked,true,"first radio input should be checked")},},{content:"click on the second variant label",trigger:'label:contains("Small")',},{content:'check second variant is selected',trigger:'li.o_variant_pills.active:contains("Small")',run:function(){var button=$('input.js_variant_change[data-attribute_name="Size"][data-value_name="Small"]');assert(button.length,1,"there should be one radio input")
assert(button[0].checked,true,"the radio input should be checked")}},]);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_shop_cart_recovery.js */
odoo.define('website_sale.tour_shop_cart_recovery',function(require){'use strict';var localStorage=require('web.local_storage');var tour=require('web_tour.tour');const tourUtils=require('website_sale.tour_utils');require('web.dom_ready');var orderIdKey='website_sale.tour_shop_cart_recovery.orderId';var recoveryLinkKey='website_sale.tour_shop_cart_recovery.recoveryLink';tour.register('shop_cart_recovery',{test:true,url:'/shop?search=Acoustic Bloc Screens',},[{content:"select Acoustic Bloc Screens",trigger:'.oe_product_cart a:containsExact("Acoustic Bloc Screens")',},{content:"click add to cart",trigger:'#product_details #add_to_cart',},tourUtils.goToCart(),{content:"check product is in cart, get cart id, logout, go to login",trigger:'td.td-product_name:contains("Acoustic Bloc Screens")',run:function(){var orderId=$('.my_cart_quantity').data('order-id');localStorage.setItem(orderIdKey,orderId);window.location.href="/web/session/logout?redirect=/web/login";},},{content:"login as admin and go to the SO (backend)",trigger:'.oe_login_form',run:function(){var orderId=localStorage.getItem(orderIdKey);var url="/web#action=sale.action_orders&view_type=form&id="+orderId;var $loginForm=$('.oe_login_form');$loginForm.find('input[name="login"]').val("admin");$loginForm.find('input[name="password"]').val("admin");$loginForm.find('input[name="redirect"]').val(url);$loginForm.submit();},},{content:"click action",trigger:'.dropdown-toggle:contains("Action")',},{content:"click Send a Cart Recovery Email",trigger:'span:containsExact("Send a Cart Recovery Email")',},{content:"click Send email",trigger:'.btn[name="action_send_mail"]',},{content:"check the mail is sent, grab the recovery link, and logout",trigger:'.o_Message_content a:containsExact("Resume order")',run:function(){var link=$('.o_Message_content a:containsExact("Resume order")').attr('href');localStorage.setItem(recoveryLinkKey,link);window.location.href="/web/session/logout?redirect=/";}},{content:"go to the recovery link",trigger:'a[href="/web/login"]',run:function(){window.location.href=localStorage.getItem(recoveryLinkKey);},},{content:"check the page is working, click on restore",extra_trigger:'p:contains("This is your current cart")',trigger:'p:contains("restore") a:contains("Click here")',},{content:"check product is in restored cart",trigger:'td.td-product_name:contains("Acoustic Bloc Screens")',run:function(){},},]);});;

/* /website_sale/static/tests/tours/website_sale_shop_compare_list_price_pricelist.js */
odoo.define('@website_sale/../tests/tours/website_sale_shop_compare_list_price_pricelist',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');const tourUtils=require('website_sale.tour_utils');tour.register('compare_list_price_price_list_display',{test:true,url:'/shop?search=test_product'},[tourUtils.assertProductPrice("price_reduce","1,000","test_product_default"),tourUtils.assertProductPrice("price_reduce","2,000","test_product_with_compare_list_price"),tourUtils.assertProductPrice("base_price","2,500","test_product_with_compare_list_price"),tourUtils.assertProductPrice("price_reduce","2,000","test_product_with_pricelist"),tourUtils.assertProductPrice("price_reduce","4,000","test_product_with_pricelist_and_compare_list_price"),tourUtils.assertProductPrice("base_price","4,500","test_product_with_pricelist_and_compare_list_price"),...tourUtils.selectPriceList('pricelist_other_currency'),tourUtils.assertProductPrice("price_reduce","2,000","test_product_default"),tourUtils.assertProductPrice("price_reduce","4,000","test_product_with_compare_list_price"),tourUtils.assertProductPrice("base_price","5,000","test_product_with_compare_list_price"),tourUtils.assertProductPrice("price_reduce","4,000","test_product_with_pricelist"),tourUtils.assertProductPrice("price_reduce","8,000","test_product_with_pricelist_and_compare_list_price"),tourUtils.assertProductPrice("base_price","9,000","test_product_with_pricelist_and_compare_list_price"),...tourUtils.selectPriceList('pricelist_with_discount'),tourUtils.assertProductPrice("price_reduce","1,000","test_product_default"),tourUtils.assertProductPrice("price_reduce","2,000","test_product_with_compare_list_price"),tourUtils.assertProductPrice("base_price","2,500","test_product_with_compare_list_price"),tourUtils.assertProductPrice("price_reduce","1,500","test_product_with_pricelist"),tourUtils.assertProductPrice("price_reduce","3,500","test_product_with_pricelist_and_compare_list_price"),tourUtils.assertProductPrice("base_price","4,500","test_product_with_pricelist_and_compare_list_price"),...tourUtils.selectPriceList('pricelist_without_discount'),tourUtils.assertProductPrice("price_reduce","1,000","test_product_default"),tourUtils.assertProductPrice("price_reduce","2,000","test_product_with_compare_list_price"),tourUtils.assertProductPrice("base_price","2,500","test_product_with_compare_list_price"),tourUtils.assertProductPrice("price_reduce","1,500","test_product_with_pricelist"),tourUtils.assertProductPrice("base_price","2,000","test_product_with_pricelist"),tourUtils.assertProductPrice("price_reduce","3,500","test_product_with_pricelist_and_compare_list_price"),tourUtils.assertProductPrice("base_price","4,500","test_product_with_pricelist_and_compare_list_price"),]);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_shop_custom_attribute_value.js */
odoo.define("website_sale.tour_shop_custom_attribute_value",function(require){"use strict";var tour=require("web_tour.tour");const tourUtils=require('website_sale.tour_utils');tour.register("shop_custom_attribute_value",{url:"/shop?search=Customizable Desk",test:true,},[{content:"click on Customizable Desk",trigger:'.oe_product_cart a:contains("Customizable Desk (TEST)")',},{trigger:'li.js_attribute_value span:contains(Custom TEST)',extra_trigger:'li.js_attribute_value',run:'click',},{trigger:'input.variant_custom_value',run:'text Wood',},{id:'add_cart_step',trigger:'a:contains(ADD TO CART)',run:'click',},tourUtils.goToCart(),{trigger:'span:contains(Custom TEST: Wood)',extra_trigger:'#cart_products',run:function(){},}]);});;

/* /website_sale/static/tests/tours/website_sale_shop_customize.js */
odoo.define('@website_sale/../tests/tours/website_sale_shop_customize',async function(require){'use strict';let __exports={};const tourUtils=require('website_sale.tour_utils');const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('shop_customize',{url:'/shop',edition:true,test:true,},[...wTourUtils.clickOnSave(),{content:"select product attribute Steel",extra_trigger:"iframe body:not(.editor_enable)",trigger:'iframe form.js_attributes input:not(:checked) + label:contains(Steel - Test)',},{content:"check the selection",trigger:'iframe form.js_attributes input:checked + label:contains(Steel - Test)',run:function(){},},{content:"select product",extra_trigger:'iframe body:not(:has(.oe_website_sale .oe_product_cart:eq(3)))',trigger:'iframe .oe_product_cart a:contains("Test Product")',},{content:"check list view of variants is disabled initially",extra_trigger:"iframe #product_detail",trigger:'iframe body:not(:has(.js_product_change))',run:function(){},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"open customize tab",trigger:'.o_we_customize_snippet_btn',},{content:"open 'Variants' selector",extra_trigger:'#oe_snippets .o_we_customize_panel',trigger:'[data-name="variants_opt"] we-toggler',},{content:"click on 'Products List' of the 'Variants' selector",trigger:'we-button[data-name="variants_products_list_opt"]',},...wTourUtils.clickOnSave(),{context:"check variant price",extra_trigger:"iframe body:not(.editor_enable)",trigger:'iframe .form-check:contains("Aluminium") .badge:contains("+") .oe_currency_value:contains("50.4")',run:function(){},},{content:"check price is 750",trigger:"iframe .product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"switch to another variant",trigger:"iframe .js_product label:contains('Aluminium')",},{content:"verify that price has changed when changing variant",trigger:"iframe .product_price .oe_price .oe_currency_value:containsExact(800.40)",run:function(){},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"open customize tab",trigger:'.o_we_customize_snippet_btn',},{content:"open 'Variants' selector",extra_trigger:'#oe_snippets .o_we_customize_panel',trigger:'[data-name="variants_opt"] we-toggler',},{content:"click on 'Options' of the 'Variants' selector",trigger:'we-button[data-name="variants_options_opt"]',},...wTourUtils.clickOnSave(),{content:"check page loaded after list of variant customization disabled",extra_trigger:"iframe body:not(.editor_enable)",trigger:"iframe .js_product:not(:has(.js_product_change))",run:function(){},},{content:"check price is 750",trigger:"iframe .product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"switch to Aluminium variant",trigger:'iframe .js_product input[data-value_name="Aluminium"]',},{content:"verify that price has changed when changing variant",trigger:"iframe .product_price .oe_price .oe_currency_value:containsExact(800.40)",run:function(){},},{content:"switch back to Steel variant",trigger:"iframe .js_product label:contains('Steel - Test')",},{content:"check price is 750",trigger:"iframe .product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"click on 'Add to Cart' button",trigger:"iframe a:contains(ADD TO CART)",},{content:"check quantity",trigger:'iframe .my_cart_quantity:containsExact(1),.o_extra_menu_items .fa-plus',run:function(){},},tourUtils.goToCart({backend:true}),{content:"click on shop",trigger:"iframe a:contains(Continue Shopping)",extra_trigger:'iframe body:not(:has(#products_grid_before .js_attributes))',},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"open customize tab",trigger:'.o_we_customize_snippet_btn',},{content:"remove 'Attributes'",extra_trigger:'#oe_snippets .o_we_customize_panel',trigger:'we-button[data-name="attributes_opt"]',},...wTourUtils.clickOnSave(),{content:"wait to exit edit mode",trigger:'.o_website_preview:not(.editor_has_snippets)',},{content:"finish",extra_trigger:'iframe body:not(:has(#products_grid_before .js_attributes))',trigger:'iframe #wrap:not(:has(li:has(.my_cart_quantity):visible))',run:function(){},},],);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_shop_deleted_archived_variants.js */
odoo.define('website_sale.tour_shop_deleted_archived_variants',function(require){'use strict';var tour=require('web_tour.tour');tour.register('tour_shop_deleted_archived_variants',{test:true,url:'/shop?search=Test Product 2',},[{content:"check price on /shop (template price)",trigger:'.oe_product_cart .oe_currency_value:contains("1.00")',},{content:"select Test Product 2",trigger:'.oe_product_cart a:containsExact("Test Product 2")',},{content:"check price (3rd variant)",trigger:'.oe_currency_value:contains("31.00")'},{content:"click on the second variant",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 2"]',},{content:"check combination is not possible",trigger:'.js_main_product.css_not_available .css_not_available_msg:contains("This combination does not exist.")'},{content:"click on the 3rd variant to reset the warning",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 3"]',},{content:"check price (3rd variant)",trigger:'.oe_currency_value:contains("31.00")'},{content:"click on the first variant",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 1"]',},{content:"check combination is not possible",trigger:'.js_main_product.css_not_available .css_not_available_msg:contains("This combination does not exist.")'},{content:"check add to cart not possible",trigger:'#add_to_cart.disabled',run:function(){},}]);});;

/* /website_sale/static/tests/tours/website_sale_shop_dynamic_variants.js */
odoo.define('website_sale.tour_shop_dynamic_variants',function(require){'use strict';var tour=require('web_tour.tour');const tourUtils=require('website_sale.tour_utils');tour.register('tour_shop_dynamic_variants',{test:true,url:'/shop?search=Dynamic Product',},[{content:"select Dynamic Product",trigger:'.oe_product_cart a:containsExact("Dynamic Product")',},{content:"click on the second variant",trigger:'input[data-attribute_name="Dynamic Attribute"][data-value_name="Dynamic Value 2"]',},{content:"wait for variant to be loaded",trigger:'.oe_price .oe_currency_value:contains("0.00")',run:function(){},},{content:"click add to cart",extra_trigger:'body:has(input[type="hidden"][name="product_id"][value=0])',trigger:'#add_to_cart',},tourUtils.goToCart(),{content:"check the variant is in the cart",trigger:'td.td-product_name:contains(Dynamic Product (Dynamic Value 2))',},]);});;

/* /website_sale/static/tests/tours/website_sale_shop_editor_tour.js */
odoo.define('@website_sale/../tests/tours/website_sale_shop_editor_tour',async function(require){'use strict';let __exports={};const wTourUtils=require("website.tour_utils");wTourUtils.registerWebsitePreviewTour("shop_editor",{test:true,url:"/shop",edition:true,},[{content:"Click on pricelist dropdown",trigger:"iframe div.o_pricelist_dropdown a[data-bs-toggle=dropdown]",},{trigger:"iframe input[name=search]",extra_trigger:"iframe div.o_pricelist_dropdown a[data-bs-toggle=dropdown][aria-expanded=true]",content:"Click somewhere else in the shop.",},{trigger:"iframe div.o_pricelist_dropdown a[data-bs-toggle=dropdown]",extra_trigger:"iframe div.o_pricelist_dropdown a[data-bs-toggle=dropdown][aria-expanded=false]",content:"Click on the pricelist again.",}]);wTourUtils.registerWebsitePreviewTour("shop_editor_set_product_ribbon",{test:true,url:"/shop",edition:true,},[{content:"Click on first product",trigger:"iframe .oe_product:first",},{content:"Open the ribbon selector",trigger:".o_wsale_ribbon_select we-toggler",},{content:"Select a ribbon",trigger:'.o_wsale_ribbon_select we-button:contains("Sale")',},...wTourUtils.clickOnSave(),{content:"Check that the ribbon was properly saved",trigger:'iframe .oe_product:first .o_ribbon:contains("Sale")',run:()=>null,}]);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_shop_list_view_b2c.js */
odoo.define('@website_sale/../tests/tours/website_sale_shop_list_view_b2c',async function(require){'use strict';let __exports={};const tourUtils=require('website_sale.tour_utils');const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('shop_list_view_b2c',{test:true,url:'/shop?search=Test Product',},[{content:"check price on /shop",trigger:'iframe .oe_product_cart .oe_currency_value:contains("825.00")',run:()=>{},},{content:"select product",trigger:'iframe .oe_product_cart a:contains("Test Product")',},{content:"check products list is disabled initially (when on /product page)",trigger:'iframe body:not(:has(.js_product_change))',extra_trigger:'iframe #product_details',run:()=>{},},...wTourUtils.clickOnEditAndWaitEditMode(),{content:"open customize tab",trigger:'.o_we_customize_snippet_btn',},{content:"open 'Variants' selector",extra_trigger:'#oe_snippets .o_we_customize_panel',trigger:'[data-name="variants_opt"] we-toggler',},{content:"click on 'Products List' of the 'Variants' selector",trigger:'we-button[data-name="variants_products_list_opt"]',},...wTourUtils.clickOnSave(),{content:"check page loaded after 'Products List' enabled",trigger:'iframe .js_product_change',run:()=>{},},{context:"check variant price",trigger:'iframe .form-check:contains("Aluminium") .badge:contains("+") .oe_currency_value:contains("55.44")',run:()=>{},},{content:"check price is 825",trigger:'iframe .product_price .oe_price .oe_currency_value:containsExact(825.00)',run:()=>{},},{content:"switch to another variant",trigger:'iframe .js_product label:contains("Aluminium")',},{content:"verify that price has changed when changing variant",trigger:'iframe .product_price .oe_price .oe_currency_value:containsExact(880.44)',run:()=>{},},{content:"click on 'Add to Cart' button",trigger:'iframe a:contains(ADD TO CART)',},tourUtils.goToCart({backend:true}),{content:"check price on /cart",trigger:'iframe #cart_products .oe_currency_value:containsExact(880.44)',run:()=>{},},],);return __exports;});;

/* /website_sale/static/tests/tours/website_sale_shop_mail.js */
odoo.define('website_sale.tour_shop_mail',function(require){'use strict';var tour=require('web_tour.tour');const tourUtils=require('website_sale.tour_utils');require('web.dom_ready');tour.register('shop_mail',{test:true,url:'/shop?search=Acoustic Bloc Screens',},[{content:"select Acoustic Bloc Screens",trigger:'.oe_product_cart a:containsExact("Acoustic Bloc Screens")',},{content:"click add to cart",trigger:'#product_details #add_to_cart',},tourUtils.goToCart(),{content:"check product is in cart, get cart id, go to backend",trigger:'td.td-product_name:contains("Acoustic Bloc Screens")',run:function(){var orderId=$('.my_cart_quantity').data('order-id');window.location.href="/web#action=sale.action_orders&view_type=form&id="+orderId;},},{content:"click confirm",trigger:'.btn[name="action_confirm"]',},{content:"click send by email",trigger:'.btn[name="action_quotation_send"]',extra_trigger:'.o_statusbar_status .o_arrow_button_current:contains("Sales Order")',},{content:"Open recipients dropdown",trigger:'.o_field_many2many_tags_email[name=partner_ids] input',run:'click',},{content:"Select azure interior",trigger:'.ui-menu-item a:contains(Interior24)',in_modal:false,},{content:"click Send email",trigger:'.btn[name="action_send_mail"]',extra_trigger:'.o_badge_text:contains("Azure")',},{content:"wait mail to be sent, and go see it",trigger:'.o_Message_content:contains("Your"):contains("order")',},]);});;

/* /website_sale/static/tests/tours/website_sale_shop_no_variant_attribute.js */
odoo.define('website_sale.tour_shop_no_variant_attribute',function(require){'use strict';var tour=require('web_tour.tour');const tourUtils=require('website_sale.tour_utils');tour.register('tour_shop_no_variant_attribute',{test:true,url:'/shop?search=Test Product 3',},[{content:"select Test Product 3",trigger:'.oe_product_cart a:containsExact("Test Product 3")',},{content:"check price",trigger:'.oe_currency_value:contains("1.00")',run:function(){},},{content:"add to cart",trigger:'a:contains(ADD TO CART)',},tourUtils.goToCart(),{content:"check no_variant value is present",trigger:'.td-product_name:contains(No Variant Attribute: No Variant Value)',extra_trigger:'#cart_products',run:function(){},},{content:"check price is correct",trigger:'.td-price:contains(11.0)',run:function(){},},]);});;

/* /website_sale/static/tests/tours/website_sale_shop_pricelist_tour.js */
odoo.define('website_sale_tour.website_sale_shop_pricelist_tour',function(require){'use strict';var tour=require("web_tour.tour");tour.register('website_sale_shop_pricelist_tour',{test:true,url:'/shop'},[{content:"Check pricelist",trigger:".o_pricelist_dropdown:contains('Public Pricelist')",run:function(){}},{content:"Go to login page",trigger:".nav-link:contains('Sign in')"},{content:"Submit login",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("toto");$('.oe_login_form input[name="password"]').val("long_enough_password");$('.oe_login_form input[name="redirect"]').val("/shop");$('.oe_login_form').submit();}},{content:"Check pricelist",trigger:".o_pricelist_dropdown:contains('User Pricelist')",run:function(){}},]);});;

/* /website_sale/static/tests/tours/website_sale_shop_zoom.js */
odoo.define('website_sale.tour_shop_zoom',function(require){'use strict';var tour=require('web_tour.tour');var imageSelector='#o-carousel-product .carousel-item.active img';var imageName="A Colorful Image";var nameGreen="Forest Green";tour.register('shop_zoom',{test:true,url:'/shop?debug=1&search='+imageName,},[{content:"select "+imageName,trigger:'.oe_product_cart a:containsExact("'+imageName+'")',},{content:"click on the image",trigger:imageSelector,run:'clicknoleave',},{content:"check that the image viewer opened",trigger:'.o_wsale_image_viewer',run:()=>{},},{content:"close the image viewer",trigger:'.o_wsale_image_viewer_header span.fa-times',},{content:"change variant",trigger:'input[data-attribute_name="Beautiful Color"][data-value_name="'+nameGreen+'"]',run:'click',},{content:"wait for variant to be loaded",trigger:'.oe_currency_value:contains("21.00")'},{content:"click on the image",trigger:imageSelector,run:'clicknoleave',},{content:"check there is a zoom on that big image",trigger:'.o_wsale_image_viewer',run:()=>{},},]);});;

/* /website_sale/static/tests/tours/website_sale_snippet_products.js */
odoo.define('@website_sale/../tests/tours/website_sale_snippet_products',async function(require){'use strict';let __exports={};const wTourUtils=require('website.tour_utils');const wSaleTourUtils=require('website_sale.tour_utils');const optionBlock='dynamic_snippet_products';const productsSnippet={id:'s_dynamic_snippet_products',name:'Products'};const templates=["dynamic_filter_template_product_product_add_to_cart","dynamic_filter_template_product_product_view_detail","dynamic_filter_template_product_product_mini_image","dynamic_filter_template_product_product_mini_price","dynamic_filter_template_product_product_mini_name","dynamic_filter_template_product_product_centered","dynamic_filter_template_product_product_borderless_1","dynamic_filter_template_product_product_borderless_2","dynamic_filter_template_product_product_banner","dynamic_filter_template_product_product_horizontal_card","dynamic_filter_template_product_product_horizontal_card_2","dynamic_filter_template_product_product_card_group",];function changeTemplate(templateKey){const templateClass=templateKey.replace(/dynamic_filter_template_/,"s_");return[wTourUtils.changeOption(optionBlock,'we-select[data-name="template_opt"] we-toggler','template'),wTourUtils.changeOption(optionBlock,`we-button[data-select-data-attribute="website_sale.${templateKey}"]`),{content:'Check the template is applied',trigger:`iframe .s_dynamic_snippet_products.${templateClass} .carousel`,run:()=>null,},];}
let templatesSteps=[];for(const templateKey of templates){templatesSteps=templatesSteps.concat(changeTemplate(templateKey));}
wTourUtils.registerWebsitePreviewTour('website_sale.snippet_products',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop(productsSnippet),wTourUtils.clickOnSnippet(productsSnippet),...templatesSteps,...changeTemplate('dynamic_filter_template_product_product_add_to_cart'),...wTourUtils.clickOnSave(),{trigger:"iframe .s_dynamic_snippet_products .o_carousel_product_card_body .js_add_cart",run:'click',},wSaleTourUtils.goToCart({backend:true}),]);wTourUtils.registerWebsitePreviewTour('website_sale.products_snippet_recently_viewed',{test:true,url:'/',edition:true,},[wTourUtils.dragNDrop(productsSnippet),wTourUtils.clickOnSnippet(productsSnippet),...changeTemplate('dynamic_filter_template_product_product_add_to_cart'),wTourUtils.changeOption(optionBlock,'we-select[data-name="filter_opt"] we-toggler','filter'),wTourUtils.changeOption(optionBlock,'we-select[data-name="filter_opt"] we-button:contains("Recently Viewed")','filter'),...wTourUtils.clickOnSave(),{content:'make delete icon appear',trigger:'iframe .s_dynamic_snippet_products .o_carousel_product_card',run:function(){const $iframe=$('.o_iframe').contents();const $productCard=$iframe.find('.o_carousel_product_card:has(a img[alt="Storage Box"])');console.log($productCard);$productCard.find('.js_remove').attr('style','display: block;');}},{trigger:'iframe .s_dynamic_snippet_products .o_carousel_product_card .js_remove',run:'click',},]);return __exports;});;

/* /website_event/static/tests/tours/website_event.js */
odoo.define("website_event.tour",function(require){"use strict";const{_t}=require("web.core");const{Markup}=require('web.utils');const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour("website_event_tour",{test:true,url:"/",},[{content:_t("Click here to add new content to your website."),trigger:".o_menu_systray .o_new_content_container > a",consumeVisibleOnly:true,position:'bottom',},{trigger:"a[data-module-xml-id='base.module_website_event']",content:_t("Click here to create a new event."),position:"bottom",},{trigger:'.modal-dialog div[name="name"] input',content:Markup(_t("Create a name for your new event and click <em>\"Continue\"</em>. e.g: Technical Training")),run:'text Technical Training',position:"left",},{trigger:'.modal-dialog div[name=date_begin]',content:_t("Open date range picker. Pick a Start date for your event"),run:function(){$('input[id="date_begin"]').val('09/30/2020 08:00:00').change();$('input[id="date_end"]').val('10/02/2020 23:00:00').change();$('input[id="date_begin"]').click();}},{content:_t("Apply change."),trigger:'.daterangepicker[data-name=date_begin] .applyBtn',in_modal:false,},{trigger:'.modal-footer button.btn-primary',extra_trigger:'.modal-dialog input[type=text][value!=""]',content:Markup(_t("Click <em>Continue</em> to create the event.")),position:"right",},{trigger:"#oe_snippets.o_loaded #snippet_structure .oe_snippet:eq(2) .oe_snippet_thumbnail",content:_t("Drag this block and drop it in your page."),position:"bottom",run:"drag_and_drop",},{trigger:"button[data-action=save]",content:_t("Once you click on save, your event is updated."),position:"bottom",extra_trigger:".o_we_external_history_buttons button[data-action=undo]:not([disabled])",},{trigger:".o_menu_systray_item .o_switch_danger_success",extra_trigger:"iframe body:not(.editor_enable)",content:_t("Click to publish your event."),position:"top",},{trigger:".o_website_edit_in_backend > a",content:_t("Click here to customize your event further."),position:"bottom",}]);});;

/* /website_event/static/tests/tours/website_event_pages_seo.js */
odoo.define('@website_event/../tests/tours/website_event_pages_seo',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('website_event_pages_seo',{test:true,},[{content:"Open the site menu",trigger:'[data-menu-xmlid="website.menu_site"]',extra_trigger:'iframe #o_wevent_event_submenu',},{content:"Open the optimize SEO dialog",trigger:'[data-menu-xmlid="website.menu_optimize_seo"]',},{content:"Fill in the title input",trigger:'[for="website_meta_title"] + input',run:'text Hello, world!',},{content:"Save the dialog",trigger:'.modal-footer .btn-primary',},{content:"Check that the page title is adapted, inside and outside the iframe",trigger:'html:has(title:containsExactText(Hello, world!))',extra_trigger:'iframe html:has(title:containsExactText(Hello, world!))',},]);return __exports;});;

/* /website_crm/static/tests/tours/website_crm.js */
odoo.define('website_crm.tour',function(require){'use strict';const tour=require('web_tour.tour');const wTourUtils=require('website.tour_utils');wTourUtils.registerWebsitePreviewTour('website_crm_pre_tour',{test:true,url:'/contactus',edition:true,},[{content:"Select contact form",trigger:"iframe #wrap.o_editable section.s_website_form",},{content:"Open action select",trigger:"we-select:has(we-button:contains('Create an Opportunity')) we-toggler",extra_trigger:"#oe_snippets .o_we_customize_snippet_btn.active",},{content:"Select 'Create an Opportunity' as form action",trigger:"we-select we-button:contains('Create an Opportunity')",},{content:"Save the settings",trigger:"button[data-action=save]",},{content:"Ensure form model has changed and page reload is done after save",trigger:"iframe section.s_website_form form[data-model_name='crm.lead']",extra_trigger:"iframe body:not(.editor_enable)",}]);tour.register('website_crm_tour',{test:true,url:'/contactus',},[{content:"Complete name",trigger:"input[name=contact_name]",run:"text John Smith",},{content:"Complete phone number",trigger:"input[name=phone]",run:"text +32 485 118.218"},{content:"Complete Email",trigger:"input[name=email_from]",run:"text john@smith.com"},{content:"Complete Company",trigger:"input[name=partner_name]",run:"text Odoo S.A."},{content:"Complete Subject",trigger:"input[name=name]",run:"text Useless message"},{content:"Complete Subject",trigger:"textarea[name=description]",run:"text ### TOUR DATA ###"},{content:"Send the form",trigger:".s_website_form_send"},{content:"Check we were redirected to the success page",trigger:"#wrap:has(h1:contains('Thank You!'))"}]);tour.register('website_crm_catch_logged_partner_info_tour',{test:true,url:'/contactus',},[{content:"Complete Subject",trigger:"input[name=name]",run:"text Useless subject"},{content:"Complete Subject",trigger:"textarea[name=description]",run:"text ### TOUR DATA PREFILL ###"},{content:"Send the form",trigger:".s_website_form_send"},{content:"Check we were redirected to the success page",trigger:"#wrap:has(h1:contains('Thank You!'))"}]);return{};});;

/* /auth_totp/static/tests/totp_flow.js */
odoo.define('auth_totp.tours',function(require){"use strict";const tour=require('web_tour.tour');const ajax=require('web.ajax');function openRoot(){return[{content:"return to client root to avoid race condition",trigger:'body',run(){$('body').addClass('wait');window.location='/web';}},{content:"wait for client reload",trigger:'body:not(.wait)',run(){}}];}
function openUserProfileAtSecurityTab(){return[{content:'Open user account menu',trigger:'.o_user_menu .oe_topbar_name',run:'click',},{content:"Open preferences / profile screen",trigger:'[data-menu=settings]',run:'click',},{content:"Switch to security tab",trigger:'a[role=tab]:contains("Account Security")',run:'click',}];}
function closeProfileDialog({content,totp_state}){let trigger;switch(totp_state){case true:trigger='button[name=action_totp_disable]';break;case false:trigger='button[name=action_totp_enable_wizard]';break;case undefined:trigger='button.o_auth_2fa_btn';break;default:throw new Error(`Invalid totp state ${totp_state}`)}
return[{content,trigger,run(){const $modal=this.$anchor.parents('.o_dialog_container');if($modal.length){$modal.find('button[name=preference_cancel]').click()}}},{trigger:'body',async run(){while(document.querySelector('.o_dialog_container .o_dialog')){await Promise.resolve();}
this.$anchor.addClass('dialog-closed');},},{trigger:'body.dialog-closed',run(){},}];}
tour.register('totp_tour_setup',{test:true,url:'/web'},[...openUserProfileAtSecurityTab(),{content:"Open totp wizard",trigger:'button[name=action_totp_enable_wizard]',},{content:"Check that we have to enter enhanced security mode and input password",extra_trigger:'div:contains("enter your password")',trigger:'[name=password] input',run:'text demo',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},{content:"Check the wizard has opened",trigger:'li:contains("When requested to do so")',run(){}},{content:"Get secret from collapsed div",trigger:'a:contains("Cannot scan it?")',async run(helpers){const $secret=this.$anchor.closest('div').find('[name=secret] span:first-child');const $copyBtn=$secret.find('button');$copyBtn.remove();const token=await ajax.jsonRpc('/totphook','call',{secret:$secret.text()});helpers.text(token,'[name=code] input');helpers.click('button.btn-primary:contains(Activate)');$('body').addClass('got-token')}},{content:'wait for rpc',trigger:'body.got-token',run(){}},...openRoot(),...openUserProfileAtSecurityTab(),...closeProfileDialog({content:"Check that the button has changed",totp_state:true,}),]);tour.register('totp_login_enabled',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text demo',},{content:'input password',trigger:'input#password',run:'text demo',},{content:"click da button",trigger:'button:contains("Log in")',},{content:"expect totp screen",trigger:'label:contains(Authentication Code)',},{content:"input code",trigger:'input[name=totp_token]',async run(helpers){const token=await ajax.jsonRpc('/totphook','call',{});helpers.text(token);helpers.click('button:contains("Log in")');}},{content:"check we're logged in",trigger:".o_user_menu .oe_topbar_name",run(){}}]);tour.register('totp_login_device',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text demo',},{content:'input password',trigger:'input#password',run:'text demo',},{content:"click da button",trigger:'button:contains("Log in")',},{content:"expect totp screen",trigger:'label:contains(Authentication Code)',},{content:"check remember device box",trigger:'label[for=switch-remember]',},{content:"input code",trigger:'input[name=totp_token]',async run(helpers){const token=await ajax.jsonRpc('/totphook','call',{})
helpers.text(token);helpers.click('button:contains("Log in")');}},{content:"check we're logged in",trigger:".o_user_menu .oe_topbar_name",run:'click',},{content:"click the Log out button",trigger:'.dropdown-item[data-menu=logout]',},{content:"check that we're back on the login page or go to it",trigger:'input#login, a:contains(Log in)'},{content:"input login again",trigger:'input#login',run:'text demo',},{content:'input password again',trigger:'input#password',run:'text demo',},{content:"click da button again",trigger:'button:contains("Log in")',},{content:"check we're logged in without 2FA",trigger:".o_user_menu .oe_topbar_name",run(){}},...openUserProfileAtSecurityTab(),{content:"Open totp wizard",trigger:'button[name=action_totp_disable]',},{content:"Check that we have to enter enhanced security mode and input password",extra_trigger:'div:contains("enter your password")',trigger:'[name=password] input',run:'text demo',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},...openRoot(),...openUserProfileAtSecurityTab(),...closeProfileDialog({content:"Check that the button has changed",totp_state:false}),]);tour.register('totp_login_disabled',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text demo',},{content:'input password',trigger:'input#password',run:'text demo',},{content:"click da button",trigger:'button:contains("Log in")',},...openUserProfileAtSecurityTab(),...closeProfileDialog({})]);const columns={};tour.register('totp_admin_disables',{test:true,url:'/web'},[tour.stepUtils.showAppsMenuItem(),{content:'Go to settings',trigger:'[data-menu-xmlid="base.menu_administration"]'},{content:'Wait for page',trigger:'.o_menu_brand:contains("Settings")',run(){}},{content:"Open Users menu",trigger:'[data-menu-xmlid="base.menu_users"]'},{content:"Open Users view",trigger:'[data-menu-xmlid="base.menu_action_res_users"]',run(helpers){const $crumb=$('.breadcrumb');if($crumb.text().indexOf('Users')===-1){helpers.click();}else{helpers.click($('[data-menu-xmlid="base.menu_users"]'));}}},{content:"Find Demo User",trigger:'td.o_data_cell:contains("demo")',run(helpers){const $titles=this.$anchor.closest('table').find('tr:first th');for(let i=0;i<$titles.length;++i){columns[$titles[i].getAttribute('data-name')]=i;}
const $row=this.$anchor.closest('tr');const sel=$row.find('.o_list_record_selector input[type=checkbox]');helpers.click(sel);}},{content:"Open Actions menu",trigger:'button.dropdown-toggle:contains("Action")'},{content:"Select totp remover",trigger:'span.dropdown-item:contains(Disable two-factor authentication)'},{content:"Check that we have to enter enhanced security mode & input password",extra_trigger:'div:contains("enter your password")',trigger:'[name=password] input',run:'text admin',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},{content:"open the user's form",trigger:"td.o_data_cell:contains(demo)",},{content:"go to Account security Tab",trigger:"a.nav-link:contains(Account Security)",},...closeProfileDialog({content:"check that demo user has been de-totp'd",totp_state:false,}),])});;

/* /auth_totp_mail/static/tests/totp_flow.js */
odoo.define('auth_totp_mail.tours',function(require){"use strict";const tour=require('web_tour.tour');function openAccountSettingsTab(){return[{content:'Go to settings',trigger:'[data-menu-xmlid="base.menu_administration"]'},{content:'Wait for page',trigger:'.o_menu_brand:contains("Settings")',run:()=>{}},{content:"Open Users menu",trigger:'[data-menu-xmlid="base.menu_users"]'},{content:"Open Users view",trigger:'[data-menu-xmlid="base.menu_action_res_users"]',run:function(helpers){const $crumb=$('.breadcrumb');if($crumb.text().indexOf('Users')===-1){helpers.click();}else{helpers.click($('[data-menu-xmlid="base.menu_users"]'));}}}];}
tour.register('totp_admin_self_invite',{test:true,url:'/web'},[tour.stepUtils.showAppsMenuItem(),...openAccountSettingsTab(),{content:"open the user's form",trigger:"td.o_data_cell:contains(admin)",},{content:"go to Account security Tab",trigger:"a.nav-link:contains(Account Security)",},{content:"check that user cannot invite themselves to use 2FA.",trigger:"body",run:function(){const inviteBtn=$('button:contains(Invite to use 2FA)')[0];if(!inviteBtn){$('body').addClass('CannotInviteYourself');}}},{content:"check that user cannot invite themself.",trigger:"body.CannotInviteYourself"}]);tour.register('totp_admin_invite',{test:true,url:'/web'},[tour.stepUtils.showAppsMenuItem(),...openAccountSettingsTab(),{content:"open the user's form",trigger:"td.o_data_cell:contains(demo)",},{content:"go to Account security Tab",trigger:"a.nav-link:contains(Account Security)",},{content:"check that demo user can be invited to use 2FA.",trigger:"button:contains(Invite to use 2FA)",}]);});;

/* /auth_totp_portal/static/tests/totp_portal.js */
odoo.define('auth_totp_portal.tours',function(require){"use strict";const tour=require('web_tour.tour');const ajax=require('web.ajax');tour.register('totportal_tour_setup',{test:true,url:'/my/security'},[{content:"Open totp wizard",trigger:'button#auth_totp_portal_enable',},{content:"Check that we have to enter enhanced security mode",trigger:'div:contains("enter your password")',run:()=>{},},{content:"Input password",trigger:'[name=password]',run:'text portal',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},{content:"Check the wizard has opened",trigger:'li:contains("scan the barcode below")',run:()=>{}},{content:"Get secret from collapsed div",trigger:'a:contains("Cannot scan it?")',run:async function(helpers){const secret=this.$anchor.closest('div').find('span[name="secret"]').text();const token=await ajax.jsonRpc('/totphook','call',{secret});helpers._text(helpers._get_action_values('input[name=code]'),token);helpers._click(helpers._get_action_values('button.btn-primary:contains(Activate)'));}},{content:"Check that the button has changed",trigger:'button:contains(Disable two-factor authentication)',run:()=>{}}]);tour.register('totportal_login_enabled',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text portal',},{content:'input password',trigger:'input#password',run:'text portal',},{content:"click da button",trigger:'button:contains("Log in")',},{content:"expect totp screen",trigger:'label:contains(Authentication Code)',},{content:"input code",trigger:'input[name=totp_token]',run:async function(helpers){const token=await ajax.jsonRpc('/totphook','call',{});helpers._text(helpers._get_action_values(),token);helpers._click(helpers._get_action_values('button:contains("Log in")'));}},{content:"check we're logged in",trigger:"h3:contains(Documents)",run:()=>{}},{content:"go back to security",trigger:"a:contains(Security)",},{content:"Open totp wizard",trigger:'button#auth_totp_portal_disable',},{content:"Check that we have to enter enhanced security mode",trigger:'div:contains("enter your password")',run:()=>{},},{content:"Input password",trigger:'[name=password]',run:'text portal',},{content:"Confirm",trigger:"button:contains(Confirm Password)",},{content:"Check that the button has changed",trigger:'button:contains(Enable two-factor authentication)',run:()=>{}}]);tour.register('totportal_login_disabled',{test:true,url:'/'},[{content:"check that we're on the login page or go to it",trigger:'input#login, a:contains(Sign in)'},{content:"input login",trigger:'input#login',run:'text portal',},{content:'input password',trigger:'input#password',run:'text portal',},{content:"click da button",trigger:'button:contains("Log in")',},{content:"check we're logged in",trigger:"h3:contains(Documents)",run:()=>{}}]);});;

/* /event_sale/static/tests/tours/event_configurator_ui.js */
odoo.define('event.event_configurator_tour',function(require){"use strict";var tour=require('web_tour.tour');tour.register('event_configurator_tour',{url:"/web",test:true,},[tour.stepUtils.showAppsMenuItem(),{trigger:'.o_app[data-menu-xmlid="sale.sale_menu_root"]',edition:'community'},{trigger:'.o_app[data-menu-xmlid="sale.sale_menu_root"]',edition:'enterprise'},{trigger:".o_list_button_add",extra_trigger:".o_sale_order"},{trigger:"a:contains('Add a product')"},{trigger:'div[name="product_id"] input, div[name="product_template_id"] input',run:function(actions){actions.text('Event Registration');}},{trigger:'ul.ui-autocomplete a:contains("Event Registration")',run:'click'},{trigger:'div[name="event_id"] input',run:'click'},{trigger:'ul.ui-autocomplete a:contains("Design")',run:'click',in_modal:false},{trigger:'div[name="event_ticket_id"] input',run:'click'},{trigger:'ul.ui-autocomplete a:contains("VIP")',run:'click',in_modal:false},{trigger:'.o_event_sale_js_event_configurator_ok'},{trigger:"td[name='name'][data-tooltip*='VIP']",run:function(){}},{trigger:'ul.nav a:contains("Order Lines")',run:'click'},{content:"search the partner",trigger:'div[name="partner_id"] input',run:'text Azure'},{content:"select the partner",trigger:'ul.ui-autocomplete > li > a:contains(Azure)',},{trigger:'td:contains("Event")',run:'click'},{trigger:'button.fa-pencil'},{trigger:'div[name="event_ticket_id"] input',run:'click'},{trigger:'ul.ui-autocomplete a:contains("Standard")',run:'click',in_modal:false},{trigger:'.o_event_sale_js_event_configurator_ok'},{trigger:"td[name='name'][data-tooltip*='Standard']",run:function(){}},...tour.stepUtils.saveForm()]);});;

/* /website_event_sale/static/tests/tours/helpers/WebsiteEventSaleTourMethods.js */
odoo.define('website_event_sale.tour.WebsiteEventSaleTourMethods',function(require){'use strict';function changePricelist(pricelistName){return[{content:"Go to page Shop",trigger:'.nav-link:contains("Shop")',},{content:"Toggle Pricelist",trigger:'.o_pricelist_dropdown > .dropdown-toggle',run:'click',},{content:`Activate Pricelist ${pricelistName}`,trigger:`.dropdown-item:contains(${pricelistName})`,run:'click',},{content:'Wait for pricelist to load',trigger:`.dropdown-toggle:contains(${pricelistName})`,run:function(){},},];}
function checkPriceEvent(eventName,price){return[{content:"Go to page Event",trigger:'.nav-link:contains("Event")',},{content:"Open the Pycon event",trigger:`.o_wevent_events_list a:contains(${eventName})`,},{content:"Verify Price",trigger:`.oe_currency_value:contains(${price})`,run:function(){},},]}
function checkPriceDiscountEvent(eventName,price,discount){return[...checkPriceEvent(eventName,price),{content:"Verify Price before discount",trigger:`del:contains(${discount})`,run:function(){},},]}
function checkPriceCart(price){return[{content:"Go to page Cart",trigger:'.fa-shopping-cart',},{content:"Verify Price",trigger:`[id=order_total] .oe_currency_value:contains(${price})`,run:function(){},},]}
const getPriceListChecksSteps=function({pricelistName,eventName,price,priceBeforeDiscount=false}){const checkPriceSteps=priceBeforeDiscount?checkPriceDiscountEvent(eventName,price,priceBeforeDiscount):checkPriceEvent(eventName,price);return[...changePricelist(pricelistName),...checkPriceSteps,...checkPriceCart(price),]}
return{getPriceListChecksSteps,changePricelist,checkPriceCart}});;

/* /website_event_sale/static/tests/tours/website_event_sale.js */
odoo.define('website_event_sale.tour',function(require){'use strict';var tour=require('web_tour.tour');tour.register('event_buy_tickets',{test:true,url:'/event',},[{content:"Go to the `Events` page",trigger:'a[href*="/event"]:contains("Conference for Architects TEST"):first',},{content:"Select 1 unit of `Standard` ticket type",extra_trigger:'#wrap:not(:has(a[href*="/event"]:contains("Conference for Architects")))',trigger:'select:eq(0)',run:'text 1',},{content:"Select 2 units of `VIP` ticket type",extra_trigger:'select:eq(0):has(option:contains(1):propSelected)',trigger:'select:eq(1)',run:'text 2',},{content:"Click on `Order Now` button",extra_trigger:'select:eq(1):has(option:contains(2):propSelected)',trigger:'.btn-primary:contains("Register")',},{content:"Fill attendees details",trigger:'form[id="attendee_registration"] .btn:contains("Continue")',run:function(){$("input[name='1-name']").val("Att1");$("input[name='1-phone']").val("111 111");$("input[name='1-email']").val("att1@example.com");$("input[name='2-name']").val("Att2");$("input[name='2-phone']").val("222 222");$("input[name='2-email']").val("att2@example.com");$("input[name='3-name']").val("Att3");$("input[name='3-phone']").val("333 333");$("input[name='3-email']").val("att3@example.com");},},{content:"Validate attendees details",extra_trigger:"input[name='1-name'], input[name='2-name'], input[name='3-name']",trigger:'button:contains("Continue")',},{content:"Check that the cart contains exactly 3 triggers",trigger:'a:has(.my_cart_quantity:containsExact(3)),.o_extra_menu_items .fa-plus',run:function(){},},{content:"go to cart",trigger:'a:contains(Return to Cart)',},{content:"Now click on `Process Checkout`",extra_trigger:'a:has(.my_cart_quantity):contains(3),#cart_products input.js_quantity[value="3"]',trigger:'.btn-primary:contains("Process Checkout")'},{content:"Check that the subtotal is 4,000.00 USD",trigger:'#order_total_untaxed .oe_currency_value:contains("4,000.00")',run:function(){},},{content:"Select `Wire Transfer` payment method",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay",trigger:'button[name="o_payment_submit_button"]:visible:not(:disabled)',},{content:"Last step",trigger:'.oe_website_sale_tx_status:contains("Please use the following transfer details")',timeout:30000,}]);});;

/* /website_event_sale/static/tests/tours/website_event_sale_last_ticket.js */
odoo.define('website_event_sale.tour.last_ticket',function(require){'use strict';var tour=require('web_tour.tour');tour.register('event_buy_last_ticket',{test:true,url:'/event',},[{content:"Open the Last ticket test event page",trigger:'.o_wevent_events_list a:contains("Last ticket test")',},{content:"Show available Tickets",trigger:'.btn-primary:contains("Register")',},{content:"Select 2 units of `VIP` ticket type",extra_trigger:'#wrap:not(:has(a[href*="/event"]:contains("Last ticket test")))',trigger:'select:eq(0)',run:'text 2',},{content:"Click on `Order Now` button",extra_trigger:'select:eq(0):has(option:contains(2):propSelected)',trigger:'.a-submit:contains("Register")',},{content:"Fill attendees details",trigger:'form[id="attendee_registration"] .btn:contains("Continue")',run:function(){$("input[name='1-name']").val("Att1");$("input[name='1-phone']").val("111 111");$("input[name='1-email']").val("att1@example.com");$("input[name='2-name']").val("Att2");$("input[name='2-phone']").val("222 222");$("input[name='2-email']").val("att2@example.com");},},{content:"Validate attendees details",extra_trigger:"input[name='1-name'], input[name='2-name']",trigger:'button:contains("Continue")',},{content:"Fill address",trigger:'form.checkout_autoformat',run:function(){$("input[name='name']").val("test1");$("input[name='email']").val("test@example.com");$("input[name='phone']").val("111 111");$("input[name='street']").val("street test 1");$("input[name='city']").val("testCity");$("input[name='zip']").val("123");$('#country_id option:eq(1)').attr('selected',true);},},{content:"Validate address",trigger:'.btn-primary:contains("Next")',},{content:"Select `Wire Transfer` payment method",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay",extra_trigger:'#payment_method label:contains("Wire Transfer") input:checked,#payment_method:not(:has("input:radio:visible"))',trigger:'button[name="o_payment_submit_button"]:visible:not(:disabled)',},{content:"payment finish",trigger:'.oe_website_sale:contains("Please use the following transfer details")',run:function(){window.location.href='/contactus';},timeout:30000,},{content:"wait page loaded",trigger:'h1:contains("Contact us")',run:function(){},},]);});;

/* /website_event_sale/static/tests/tours/website_event_sale_pricelists.js */
odoo.define('website_event_sale.tour.event_sale_pricelists_different_currencies',function(require){'use strict';const tour=require('web_tour.tour');const{getPriceListChecksSteps}=require('website_event_sale.tour.WebsiteEventSaleTourMethods');tour.register('event_sale_pricelists_different_currencies',{test:true,url:'/event',},[{content:"Open the Pycon event",trigger:'.o_wevent_events_list a:contains("Pycon")',},{content:"Register",trigger:'.btn-primary:contains("Register")',},{content:"Fill attendees details",trigger:'form[id="attendee_registration"] .btn:contains("Continue")',run:function(){$("input[name='1-name']").val("Great Name");$("input[name='1-phone']").val("111 111");$("input[name='1-email']").val("great@name.com");},},{content:"Validate attendees details",extra_trigger:"input[name='1-name'], input[name='2-name']",trigger:'button:contains("Continue")',},...getPriceListChecksSteps({pricelistName:"EUR With Discount Included",eventName:"Pycon",price:"90.00",}),...getPriceListChecksSteps({pricelistName:"EUR Without Discount Included",eventName:"Pycon",price:"90.00",priceBeforeDiscount:"100.00",}),...getPriceListChecksSteps({pricelistName:"EX With Discount Included",eventName:"Pycon",price:"900.00",}),...getPriceListChecksSteps({pricelistName:"EX Without Discount Included",eventName:"Pycon",price:"900.00",priceBeforeDiscount:"1,000.00",}),]);});;

/* /website_sale_product_configurator/static/tests/tours/website_sale_buy.js */
odoo.define("website_sale_product_configurator.website_sale_tour",function(require){"use strict";var tour=require('web_tour.tour');require('website_sale.tour');var addCartStepIndex=_.findIndex(tour.tours.shop_buy_product.steps,function(step){return(step.id==='add_cart_step');});tour.tours.shop_buy_product.steps.splice(addCartStepIndex+1,1,{content:"click in modal on 'Proceed to checkout' button",trigger:'button:contains("Proceed to Checkout")',});});;

/* /website_sale_product_configurator/static/tests/tours/website_sale_preconfigured_variant_price.js */
odoo.define('@website_sale_product_configurator/../tests/tours/website_sale_preconfigured_variant_price',async function(require){'use strict';let __exports={};const tour=require('web_tour.tour');tour.register('website_sale_product_configurator_optional_products_tour',{test:true,},[{name:'Click Aluminium Option',trigger:'ul.js_add_cart_variants span:contains("Aluminium")',extra_trigger:'ul.js_add_cart_variants span:contains("Aluminium") ~ span.badge:contains("50.40")',},{name:'Add to cart',trigger:'#add_to_cart',},{name:'Check that modal was opened with the correct variant price',trigger:'main.oe_advanced_configurator_modal',extra_trigger:'main.oe_advanced_configurator_modal span:contains("800.40")',run:()=>{},}]);return __exports;});;

/* /website_sale_product_configurator/static/tests/tours/website_sale_shop_custom_attributes_value.js */
odoo.define("website_sale_product_TESTurator.tour_shop_custom_attribute_value",function(require){"use strict";var tour=require('web_tour.tour');var optionVariantImage;tour.register("a_shop_custom_attribute_value",{url:"/shop?search=Customizable Desk",test:true,},[{content:"click on Customizable Desk",trigger:'.oe_product_cart a:contains("Customizable Desk (TEST)")',},{trigger:'a.js_add_cart_json:has(i.fa-plus)',run:'click',},{trigger:'span.text-danger span:contains(750)',run:function(){},},{trigger:'span.oe_price span:contains(600)',run:function(){},},{id:'add_cart_step',trigger:'a:contains(ADD TO CART)',run:'click',},{trigger:'.oe_advanced_configurator_modal .js_product:eq(1) div:contains("Conference Chair (TEST) (Steel)")',run:function(){optionVariantImage=$('.oe_advanced_configurator_modal .js_product:eq(1) img.variant_image').attr('src');}},{trigger:'.oe_advanced_configurator_modal .js_product:eq(1) input[data-value_name="Aluminium"]',},{trigger:'.oe_advanced_configurator_modal .js_product:eq(1) div:contains("Conference Chair (TEST) (Aluminium)")',run:function(){var newVariantImage=$('.oe_advanced_configurator_modal .js_product:eq(1) img.variant_image').attr('src');if(newVariantImage!==optionVariantImage){$('<p>').text('image variant option src changed').insertAfter('.oe_advanced_configurator_modal .js_product:eq(1) .product-name');}}},{extra_trigger:'.oe_advanced_configurator_modal .js_product:eq(1) div:contains("image variant option src changed")',trigger:'.oe_advanced_configurator_modal .js_product:eq(1) input[data-value_name="Steel"]',},{trigger:'.oe_price span:contains(22.90)',run:function(){},},{trigger:'.oe_advanced_configurator_modal .js_product:has(strong:contains(Conference Chair)) .js_add',extra_trigger:'.oe_advanced_configurator_modal .js_product:has(strong:contains(Conference Chair))',run:'click'},{trigger:'.oe_advanced_configurator_modal .js_product:has(strong:contains(Chair floor protection)) .js_add',extra_trigger:'.oe_advanced_configurator_modal .js_product:has(strong:contains(Chair floor protection))',run:'click'},{trigger:'span:contains(1,257.00)',run:function(){},},{trigger:'button:has(span:contains(Proceed to Checkout))',run:'click',}]);});;

/* /website_sale_product_configurator/static/tests/tours/website_sale_variants_modal_window.js */
odoo.define('website_sale.tour_variants_modal_window',function(require){'use strict';var tour=require('web_tour.tour');tour.register('tour_variants_modal_window',{test:true,url:'/shop?search=Short (TEST)',},[{content:"Select the Short (TEST) product",trigger:'.oe_product_cart a:containsExact("Short (TEST)")',},{content:"Click on the always variant",trigger:'input[data-attribute_name="Always attribute size"][data-value_name="M always"]',},{content:"Click on the dynamic variant",trigger:'input[data-attribute_name="Dynamic attribute size"][data-value_name="M dynamic"]',},{content:"Click on the never variant",trigger:'input[data-attribute_name="Never attribute size"][data-value_name="M never"]',},{content:"Click on the never custom variant",trigger:'input[data-attribute_name="Never attribute size custom"][data-value_name="Yes never custom"]',},{trigger:'input.variant_custom_value',run:'text TEST',},{content:"Click add to cart",trigger:'#add_to_cart',},{content:"Go through the modal window of the product configurator",extra_trigger:'.oe_advanced_configurator_modal',trigger:'button span:contains(Proceed to Checkout)',run:'click'},{content:"Check the product is in the cart",trigger:'td.td-product_name:contains(Short (TEST))',},{content:"Check always variant",trigger:'td.td-product_name:contains(M always)',},{content:"Check dynamic variant",trigger:'td.td-product_name:contains(M dynamic)',},{content:"Check never variant",trigger:'td.td-product_name:contains(Never attribute size: M never)',},{content:"Check never custom variant",trigger:'td.td-product_name:contains(Never attribute size custom: Yes never custom: TEST)',}]);});;

/* /website_forum/static/tests/tours/website_forum_question.js */
odoo.define('website_forum.tour_forum_question',function(require){'use strict';var tour=require("web_tour.tour");tour.register('forum_question',{test:true,url:'/forum/help-1',},[{content:"Ask the question in this forum by clicking on the button.",trigger:'.o_forum_ask_btn',},{content:"Give your question content.",trigger:'input[name=post_name]',run:'text First Question Title',},{content:"Put your question here.",extra_trigger:"#wrap:not(:has(input[name=post_name]:propValue('')))",trigger:'.note-editable p',run:'text First Question',},{content:"Insert tags related to your question.",extra_trigger:'.note-editable:not(:has(br))',trigger:'.select2-choices',run:'text Tag',},{content:"Click to post your question.",extra_trigger:"#wrap:not(:has(input[id=s2id_autogen2]:propValue('')))",trigger:'button:contains("Post")',},{content:"This page contain new created question.",trigger:'#wrap:has(".fa-star")',run:function(){},},{content:"Close modal once modal animation is done.",extra_trigger:'div.modal.modal_shown',trigger:".modal-header button.btn-close",},{trigger:"a:contains(\"Answer\").collapsed",content:"Click to answer.",position:"bottom",},{content:"Put your answer here.",trigger:'.note-editable p',run:'text First Answer',},{content:"Click to post your answer.",extra_trigger:'.note-editable:not(:has(br))',trigger:'button:contains("Post Answer")',},{content:"Close modal once modal animation is done.",extra_trigger:'div.modal.modal_shown',trigger:".modal-header button.btn-close",},{content:"Click here to accept this answer.",extra_trigger:'#wrap:has(".o_wforum_validate_toggler")',trigger:'.o_wforum_validate_toggler[data-karma]:first',},{content:"Congratulations! You just created and post your first question and answer.",trigger:'#wrap:has(".o_wforum_answer_correct")',}]);});